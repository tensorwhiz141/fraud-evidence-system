/*! For license information please see main.601e15b7.js.LICENSE.txt */
(()=>{var e={43:(e,t,n)=>{"use strict";e.exports=n(202)},92:function(e){e.exports=function(){"use strict";return function(e,t,n){e=e||{};var r=t.prototype,i={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function o(e,t,n,i){return r.fromToBase(e,t,n,i)}n.en.relativeTime=i,r.fromToBase=function(t,r,o,s,a){for(var l,c,u,d=o.$locale().relativeTime||i,h=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],f=h.length,p=0;p<f;p+=1){var m=h[p];m.d&&(l=s?n(t).diff(o,m.d,!0):o.diff(t,m.d,!0));var g=(e.rounding||Math.round)(Math.abs(l));if(u=l>0,g<=m.r||!m.r){g<=1&&p>0&&(m=h[p-1]);var v=d[m.l];a&&(g=a(""+g)),c="string"==typeof v?v.replace("%d",g):v(g,r,m.l,u);break}}if(r)return c;var y=u?d.future:d.past;return"function"==typeof y?y(c):y.replace("%s",c)},r.to=function(e,t){return o(e,t,this,!0)},r.from=function(e,t){return o(e,t,this)};var s=function(e){return e.$u?n.utc():n()};r.toNow=function(e){return this.to(s(this),e)},r.fromNow=function(e){return this.from(s(this),e)}}}()},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:a.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function _(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=_.prototype=new y;b.constructor=_,m(b,v.prototype),b.isPureReactComponent=!0;var x=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)w.call(t,i)&&!k.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:S.current}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var j=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===o?"."+C(l,0):o,x(s)?(i="",null!=e&&(i=e.replace(j,"$&/")+"/"),T(s,t,i,"",function(e){return e})):null!=s&&(N(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(j,"$&/")+"/")+e)),t.push(s)),1;if(l=0,o=""===o?".":o+":",x(e))for(var c=0;c<e.length;c++){var u=o+C(a=e[c],c);l+=T(a,t,i,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=T(a=a.value,t,i,u=o+C(a,c++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",function(e){return t.call(n,e,i++)}),r}function L(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},A={transition:null},M={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:A,ReactCurrentOwner:S};function R(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,n){P(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=s,t.PureComponent=_,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.act=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!k.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:L}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=A.transition;A.transition={};try{e()}finally{A.transition=t}},t.unstable_act=R,t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.3.1"},210:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(829)),o=r(n(736)),s=n(745);class a{constructor(e){let{headers:t={},schema:n,fetch:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=Object.assign(Object.assign({},s.DEFAULT_HEADERS),t),this.schemaName=n,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new i.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new a(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:r=!1,get:i=!1,count:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=new URL(`${this.url}/rpc/${e}`);let l;r||i?(t=r?"HEAD":"GET",Object.entries(n).filter(e=>{let[t,n]=e;return void 0!==n}).map(e=>{let[t,n]=e;return[t,Array.isArray(n)?`{${n.join(",")}}`:`${n}`]}).forEach(e=>{let[t,n]=e;a.searchParams.append(t,n)})):(t="POST",l=n);const c=Object.assign({},this.headers);return s&&(c.Prefer=`count=${s}`),new o.default({method:t,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}}t.default=a},228:function(e,t){!function(e){"use strict";var t="1.9.4";function n(e){var t,n,r,i;for(n=1,r=arguments.length;n<r;n++)for(t in i=arguments[n])e[t]=i[t];return e}var r=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}();function i(e,t){var n=Array.prototype.slice;if(e.bind)return e.bind.apply(e,n.call(arguments,1));var r=n.call(arguments,2);return function(){return e.apply(t,r.length?r.concat(n.call(arguments)):arguments)}}var o=0;function s(e){return"_leaflet_id"in e||(e._leaflet_id=++o),e._leaflet_id}function a(e,t,n){var r,i,o,s;return s=function(){r=!1,i&&(o.apply(n,i),i=!1)},o=function(){r?i=arguments:(e.apply(n,arguments),setTimeout(s,t),r=!0)},o}function l(e,t,n){var r=t[1],i=t[0],o=r-i;return e===r&&n?e:((e-i)%o+o)%o+i}function c(){return!1}function u(e,t){if(!1===t)return e;var n=Math.pow(10,void 0===t?6:t);return Math.round(e*n)/n}function d(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function h(e){return d(e).split(/\s+/)}function f(e,t){for(var n in Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?r(e.options):{}),t)e.options[n]=t[n];return e.options}function p(e,t,n){var r=[];for(var i in e)r.push(encodeURIComponent(n?i.toUpperCase():i)+"="+encodeURIComponent(e[i]));return(t&&-1!==t.indexOf("?")?"&":"?")+r.join("&")}var m=/\{ *([\w_ -]+) *\}/g;function g(e,t){return e.replace(m,function(e,n){var r=t[n];if(void 0===r)throw new Error("No value provided for variable "+e);return"function"===typeof r&&(r=r(t)),r})}var v=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function y(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}var _="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function b(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var x=0;function w(e){var t=+new Date,n=Math.max(0,16-(t-x));return x=t+n,window.setTimeout(e,n)}var S=window.requestAnimationFrame||b("RequestAnimationFrame")||w,k=window.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function E(e,t,n){if(!n||S!==w)return S.call(window,i(e,t));e.call(t)}function N(e){e&&k.call(window,e)}var j={__proto__:null,extend:n,create:r,bind:i,get lastId(){return o},stamp:s,throttle:a,wrapNum:l,falseFn:c,formatNum:u,trim:d,splitWords:h,setOptions:f,getParamString:p,template:g,isArray:v,indexOf:y,emptyImageUrl:_,requestFn:S,cancelFn:k,requestAnimFrame:E,cancelAnimFrame:N};function C(){}function T(e){if("undefined"!==typeof L&&L&&L.Mixin){e=v(e)?e:[e];for(var t=0;t<e.length;t++)e[t]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}C.extend=function(e){var t=function(){f(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=t.__super__=this.prototype,o=r(i);for(var s in o.constructor=t,t.prototype=o,this)Object.prototype.hasOwnProperty.call(this,s)&&"prototype"!==s&&"__super__"!==s&&(t[s]=this[s]);return e.statics&&n(t,e.statics),e.includes&&(T(e.includes),n.apply(null,[o].concat(e.includes))),n(o,e),delete o.statics,delete o.includes,o.options&&(o.options=i.options?r(i.options):{},n(o.options,e.options)),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=o._initHooks.length;e<t;e++)o._initHooks[e].call(this)}},t},C.include=function(e){var t=this.prototype.options;return n(this.prototype,e),e.options&&(this.prototype.options=t,this.mergeOptions(e.options)),this},C.mergeOptions=function(e){return n(this.prototype.options,e),this},C.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),n="function"===typeof e?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var P={on:function(e,t,n){if("object"===typeof e)for(var r in e)this._on(r,e[r],t);else for(var i=0,o=(e=h(e)).length;i<o;i++)this._on(e[i],t,n);return this},off:function(e,t,n){if(arguments.length)if("object"===typeof e)for(var r in e)this._off(r,e[r],t);else{e=h(e);for(var i=1===arguments.length,o=0,s=e.length;o<s;o++)i?this._off(e[o]):this._off(e[o],t,n)}else delete this._events;return this},_on:function(e,t,n,r){if("function"===typeof t){if(!1===this._listens(e,t,n)){n===this&&(n=void 0);var i={fn:t,ctx:n};r&&(i.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(i)}}else console.warn("wrong listener type: "+typeof t)},_off:function(e,t,n){var r,i,o;if(this._events&&(r=this._events[e]))if(1!==arguments.length)if("function"===typeof t){var s=this._listens(e,t,n);if(!1!==s){var a=r[s];this._firingCount&&(a.fn=c,this._events[e]=r=r.slice()),r.splice(s,1)}}else console.warn("wrong listener type: "+typeof t);else{if(this._firingCount)for(i=0,o=r.length;i<o;i++)r[i].fn=c;delete this._events[e]}},fire:function(e,t,r){if(!this.listens(e,r))return this;var i=n({},t,{type:e,target:this,sourceTarget:t&&t.sourceTarget||this});if(this._events){var o=this._events[e];if(o){this._firingCount=this._firingCount+1||1;for(var s=0,a=o.length;s<a;s++){var l=o[s],c=l.fn;l.once&&this.off(e,c,l.ctx),c.call(l.ctx||this,i)}this._firingCount--}}return r&&this._propagateEvent(i),this},listens:function(e,t,n,r){"string"!==typeof e&&console.warn('"string" type argument expected');var i=t;"function"!==typeof t&&(r=!!t,i=void 0,n=void 0);var o=this._events&&this._events[e];if(o&&o.length&&!1!==this._listens(e,i,n))return!0;if(r)for(var s in this._eventParents)if(this._eventParents[s].listens(e,t,n,r))return!0;return!1},_listens:function(e,t,n){if(!this._events)return!1;var r=this._events[e]||[];if(!t)return!!r.length;n===this&&(n=void 0);for(var i=0,o=r.length;i<o;i++)if(r[i].fn===t&&r[i].ctx===n)return i;return!1},once:function(e,t,n){if("object"===typeof e)for(var r in e)this._on(r,e[r],t,!0);else for(var i=0,o=(e=h(e)).length;i<o;i++)this._on(e[i],t,n,!0);return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[s(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[s(e)],this},_propagateEvent:function(e){for(var t in this._eventParents)this._eventParents[t].fire(e.type,n({layer:e.target,propagatedFrom:e.target},e),!0)}};P.addEventListener=P.on,P.removeEventListener=P.clearAllEventListeners=P.off,P.addOneTimeEventListener=P.once,P.fireEvent=P.fire,P.hasEventListeners=P.listens;var O=C.extend(P);function A(e,t,n){this.x=n?Math.round(e):e,this.y=n?Math.round(t):t}var M=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};function R(e,t,n){return e instanceof A?e:v(e)?new A(e[0],e[1]):void 0===e||null===e?e:"object"===typeof e&&"x"in e&&"y"in e?new A(e.x,e.y):new A(e,t,n)}function I(e,t){if(e)for(var n=t?[e,t]:e,r=0,i=n.length;r<i;r++)this.extend(n[r])}function z(e,t){return!e||e instanceof I?e:new I(e,t)}function D(e,t){if(e)for(var n=t?[e,t]:e,r=0,i=n.length;r<i;r++)this.extend(n[r])}function B(e,t){return e instanceof D?e:new D(e,t)}function $(e,t,n){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,void 0!==n&&(this.alt=+n)}function U(e,t,n){return e instanceof $?e:v(e)&&"object"!==typeof e[0]?3===e.length?new $(e[0],e[1],e[2]):2===e.length?new $(e[0],e[1]):null:void 0===e||null===e?e:"object"===typeof e&&"lat"in e?new $(e.lat,"lng"in e?e.lng:e.lon,e.alt):void 0===t?null:new $(e,t,n)}A.prototype={clone:function(){return new A(this.x,this.y)},add:function(e){return this.clone()._add(R(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(R(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new A(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new A(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=M(this.x),this.y=M(this.y),this},distanceTo:function(e){var t=(e=R(e)).x-this.x,n=e.y-this.y;return Math.sqrt(t*t+n*n)},equals:function(e){return(e=R(e)).x===this.x&&e.y===this.y},contains:function(e){return e=R(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+u(this.x)+", "+u(this.y)+")"}},I.prototype={extend:function(e){var t,n;if(!e)return this;if(e instanceof A||"number"===typeof e[0]||"x"in e)t=n=R(e);else if(t=(e=z(e)).min,n=e.max,!t||!n)return this;return this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)):(this.min=t.clone(),this.max=n.clone()),this},getCenter:function(e){return R((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return R(this.min.x,this.max.y)},getTopRight:function(){return R(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,n;return(e="number"===typeof e[0]||e instanceof A?R(e):z(e))instanceof I?(t=e.min,n=e.max):t=n=e,t.x>=this.min.x&&n.x<=this.max.x&&t.y>=this.min.y&&n.y<=this.max.y},intersects:function(e){e=z(e);var t=this.min,n=this.max,r=e.min,i=e.max,o=i.x>=t.x&&r.x<=n.x,s=i.y>=t.y&&r.y<=n.y;return o&&s},overlaps:function(e){e=z(e);var t=this.min,n=this.max,r=e.min,i=e.max,o=i.x>t.x&&r.x<n.x,s=i.y>t.y&&r.y<n.y;return o&&s},isValid:function(){return!(!this.min||!this.max)},pad:function(e){var t=this.min,n=this.max,r=Math.abs(t.x-n.x)*e,i=Math.abs(t.y-n.y)*e;return z(R(t.x-r,t.y-i),R(n.x+r,n.y+i))},equals:function(e){return!!e&&(e=z(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight()))}},D.prototype={extend:function(e){var t,n,r=this._southWest,i=this._northEast;if(e instanceof $)t=e,n=e;else{if(!(e instanceof D))return e?this.extend(U(e)||B(e)):this;if(t=e._southWest,n=e._northEast,!t||!n)return this}return r||i?(r.lat=Math.min(t.lat,r.lat),r.lng=Math.min(t.lng,r.lng),i.lat=Math.max(n.lat,i.lat),i.lng=Math.max(n.lng,i.lng)):(this._southWest=new $(t.lat,t.lng),this._northEast=new $(n.lat,n.lng)),this},pad:function(e){var t=this._southWest,n=this._northEast,r=Math.abs(t.lat-n.lat)*e,i=Math.abs(t.lng-n.lng)*e;return new D(new $(t.lat-r,t.lng-i),new $(n.lat+r,n.lng+i))},getCenter:function(){return new $((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new $(this.getNorth(),this.getWest())},getSouthEast:function(){return new $(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e="number"===typeof e[0]||e instanceof $||"lat"in e?U(e):B(e);var t,n,r=this._southWest,i=this._northEast;return e instanceof D?(t=e.getSouthWest(),n=e.getNorthEast()):t=n=e,t.lat>=r.lat&&n.lat<=i.lat&&t.lng>=r.lng&&n.lng<=i.lng},intersects:function(e){e=B(e);var t=this._southWest,n=this._northEast,r=e.getSouthWest(),i=e.getNorthEast(),o=i.lat>=t.lat&&r.lat<=n.lat,s=i.lng>=t.lng&&r.lng<=n.lng;return o&&s},overlaps:function(e){e=B(e);var t=this._southWest,n=this._northEast,r=e.getSouthWest(),i=e.getNorthEast(),o=i.lat>t.lat&&r.lat<n.lat,s=i.lng>t.lng&&r.lng<n.lng;return o&&s},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,t){return!!e&&(e=B(e),this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t))},isValid:function(){return!(!this._southWest||!this._northEast)}},$.prototype={equals:function(e,t){return!!e&&(e=U(e),Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng))<=(void 0===t?1e-9:t))},toString:function(e){return"LatLng("+u(this.lat,e)+", "+u(this.lng,e)+")"},distanceTo:function(e){return H.distance(this,U(e))},wrap:function(){return H.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return B([this.lat-t,this.lng-n],[this.lat+t,this.lng+n])},clone:function(){return new $(this.lat,this.lng,this.alt)}};var F={latLngToPoint:function(e,t){var n=this.projection.project(e),r=this.scale(t);return this.transformation._transform(n,r)},pointToLatLng:function(e,t){var n=this.scale(t),r=this.transformation.untransform(e,n);return this.projection.unproject(r)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,n=this.scale(e);return new I(this.transformation.transform(t.min,n),this.transformation.transform(t.max,n))},infinite:!1,wrapLatLng:function(e){var t=this.wrapLng?l(e.lng,this.wrapLng,!0):e.lng;return new $(this.wrapLat?l(e.lat,this.wrapLat,!0):e.lat,t,e.alt)},wrapLatLngBounds:function(e){var t=e.getCenter(),n=this.wrapLatLng(t),r=t.lat-n.lat,i=t.lng-n.lng;if(0===r&&0===i)return e;var o=e.getSouthWest(),s=e.getNorthEast();return new D(new $(o.lat-r,o.lng-i),new $(s.lat-r,s.lng-i))}},H=n({},F,{wrapLng:[-180,180],R:6371e3,distance:function(e,t){var n=Math.PI/180,r=e.lat*n,i=t.lat*n,o=Math.sin((t.lat-e.lat)*n/2),s=Math.sin((t.lng-e.lng)*n/2),a=o*o+Math.cos(r)*Math.cos(i)*s*s,l=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return this.R*l}}),Z=6378137,W={R:Z,MAX_LATITUDE:85.0511287798,project:function(e){var t=Math.PI/180,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,e.lat),-n),i=Math.sin(r*t);return new A(this.R*e.lng*t,this.R*Math.log((1+i)/(1-i))/2)},unproject:function(e){var t=180/Math.PI;return new $((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:function(){var e=Z*Math.PI;return new I([-e,-e],[e,e])}()};function V(e,t,n,r){if(v(e))return this._a=e[0],this._b=e[1],this._c=e[2],void(this._d=e[3]);this._a=e,this._b=t,this._c=n,this._d=r}function q(e,t,n,r){return new V(e,t,n,r)}V.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new A((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}};var K=n({},H,{code:"EPSG:3857",projection:W,transformation:function(){var e=.5/(Math.PI*W.R);return q(e,.5,-e,.5)}()}),Y=n({},K,{code:"EPSG:900913"});function G(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function X(e,t){var n,r,i,o,s,a,l="";for(n=0,i=e.length;n<i;n++){for(r=0,o=(s=e[n]).length;r<o;r++)l+=(r?"L":"M")+(a=s[r]).x+" "+a.y;l+=t?Ie.svg?"z":"x":""}return l||"M0 0"}var J=document.documentElement.style,Q="ActiveXObject"in window,ee=Q&&!document.addEventListener,te="msLaunchUri"in navigator&&!("documentMode"in document),ne=Re("webkit"),re=Re("android"),ie=Re("android 2")||Re("android 3"),oe=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),se=re&&Re("Google")&&oe<537&&!("AudioNode"in window),ae=!!window.opera,le=!te&&Re("chrome"),ce=Re("gecko")&&!ne&&!ae&&!Q,ue=!le&&Re("safari"),de=Re("phantom"),he="OTransition"in J,fe=0===navigator.platform.indexOf("Win"),pe=Q&&"transition"in J,me="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ie,ge="MozPerspective"in J,ve=!window.L_DISABLE_3D&&(pe||me||ge)&&!he&&!de,ye="undefined"!==typeof orientation||Re("mobile"),_e=ye&&ne,be=ye&&me,xe=!window.PointerEvent&&window.MSPointerEvent,we=!(!window.PointerEvent&&!xe),Se="ontouchstart"in window||!!window.TouchEvent,ke=!window.L_NO_TOUCH&&(Se||we),Ee=ye&&ae,Ne=ye&&ce,je=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ce=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",c,t),window.removeEventListener("testPassiveEventSupport",c,t)}catch(n){}return e}(),Te=!!document.createElement("canvas").getContext,Pe=!(!document.createElementNS||!G("svg").createSVGRect),Le=!!Pe&&function(){var e=document.createElement("div");return e.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(e.firstChild&&e.firstChild.namespaceURI)}(),Oe=!Pe&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&"object"===typeof t.adj}catch(n){return!1}}(),Ae=0===navigator.platform.indexOf("Mac"),Me=0===navigator.platform.indexOf("Linux");function Re(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var Ie={ie:Q,ielt9:ee,edge:te,webkit:ne,android:re,android23:ie,androidStock:se,opera:ae,chrome:le,gecko:ce,safari:ue,phantom:de,opera12:he,win:fe,ie3d:pe,webkit3d:me,gecko3d:ge,any3d:ve,mobile:ye,mobileWebkit:_e,mobileWebkit3d:be,msPointer:xe,pointer:we,touch:ke,touchNative:Se,mobileOpera:Ee,mobileGecko:Ne,retina:je,passiveEvents:Ce,canvas:Te,svg:Pe,vml:Oe,inlineSvg:Le,mac:Ae,linux:Me},ze=Ie.msPointer?"MSPointerDown":"pointerdown",De=Ie.msPointer?"MSPointerMove":"pointermove",Be=Ie.msPointer?"MSPointerUp":"pointerup",$e=Ie.msPointer?"MSPointerCancel":"pointercancel",Ue={touchstart:ze,touchmove:De,touchend:Be,touchcancel:$e},Fe={touchstart:Je,touchmove:Xe,touchend:Xe,touchcancel:Xe},He={},Ze=!1;function We(e,t,n){return"touchstart"===t&&Ge(),Fe[t]?(n=Fe[t].bind(this,n),e.addEventListener(Ue[t],n,!1),n):(console.warn("wrong event specified:",t),c)}function Ve(e,t,n){Ue[t]?e.removeEventListener(Ue[t],n,!1):console.warn("wrong event specified:",t)}function qe(e){He[e.pointerId]=e}function Ke(e){He[e.pointerId]&&(He[e.pointerId]=e)}function Ye(e){delete He[e.pointerId]}function Ge(){Ze||(document.addEventListener(ze,qe,!0),document.addEventListener(De,Ke,!0),document.addEventListener(Be,Ye,!0),document.addEventListener($e,Ye,!0),Ze=!0)}function Xe(e,t){if(t.pointerType!==(t.MSPOINTER_TYPE_MOUSE||"mouse")){for(var n in t.touches=[],He)t.touches.push(He[n]);t.changedTouches=[t],e(t)}}function Je(e,t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&qt(t),Xe(e,t)}function Qe(e){var t,n,r={};for(n in e)t=e[n],r[n]=t&&t.bind?t.bind(e):t;return e=r,r.type="dblclick",r.detail=2,r.isTrusted=!1,r._simulated=!0,r}var et=200;function tt(e,t){e.addEventListener("dblclick",t);var n,r=0;function i(e){if(1===e.detail){if("mouse"!==e.pointerType&&(!e.sourceCapabilities||e.sourceCapabilities.firesTouchEvents)){var i=Yt(e);if(!i.some(function(e){return e instanceof HTMLLabelElement&&e.attributes.for})||i.some(function(e){return e instanceof HTMLInputElement||e instanceof HTMLSelectElement})){var o=Date.now();o-r<=et?2===++n&&t(Qe(e)):n=1,r=o}}}else n=e.detail}return e.addEventListener("click",i),{dblclick:t,simDblclick:i}}function nt(e,t){e.removeEventListener("dblclick",t.dblclick),e.removeEventListener("click",t.simDblclick)}var rt,it,ot,st,at,lt=Et(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ct=Et(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ut="webkitTransition"===ct||"OTransition"===ct?ct+"End":"transitionend";function dt(e){return"string"===typeof e?document.getElementById(e):e}function ht(e,t){var n=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!n||"auto"===n)&&document.defaultView){var r=document.defaultView.getComputedStyle(e,null);n=r?r[t]:null}return"auto"===n?null:n}function ft(e,t,n){var r=document.createElement(e);return r.className=t||"",n&&n.appendChild(r),r}function pt(e){var t=e.parentNode;t&&t.removeChild(e)}function mt(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function gt(e){var t=e.parentNode;t&&t.lastChild!==e&&t.appendChild(e)}function vt(e){var t=e.parentNode;t&&t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function yt(e,t){if(void 0!==e.classList)return e.classList.contains(t);var n=wt(e);return n.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)}function _t(e,t){if(void 0!==e.classList)for(var n=h(t),r=0,i=n.length;r<i;r++)e.classList.add(n[r]);else if(!yt(e,t)){var o=wt(e);xt(e,(o?o+" ":"")+t)}}function bt(e,t){void 0!==e.classList?e.classList.remove(t):xt(e,d((" "+wt(e)+" ").replace(" "+t+" "," ")))}function xt(e,t){void 0===e.className.baseVal?e.className=t:e.className.baseVal=t}function wt(e){return e.correspondingElement&&(e=e.correspondingElement),void 0===e.className.baseVal?e.className:e.className.baseVal}function St(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&kt(e,t)}function kt(e,t){var n=!1,r="DXImageTransform.Microsoft.Alpha";try{n=e.filters.item(r)}catch(i){if(1===t)return}t=Math.round(100*t),n?(n.Enabled=100!==t,n.Opacity=t):e.style.filter+=" progid:"+r+"(opacity="+t+")"}function Et(e){for(var t=document.documentElement.style,n=0;n<e.length;n++)if(e[n]in t)return e[n];return!1}function Nt(e,t,n){var r=t||new A(0,0);e.style[lt]=(Ie.ie3d?"translate("+r.x+"px,"+r.y+"px)":"translate3d("+r.x+"px,"+r.y+"px,0)")+(n?" scale("+n+")":"")}function jt(e,t){e._leaflet_pos=t,Ie.any3d?Nt(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function Ct(e){return e._leaflet_pos||new A(0,0)}if("onselectstart"in document)rt=function(){zt(window,"selectstart",qt)},it=function(){Bt(window,"selectstart",qt)};else{var Tt=Et(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);rt=function(){if(Tt){var e=document.documentElement.style;ot=e[Tt],e[Tt]="none"}},it=function(){Tt&&(document.documentElement.style[Tt]=ot,ot=void 0)}}function Pt(){zt(window,"dragstart",qt)}function Lt(){Bt(window,"dragstart",qt)}function Ot(e){for(;-1===e.tabIndex;)e=e.parentNode;e.style&&(At(),st=e,at=e.style.outlineStyle,e.style.outlineStyle="none",zt(window,"keydown",At))}function At(){st&&(st.style.outlineStyle=at,st=void 0,at=void 0,Bt(window,"keydown",At))}function Mt(e){do{e=e.parentNode}while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function Rt(e){var t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}var It={__proto__:null,TRANSFORM:lt,TRANSITION:ct,TRANSITION_END:ut,get:dt,getStyle:ht,create:ft,remove:pt,empty:mt,toFront:gt,toBack:vt,hasClass:yt,addClass:_t,removeClass:bt,setClass:xt,getClass:wt,setOpacity:St,testProp:Et,setTransform:Nt,setPosition:jt,getPosition:Ct,get disableTextSelection(){return rt},get enableTextSelection(){return it},disableImageDrag:Pt,enableImageDrag:Lt,preventOutline:Ot,restoreOutline:At,getSizedParentNode:Mt,getScale:Rt};function zt(e,t,n,r){if(t&&"object"===typeof t)for(var i in t)Ft(e,i,t[i],n);else for(var o=0,s=(t=h(t)).length;o<s;o++)Ft(e,t[o],n,r);return this}var Dt="_leaflet_events";function Bt(e,t,n,r){if(1===arguments.length)$t(e),delete e[Dt];else if(t&&"object"===typeof t)for(var i in t)Ht(e,i,t[i],n);else if(t=h(t),2===arguments.length)$t(e,function(e){return-1!==y(t,e)});else for(var o=0,s=t.length;o<s;o++)Ht(e,t[o],n,r);return this}function $t(e,t){for(var n in e[Dt]){var r=n.split(/\d/)[0];t&&!t(r)||Ht(e,r,null,null,n)}}var Ut={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ft(e,t,n,r){var i=t+s(n)+(r?"_"+s(r):"");if(e[Dt]&&e[Dt][i])return this;var o=function(t){return n.call(r||e,t||window.event)},a=o;!Ie.touchNative&&Ie.pointer&&0===t.indexOf("touch")?o=We(e,t,o):Ie.touch&&"dblclick"===t?o=tt(e,o):"addEventListener"in e?"touchstart"===t||"touchmove"===t||"wheel"===t||"mousewheel"===t?e.addEventListener(Ut[t]||t,o,!!Ie.passiveEvents&&{passive:!1}):"mouseenter"===t||"mouseleave"===t?(o=function(t){t=t||window.event,Qt(e,t)&&a(t)},e.addEventListener(Ut[t],o,!1)):e.addEventListener(t,a,!1):e.attachEvent("on"+t,o),e[Dt]=e[Dt]||{},e[Dt][i]=o}function Ht(e,t,n,r,i){i=i||t+s(n)+(r?"_"+s(r):"");var o=e[Dt]&&e[Dt][i];if(!o)return this;!Ie.touchNative&&Ie.pointer&&0===t.indexOf("touch")?Ve(e,t,o):Ie.touch&&"dblclick"===t?nt(e,o):"removeEventListener"in e?e.removeEventListener(Ut[t]||t,o,!1):e.detachEvent("on"+t,o),e[Dt][i]=null}function Zt(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function Wt(e){return Ft(e,"wheel",Zt),this}function Vt(e){return zt(e,"mousedown touchstart dblclick contextmenu",Zt),e._leaflet_disable_click=!0,this}function qt(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function Kt(e){return qt(e),Zt(e),this}function Yt(e){if(e.composedPath)return e.composedPath();for(var t=[],n=e.target;n;)t.push(n),n=n.parentNode;return t}function Gt(e,t){if(!t)return new A(e.clientX,e.clientY);var n=Rt(t),r=n.boundingClientRect;return new A((e.clientX-r.left)/n.x-t.clientLeft,(e.clientY-r.top)/n.y-t.clientTop)}var Xt=Ie.linux&&Ie.chrome?window.devicePixelRatio:Ie.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Jt(e){return Ie.edge?e.wheelDeltaY/2:e.deltaY&&0===e.deltaMode?-e.deltaY/Xt:e.deltaY&&1===e.deltaMode?20*-e.deltaY:e.deltaY&&2===e.deltaMode?60*-e.deltaY:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?20*-e.detail:e.detail?e.detail/-32765*60:0}function Qt(e,t){var n=t.relatedTarget;if(!n)return!0;try{for(;n&&n!==e;)n=n.parentNode}catch(r){return!1}return n!==e}var en={__proto__:null,on:zt,off:Bt,stopPropagation:Zt,disableScrollPropagation:Wt,disableClickPropagation:Vt,preventDefault:qt,stop:Kt,getPropagationPath:Yt,getMousePosition:Gt,getWheelDelta:Jt,isExternalTarget:Qt,addListener:zt,removeListener:Bt},tn=O.extend({run:function(e,t,n,r){this.stop(),this._el=e,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=Ct(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=E(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,n=1e3*this._duration;t<n?this._runFrame(this._easeOut(t/n),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var n=this._startPos.add(this._offset.multiplyBy(e));t&&n._round(),jt(this._el,n),this.fire("step")},_complete:function(){N(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),nn=O.extend({options:{crs:K,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=f(this,t),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),void 0!==t.zoom&&(this._zoom=this._limitZoom(t.zoom)),t.center&&void 0!==t.zoom&&this.setView(U(t.center),t.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ct&&Ie.any3d&&!Ie.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),zt(this._proxy,ut,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,t,r){return t=void 0===t?this._zoom:this._limitZoom(t),e=this._limitCenter(U(e),t,this.options.maxBounds),r=r||{},this._stop(),this._loaded&&!r.reset&&!0!==r&&(void 0!==r.animate&&(r.zoom=n({animate:r.animate},r.zoom),r.pan=n({animate:r.animate,duration:r.duration},r.pan)),this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,r.zoom):this._tryAnimatedPan(e,r.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(e,t,r.pan&&r.pan.noMoveStart),this)},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e=e||(Ie.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e=e||(Ie.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,n){var r=this.getZoomScale(t),i=this.getSize().divideBy(2),o=(e instanceof A?e:this.latLngToContainerPoint(e)).subtract(i).multiplyBy(1-1/r),s=this.containerPointToLatLng(i.add(o));return this.setView(s,t,{zoom:n})},_getBoundsCenterZoom:function(e,t){t=t||{},e=e.getBounds?e.getBounds():B(e);var n=R(t.paddingTopLeft||t.padding||[0,0]),r=R(t.paddingBottomRight||t.padding||[0,0]),i=this.getBoundsZoom(e,!1,n.add(r));if((i="number"===typeof t.maxZoom?Math.min(t.maxZoom,i):i)===1/0)return{center:e.getCenter(),zoom:i};var o=r.subtract(n).divideBy(2),s=this.project(e.getSouthWest(),i),a=this.project(e.getNorthEast(),i);return{center:this.unproject(s.add(a).divideBy(2).add(o),i),zoom:i}},fitBounds:function(e,t){if(!(e=B(e)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(e,t);return this.setView(n.center,n.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){if(t=t||{},!(e=R(e).round()).x&&!e.y)return this.fire("moveend");if(!0!==t.animate&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new tn,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),!1!==t.animate){_t(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,n,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,t,n){if(!1===(n=n||{}).animate||!Ie.any3d)return this.setView(e,t,n);this._stop();var r=this.project(this.getCenter()),i=this.project(e),o=this.getSize(),s=this._zoom;e=U(e),t=void 0===t?s:t;var a=Math.max(o.x,o.y),l=a*this.getZoomScale(s,t),c=i.distanceTo(r)||1,u=1.42,d=u*u;function h(e){var t=(l*l-a*a+(e?-1:1)*d*d*c*c)/(2*(e?l:a)*d*c),n=Math.sqrt(t*t+1)-t;return n<1e-9?-18:Math.log(n)}function f(e){return(Math.exp(e)-Math.exp(-e))/2}function p(e){return(Math.exp(e)+Math.exp(-e))/2}function m(e){return f(e)/p(e)}var g=h(0);function v(e){return a*(p(g)/p(g+u*e))}function y(e){return a*(p(g)*m(g+u*e)-f(g))/d}function _(e){return 1-Math.pow(1-e,1.5)}var b=Date.now(),x=(h(1)-g)/u,w=n.duration?1e3*n.duration:1e3*x*.8;function S(){var n=(Date.now()-b)/w,o=_(n)*x;n<=1?(this._flyToFrame=E(S,this),this._move(this.unproject(r.add(i.subtract(r).multiplyBy(y(o)/c)),s),this.getScaleZoom(a/v(o),s),{flyTo:!0})):this._move(e,t)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),S.call(this),this},flyToBounds:function(e,t){var n=this._getBoundsCenterZoom(e,t);return this.flyTo(n.center,n.zoom,t)},setMaxBounds:function(e){return e=B(e),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var t=this.options.minZoom;return this.options.minZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var t=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var n=this.getCenter(),r=this._limitCenter(n,this._zoom,B(e));return n.equals(r)||this.panTo(r,t),this._enforcingBounds=!1,this},panInside:function(e,t){var n=R((t=t||{}).paddingTopLeft||t.padding||[0,0]),r=R(t.paddingBottomRight||t.padding||[0,0]),i=this.project(this.getCenter()),o=this.project(e),s=this.getPixelBounds(),a=z([s.min.add(n),s.max.subtract(r)]),l=a.getSize();if(!a.contains(o)){this._enforcingBounds=!0;var c=o.subtract(a.getCenter()),u=a.extend(o).getSize().subtract(l);i.x+=c.x<0?-u.x:u.x,i.y+=c.y<0?-u.y:u.y,this.panTo(this.unproject(i),t),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=n({animate:!1,pan:!0},!0===e?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var r=this.getSize(),o=t.divideBy(2).round(),s=r.divideBy(2).round(),a=o.subtract(s);return a.x||a.y?(e.animate&&e.pan?this.panBy(a):(e.pan&&this._rawPanBy(a),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:r})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=n({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=i(this._handleGeolocationResponse,this),r=i(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,r,e):navigator.geolocation.getCurrentPosition(t,r,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(this._container._leaflet_id){var t=e.code,n=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+n+"."})}},_handleGeolocationResponse:function(e){if(this._container._leaflet_id){var t=new $(e.coords.latitude,e.coords.longitude),n=t.toBounds(2*e.coords.accuracy),r=this._locateOptions;if(r.setView){var i=this.getBoundsZoom(n);this.setView(t,r.maxZoom?Math.min(i,r.maxZoom):i)}var o={latlng:t,bounds:n,timestamp:e.timestamp};for(var s in e.coords)"number"===typeof e.coords[s]&&(o[s]=e.coords[s]);this.fire("locationfound",o)}},addHandler:function(e,t){if(!t)return this;var n=this[e]=new t(this);return this._handlers.push(n),this.options[e]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var e;for(e in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),pt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(N(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[e].remove();for(e in this._panes)pt(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,t){var n=ft("div","leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),t||this._mapPane);return e&&(this._panes[e]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds();return new D(this.unproject(e.getBottomLeft()),this.unproject(e.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,n){e=B(e),n=R(n||[0,0]);var r=this.getZoom()||0,i=this.getMinZoom(),o=this.getMaxZoom(),s=e.getNorthWest(),a=e.getSouthEast(),l=this.getSize().subtract(n),c=z(this.project(a,r),this.project(s,r)).getSize(),u=Ie.any3d?this.options.zoomSnap:1,d=l.x/c.x,h=l.y/c.y,f=t?Math.max(d,h):Math.min(d,h);return r=this.getScaleZoom(f,r),u&&(r=Math.round(r/(u/100))*(u/100),r=t?Math.ceil(r/u)*u:Math.floor(r/u)*u),Math.max(i,Math.min(o,r))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new A(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var n=this._getTopLeftPoint(e,t);return new I(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(void 0===e?this.getZoom():e)},getPane:function(e){return"string"===typeof e?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var n=this.options.crs;return t=void 0===t?this._zoom:t,n.scale(e)/n.scale(t)},getScaleZoom:function(e,t){var n=this.options.crs;t=void 0===t?this._zoom:t;var r=n.zoom(e*n.scale(t));return isNaN(r)?1/0:r},project:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.latLngToPoint(U(e),t)},unproject:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.pointToLatLng(R(e),t)},layerPointToLatLng:function(e){var t=R(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){return this.project(U(e))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(U(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(B(e))},distance:function(e,t){return this.options.crs.distance(U(e),U(t))},containerPointToLayerPoint:function(e){return R(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return R(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(R(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(U(e)))},mouseEventToContainerPoint:function(e){return Gt(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=dt(e);if(!t)throw new Error("Map container not found.");if(t._leaflet_id)throw new Error("Map container is already initialized.");zt(t,"scroll",this._onScroll,this),this._containerId=s(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ie.any3d,_t(e,"leaflet-container"+(Ie.touch?" leaflet-touch":"")+(Ie.retina?" leaflet-retina":"")+(Ie.ielt9?" leaflet-oldie":"")+(Ie.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=ht(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&"sticky"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),jt(this._mapPane,new A(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(_t(e.markerPane,"leaflet-zoom-hide"),_t(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t,n){jt(this._mapPane,new A(0,0));var r=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset");var i=this._zoom!==t;this._moveStart(i,n)._move(e,t)._moveEnd(i),this.fire("viewreset"),r&&this.fire("load")},_moveStart:function(e,t){return e&&this.fire("zoomstart"),t||this.fire("movestart"),this},_move:function(e,t,n,r){void 0===t&&(t=this._zoom);var i=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),r?n&&n.pinch&&this.fire("zoom",n):((i||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)),this},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return N(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){jt(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[s(this._container)]=this;var t=e?Bt:zt;t(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&t(window,"resize",this._onResize,this),Ie.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){N(this._resizeRequest),this._resizeRequest=E(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,t){for(var n,r=[],i="mouseout"===t||"mouseover"===t,o=e.target||e.srcElement,a=!1;o;){if((n=this._targets[s(o)])&&("click"===t||"preclick"===t)&&this._draggableMoved(n)){a=!0;break}if(n&&n.listens(t,!0)){if(i&&!Qt(o,e))break;if(r.push(n),i)break}if(o===this._container)break;o=o.parentNode}return r.length||a||i||!this.listens(t,!0)||(r=[this]),r},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var t=e.target||e.srcElement;if(!(!this._loaded||t._leaflet_disable_events||"click"===e.type&&this._isClickDisabled(t))){var n=e.type;"mousedown"===n&&Ot(t),this._fireDOMEvent(e,n)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,t,r){if("click"===e.type){var i=n({},e);i.type="preclick",this._fireDOMEvent(i,i.type,r)}var o=this._findEventTargets(e,t);if(r){for(var s=[],a=0;a<r.length;a++)r[a].listens(t,!0)&&s.push(r[a]);o=s.concat(o)}if(o.length){"contextmenu"===t&&qt(e);var l=o[0],c={originalEvent:e};if("keypress"!==e.type&&"keydown"!==e.type&&"keyup"!==e.type){var u=l.getLatLng&&(!l._radius||l._radius<=10);c.containerPoint=u?this.latLngToContainerPoint(l.getLatLng()):this.mouseEventToContainerPoint(e),c.layerPoint=this.containerPointToLayerPoint(c.containerPoint),c.latlng=u?l.getLatLng():this.layerPointToLatLng(c.layerPoint)}for(a=0;a<o.length;a++)if(o[a].fire(t,c,!0),c.originalEvent._stopped||!1===o[a].options.bubblingMouseEvents&&-1!==y(this._mouseEvents,t))return}},_draggableMoved:function(e){return(e=e.dragging&&e.dragging.enabled()?e:this).dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return Ct(this._mapPane)||new A(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){return(e&&void 0!==t?this._getNewPixelOrigin(e,t):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var n=this.getSize()._divideBy(2);return this.project(e,t)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,n){var r=this._getNewPixelOrigin(n,t);return this.project(e,t)._subtract(r)},_latLngBoundsToNewLayerBounds:function(e,t,n){var r=this._getNewPixelOrigin(n,t);return z([this.project(e.getSouthWest(),t)._subtract(r),this.project(e.getNorthWest(),t)._subtract(r),this.project(e.getSouthEast(),t)._subtract(r),this.project(e.getNorthEast(),t)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,n){if(!n)return e;var r=this.project(e,t),i=this.getSize().divideBy(2),o=new I(r.subtract(i),r.add(i)),s=this._getBoundsOffset(o,n,t);return Math.abs(s.x)<=1&&Math.abs(s.y)<=1?e:this.unproject(r.add(s),t)},_limitOffset:function(e,t){if(!t)return e;var n=this.getPixelBounds(),r=new I(n.min.add(e),n.max.add(e));return e.add(this._getBoundsOffset(r,t))},_getBoundsOffset:function(e,t,n){var r=z(this.project(t.getNorthEast(),n),this.project(t.getSouthWest(),n)),i=r.min.subtract(e.min),o=r.max.subtract(e.max);return new A(this._rebound(i.x,-o.x),this._rebound(i.y,-o.y))},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),n=this.getMaxZoom(),r=Ie.any3d?this.options.zoomSnap:1;return r&&(e=Math.round(e/r)*r),Math.max(t,Math.min(n,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){bt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var n=this._getCenterOffset(e)._trunc();return!(!0!==(t&&t.animate)&&!this.getSize().contains(n))&&(this.panBy(n,t),!0)},_createAnimProxy:function(){var e=this._proxy=ft("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(e){var t=lt,n=this._proxy.style[t];Nt(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),n===this._proxy.style[t]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){pt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),t=this.getZoom();Nt(this._proxy,this.project(e,t),this.getZoomScale(t,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(t),i=this._getCenterOffset(e)._divideBy(1-1/r);return!(!0!==n.animate&&!this.getSize().contains(i))&&(E(function(){this._moveStart(!0,n.noMoveStart||!1)._animateZoom(e,t,!0)},this),!0)},_animateZoom:function(e,t,n,r){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,_t(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,noUpdate:r}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&bt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function rn(e,t){return new nn(e,t)}var on=C.extend({options:{position:"topright"},initialize:function(e){f(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),n=this.getPosition(),r=e._controlCorners[n];return _t(t,"leaflet-control"),-1!==n.indexOf("bottom")?r.insertBefore(t,r.firstChild):r.appendChild(t),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(pt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),sn=function(e){return new on(e)};nn.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},t="leaflet-",n=this._controlContainer=ft("div",t+"control-container",this._container);function r(r,i){var o=t+r+" "+t+i;e[r+i]=ft("div",o,n)}r("top","left"),r("top","right"),r("bottom","left"),r("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)pt(this._controlCorners[e]);pt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var an=on.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,n,r){return n<r?-1:r<n?1:0}},initialize:function(e,t,n){for(var r in f(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,e)this._addLayer(e[r],r);for(r in t)this._addLayer(t[r],r,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return on.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var t=this._getLayer(s(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){_t(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(_t(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):bt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return bt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=ft("div",e),n=this.options.collapsed;t.setAttribute("aria-haspopup",!0),Vt(t),Wt(t);var r=this._section=ft("section",e+"-list");n&&(this._map.on("click",this.collapse,this),zt(t,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var i=this._layersLink=ft("a",e+"-toggle",t);i.href="#",i.title="Layers",i.setAttribute("role","button"),zt(i,{keydown:function(e){13===e.keyCode&&this._expandSafely()},click:function(e){qt(e),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=ft("div",e+"-base",r),this._separator=ft("div",e+"-separator",r),this._overlaysList=ft("div",e+"-overlays",r),t.appendChild(r)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&s(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,n){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:n}),this.options.sortLayers&&this._layers.sort(i(function(e,t){return this.options.sortFunction(e.layer,t.layer,e.name,t.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;mt(this._baseLayersList),mt(this._overlaysList),this._layerControlInputs=[];var e,t,n,r,i=0;for(n=0;n<this._layers.length;n++)r=this._layers[n],this._addItem(r),t=t||r.overlay,e=e||!r.overlay,i+=r.overlay?0:1;return this.options.hideSingleBase&&(e=e&&i>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=t&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var t=this._getLayer(s(e.target)),n=t.overlay?"add"===e.type?"overlayadd":"overlayremove":"add"===e.type?"baselayerchange":null;n&&this._map.fire(n,t)},_createRadioElement:function(e,t){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':"")+"/>",r=document.createElement("div");return r.innerHTML=n,r.firstChild},_addItem:function(e){var t,n=document.createElement("label"),r=this._map.hasLayer(e.layer);e.overlay?((t=document.createElement("input")).type="checkbox",t.className="leaflet-control-layers-selector",t.defaultChecked=r):t=this._createRadioElement("leaflet-base-layers_"+s(this),r),this._layerControlInputs.push(t),t.layerId=s(e.layer),zt(t,"click",this._onInputClick,this);var i=document.createElement("span");i.innerHTML=" "+e.name;var o=document.createElement("span");return n.appendChild(o),o.appendChild(t),o.appendChild(i),(e.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){if(!this._preventClick){var e,t,n=this._layerControlInputs,r=[],i=[];this._handlingClick=!0;for(var o=n.length-1;o>=0;o--)e=n[o],t=this._getLayer(e.layerId).layer,e.checked?r.push(t):e.checked||i.push(t);for(o=0;o<i.length;o++)this._map.hasLayer(i[o])&&this._map.removeLayer(i[o]);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])||this._map.addLayer(r[o]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var e,t,n=this._layerControlInputs,r=this._map.getZoom(),i=n.length-1;i>=0;i--)e=n[i],t=this._getLayer(e.layerId).layer,e.disabled=void 0!==t.options.minZoom&&r<t.options.minZoom||void 0!==t.options.maxZoom&&r>t.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var e=this._section;this._preventClick=!0,zt(e,"click",qt),this.expand();var t=this;setTimeout(function(){Bt(e,"click",qt),t._preventClick=!1})}}),ln=function(e,t,n){return new an(e,t,n)},cn=on.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",n=ft("div",t+" leaflet-bar"),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,t+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,t+"-out",n,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,t,n,r,i){var o=ft("a",n,r);return o.innerHTML=e,o.href="#",o.title=t,o.setAttribute("role","button"),o.setAttribute("aria-label",t),Vt(o),zt(o,"click",Kt),zt(o,"click",i,this),zt(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";bt(this._zoomInButton,t),bt(this._zoomOutButton,t),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||e._zoom===e.getMinZoom())&&(_t(this._zoomOutButton,t),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||e._zoom===e.getMaxZoom())&&(_t(this._zoomInButton,t),this._zoomInButton.setAttribute("aria-disabled","true"))}});nn.mergeOptions({zoomControl:!0}),nn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new cn,this.addControl(this.zoomControl))});var un=function(e){return new cn(e)},dn=on.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t="leaflet-control-scale",n=ft("div",t),r=this.options;return this._addScales(r,t+"-line",n),e.on(r.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),n},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,n){e.metric&&(this._mScale=ft("div",t,n)),e.imperial&&(this._iScale=ft("div",t,n))},_update:function(){var e=this._map,t=e.getSize().y/2,n=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(n)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),n=t<1e3?t+" m":t/1e3+" km";this._updateScale(this._mScale,n,t/e)},_updateImperial:function(e){var t,n,r,i=3.2808399*e;i>5280?(t=i/5280,n=this._getRoundNum(t),this._updateScale(this._iScale,n+" mi",n/t)):(r=this._getRoundNum(i),this._updateScale(this._iScale,r+" ft",r/i))},_updateScale:function(e,t,n){e.style.width=Math.round(this.options.maxWidth*n)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),n=e/t;return t*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),hn=function(e){return new dn(e)},fn='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',pn=on.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ie.inlineSvg?fn+" ":"")+"Leaflet</a>"},initialize:function(e){f(this,e),this._attributions={}},onAdd:function(e){for(var t in e.attributionControl=this,this._container=ft("div","leaflet-control-attribution"),Vt(this._container),e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),e.on("layeradd",this._addAttribution,this),this._container},onRemove:function(e){e.off("layeradd",this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once("remove",function(){this.removeAttribution(e.layer.getAttribution())},this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(", ")),this._container.innerHTML=n.join(' <span aria-hidden="true">|</span> ')}}});nn.mergeOptions({attributionControl:!0}),nn.addInitHook(function(){this.options.attributionControl&&(new pn).addTo(this)});var mn=function(e){return new pn(e)};on.Layers=an,on.Zoom=cn,on.Scale=dn,on.Attribution=pn,sn.layers=ln,sn.zoom=un,sn.scale=hn,sn.attribution=mn;var gn=C.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});gn.addTo=function(e,t){return e.addHandler(t,this),this};var vn={Events:P},yn=Ie.touch?"touchstart mousedown":"mousedown",_n=O.extend({options:{clickTolerance:3},initialize:function(e,t,n,r){f(this,r),this._element=e,this._dragStartTarget=t||e,this._preventOutline=n},enable:function(){this._enabled||(zt(this._dragStartTarget,yn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(_n._dragging===this&&this.finishDrag(!0),Bt(this._dragStartTarget,yn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._enabled&&(this._moved=!1,!yt(this._element,"leaflet-zoom-anim")))if(e.touches&&1!==e.touches.length)_n._dragging===this&&this.finishDrag();else if(!(_n._dragging||e.shiftKey||1!==e.which&&1!==e.button&&!e.touches)&&(_n._dragging=this,this._preventOutline&&Ot(this._element),Pt(),rt(),!this._moving)){this.fire("down");var t=e.touches?e.touches[0]:e,n=Mt(this._element);this._startPoint=new A(t.clientX,t.clientY),this._startPos=Ct(this._element),this._parentScale=Rt(n);var r="mousedown"===e.type;zt(document,r?"mousemove":"touchmove",this._onMove,this),zt(document,r?"mouseup":"touchend touchcancel",this._onUp,this)}},_onMove:function(e){if(this._enabled)if(e.touches&&e.touches.length>1)this._moved=!0;else{var t=e.touches&&1===e.touches.length?e.touches[0]:e,n=new A(t.clientX,t.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,qt(e),this._moved||(this.fire("dragstart"),this._moved=!0,_t(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),_t(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=e,this._updatePosition()))}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),jt(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(e){bt(document.body,"leaflet-dragging"),this._lastTarget&&(bt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Bt(document,"mousemove touchmove",this._onMove,this),Bt(document,"mouseup touchend touchcancel",this._onUp,this),Lt(),it();var t=this._moved&&this._moving;this._moving=!1,_n._dragging=!1,t&&this.fire("dragend",{noInertia:e,distance:this._newPos.distanceTo(this._startPos)})}});function bn(e,t,n){var r,i,o,s,a,l,c,u,d,h=[1,4,2,8];for(i=0,c=e.length;i<c;i++)e[i]._code=An(e[i],t);for(s=0;s<4;s++){for(u=h[s],r=[],i=0,o=(c=e.length)-1;i<c;o=i++)a=e[i],l=e[o],a._code&u?l._code&u||((d=On(l,a,u,t,n))._code=An(d,t),r.push(d)):(l._code&u&&((d=On(l,a,u,t,n))._code=An(d,t),r.push(d)),r.push(a));e=r}return e}function xn(e,t){var n,r,i,o,s,a,l,c,u;if(!e||0===e.length)throw new Error("latlngs not passed");In(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var d=U([0,0]),h=B(e);h.getNorthWest().distanceTo(h.getSouthWest())*h.getNorthEast().distanceTo(h.getNorthWest())<1700&&(d=wn(e));var f=e.length,p=[];for(n=0;n<f;n++){var m=U(e[n]);p.push(t.project(U([m.lat-d.lat,m.lng-d.lng])))}for(a=l=c=0,n=0,r=f-1;n<f;r=n++)i=p[n],o=p[r],s=i.y*o.x-o.y*i.x,l+=(i.x+o.x)*s,c+=(i.y+o.y)*s,a+=3*s;u=0===a?p[0]:[l/a,c/a];var g=t.unproject(R(u));return U([g.lat+d.lat,g.lng+d.lng])}function wn(e){for(var t=0,n=0,r=0,i=0;i<e.length;i++){var o=U(e[i]);t+=o.lat,n+=o.lng,r++}return U([t/r,n/r])}var Sn,kn={__proto__:null,clipPolygon:bn,polygonCenter:xn,centroid:wn};function En(e,t){if(!t||!e.length)return e.slice();var n=t*t;return e=Cn(e=Pn(e,n),n)}function Nn(e,t,n){return Math.sqrt(Rn(e,t,n,!0))}function jn(e,t,n){return Rn(e,t,n)}function Cn(e,t){var n=e.length,r=new(typeof Uint8Array!==void 0+""?Uint8Array:Array)(n);r[0]=r[n-1]=1,Tn(e,r,t,0,n-1);var i,o=[];for(i=0;i<n;i++)r[i]&&o.push(e[i]);return o}function Tn(e,t,n,r,i){var o,s,a,l=0;for(s=r+1;s<=i-1;s++)(a=Rn(e[s],e[r],e[i],!0))>l&&(o=s,l=a);l>n&&(t[o]=1,Tn(e,t,n,r,o),Tn(e,t,n,o,i))}function Pn(e,t){for(var n=[e[0]],r=1,i=0,o=e.length;r<o;r++)Mn(e[r],e[i])>t&&(n.push(e[r]),i=r);return i<o-1&&n.push(e[o-1]),n}function Ln(e,t,n,r,i){var o,s,a,l=r?Sn:An(e,n),c=An(t,n);for(Sn=c;;){if(!(l|c))return[e,t];if(l&c)return!1;a=An(s=On(e,t,o=l||c,n,i),n),o===l?(e=s,l=a):(t=s,c=a)}}function On(e,t,n,r,i){var o,s,a=t.x-e.x,l=t.y-e.y,c=r.min,u=r.max;return 8&n?(o=e.x+a*(u.y-e.y)/l,s=u.y):4&n?(o=e.x+a*(c.y-e.y)/l,s=c.y):2&n?(o=u.x,s=e.y+l*(u.x-e.x)/a):1&n&&(o=c.x,s=e.y+l*(c.x-e.x)/a),new A(o,s,i)}function An(e,t){var n=0;return e.x<t.min.x?n|=1:e.x>t.max.x&&(n|=2),e.y<t.min.y?n|=4:e.y>t.max.y&&(n|=8),n}function Mn(e,t){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r}function Rn(e,t,n,r){var i,o=t.x,s=t.y,a=n.x-o,l=n.y-s,c=a*a+l*l;return c>0&&((i=((e.x-o)*a+(e.y-s)*l)/c)>1?(o=n.x,s=n.y):i>0&&(o+=a*i,s+=l*i)),a=e.x-o,l=e.y-s,r?a*a+l*l:new A(o,s)}function In(e){return!v(e[0])||"object"!==typeof e[0][0]&&"undefined"!==typeof e[0][0]}function zn(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),In(e)}function Dn(e,t){var n,r,i,o,s,a,l,c;if(!e||0===e.length)throw new Error("latlngs not passed");In(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var u=U([0,0]),d=B(e);d.getNorthWest().distanceTo(d.getSouthWest())*d.getNorthEast().distanceTo(d.getNorthWest())<1700&&(u=wn(e));var h=e.length,f=[];for(n=0;n<h;n++){var p=U(e[n]);f.push(t.project(U([p.lat-u.lat,p.lng-u.lng])))}for(n=0,r=0;n<h-1;n++)r+=f[n].distanceTo(f[n+1])/2;if(0===r)c=f[0];else for(n=0,o=0;n<h-1;n++)if(s=f[n],a=f[n+1],(o+=i=s.distanceTo(a))>r){l=(o-r)/i,c=[a.x-l*(a.x-s.x),a.y-l*(a.y-s.y)];break}var m=t.unproject(R(c));return U([m.lat+u.lat,m.lng+u.lng])}var Bn={__proto__:null,simplify:En,pointToSegmentDistance:Nn,closestPointOnSegment:jn,clipSegment:Ln,_getEdgeIntersection:On,_getBitCode:An,_sqClosestPointOnSegment:Rn,isFlat:In,_flat:zn,polylineCenter:Dn},$n={project:function(e){return new A(e.lng,e.lat)},unproject:function(e){return new $(e.y,e.x)},bounds:new I([-180,-90],[180,90])},Un={R:6378137,R_MINOR:6356752.314245179,bounds:new I([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(e){var t=Math.PI/180,n=this.R,r=e.lat*t,i=this.R_MINOR/n,o=Math.sqrt(1-i*i),s=o*Math.sin(r),a=Math.tan(Math.PI/4-r/2)/Math.pow((1-s)/(1+s),o/2);return r=-n*Math.log(Math.max(a,1e-10)),new A(e.lng*t*n,r)},unproject:function(e){for(var t,n=180/Math.PI,r=this.R,i=this.R_MINOR/r,o=Math.sqrt(1-i*i),s=Math.exp(-e.y/r),a=Math.PI/2-2*Math.atan(s),l=0,c=.1;l<15&&Math.abs(c)>1e-7;l++)t=o*Math.sin(a),t=Math.pow((1-t)/(1+t),o/2),a+=c=Math.PI/2-2*Math.atan(s*t)-a;return new $(a*n,e.x*n/r)}},Fn={__proto__:null,LonLat:$n,Mercator:Un,SphericalMercator:W},Hn=n({},H,{code:"EPSG:3395",projection:Un,transformation:function(){var e=.5/(Math.PI*Un.R);return q(e,.5,-e,.5)}()}),Zn=n({},H,{code:"EPSG:4326",projection:$n,transformation:q(1/180,1,-1/180,.5)}),Wn=n({},F,{projection:$n,transformation:q(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,t){var n=t.lng-e.lng,r=t.lat-e.lat;return Math.sqrt(n*n+r*r)},infinite:!0});F.Earth=H,F.EPSG3395=Hn,F.EPSG3857=K,F.EPSG900913=Y,F.EPSG4326=Zn,F.Simple=Wn;var Vn=O.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[s(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[s(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var t=e.target;if(t.hasLayer(this)){if(this._map=t,this._zoomAnimated=t._zoomAnimated,this.getEvents){var n=this.getEvents();t.on(n,this),this.once("remove",function(){t.off(n,this)},this)}this.onAdd(t),this.fire("add"),t.fire("layeradd",{layer:this})}}});nn.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var t=s(e);return this._layers[t]||(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e)),this},removeLayer:function(e){var t=s(e);return this._layers[t]?(this._loaded&&e.onRemove(this),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return s(e)in this._layers},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},_addLayers:function(e){for(var t=0,n=(e=e?v(e)?e:[e]:[]).length;t<n;t++)this.addLayer(e[t])},_addZoomLimit:function(e){isNaN(e.options.maxZoom)&&isNaN(e.options.minZoom)||(this._zoomBoundLayers[s(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=s(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,t=-1/0,n=this._getZoomSpan();for(var r in this._zoomBoundLayers){var i=this._zoomBoundLayers[r].options;e=void 0===i.minZoom?e:Math.min(e,i.minZoom),t=void 0===i.maxZoom?t:Math.max(t,i.maxZoom)}this._layersMaxZoom=t===-1/0?void 0:t,this._layersMinZoom=e===1/0?void 0:e,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var qn=Vn.extend({initialize:function(e,t){var n,r;if(f(this,t),this._layers={},e)for(n=0,r=e.length;n<r;n++)this.addLayer(e[n])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return("number"===typeof e?e:this.getLayerId(e))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var t,n,r=Array.prototype.slice.call(arguments,1);for(t in this._layers)(n=this._layers[t])[e]&&n[e].apply(n,r);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return s(e)}}),Kn=function(e,t){return new qn(e,t)},Yn=qn.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),qn.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),qn.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new D;for(var t in this._layers){var n=this._layers[t];e.extend(n.getBounds?n.getBounds():n.getLatLng())}return e}}),Gn=function(e,t){return new Yn(e,t)},Xn=C.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){f(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var n=this._getIconUrl(e);if(!n){if("icon"===e)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var r=this._createImg(n,t&&"IMG"===t.tagName?t:null);return this._setIconStyles(r,e),(this.options.crossOrigin||""===this.options.crossOrigin)&&(r.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),r},_setIconStyles:function(e,t){var n=this.options,r=n[t+"Size"];"number"===typeof r&&(r=[r,r]);var i=R(r),o=R("shadow"===t&&n.shadowAnchor||n.iconAnchor||i&&i.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(n.className||""),o&&(e.style.marginLeft=-o.x+"px",e.style.marginTop=-o.y+"px"),i&&(e.style.width=i.x+"px",e.style.height=i.y+"px")},_createImg:function(e,t){return(t=t||document.createElement("img")).src=e,t},_getIconUrl:function(e){return Ie.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});function Jn(e){return new Xn(e)}var Qn=Xn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return"string"!==typeof Qn.imagePath&&(Qn.imagePath=this._detectIconPath()),(this.options.imagePath||Qn.imagePath)+Xn.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var t=function(e,t,n){var r=t.exec(e);return r&&r[n]};return(e=t(e,/^url\((['"])?(.+)\1\)$/,2))&&t(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=ft("div","leaflet-default-icon-path",document.body),t=ht(e,"background-image")||ht(e,"backgroundImage");if(document.body.removeChild(e),t=this._stripUrl(t))return t;var n=document.querySelector('link[href$="leaflet.css"]');return n?n.href.substring(0,n.href.length-11-1):""}}),er=gn.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new _n(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),_t(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&bt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var t=this._marker,n=t._map,r=this._marker.options.autoPanSpeed,i=this._marker.options.autoPanPadding,o=Ct(t._icon),s=n.getPixelBounds(),a=n.getPixelOrigin(),l=z(s.min._subtract(a).add(i),s.max._subtract(a).subtract(i));if(!l.contains(o)){var c=R((Math.max(l.max.x,o.x)-l.max.x)/(s.max.x-l.max.x)-(Math.min(l.min.x,o.x)-l.min.x)/(s.min.x-l.min.x),(Math.max(l.max.y,o.y)-l.max.y)/(s.max.y-l.max.y)-(Math.min(l.min.y,o.y)-l.min.y)/(s.min.y-l.min.y)).multiplyBy(r);n.panBy(c,{animate:!1}),this._draggable._newPos._add(c),this._draggable._startPos._add(c),jt(t._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=E(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(N(this._panRequest),this._panRequest=E(this._adjustPan.bind(this,e)))},_onDrag:function(e){var t=this._marker,n=t._shadow,r=Ct(t._icon),i=t._map.layerPointToLatLng(r);n&&jt(n,r),t._latlng=i,e.latlng=i,e.oldLatLng=this._oldLatLng,t.fire("move",e).fire("drag",e)},_onDragEnd:function(e){N(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),tr=Vn.extend({options:{icon:new Qn,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,t){f(this,t),this._latlng=U(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=U(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=e.icon.createIcon(this._icon),r=!1;n!==this._icon&&(this._icon&&this._removeIcon(),r=!0,e.title&&(n.title=e.title),"IMG"===n.tagName&&(n.alt=e.alt||"")),_t(n,t),e.keyboard&&(n.tabIndex="0",n.setAttribute("role","button")),this._icon=n,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&zt(n,"focus",this._panOnFocus,this);var i=e.icon.createShadow(this._shadow),o=!1;i!==this._shadow&&(this._removeShadow(),o=!0),i&&(_t(i,t),i.alt=""),this._shadow=i,e.opacity<1&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),i&&o&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Bt(this._icon,"focus",this._panOnFocus,this),pt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&pt(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&jt(this._icon,e),this._shadow&&jt(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(_t(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),er)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new er(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&St(this._icon,e),this._shadow&&St(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(e){var t=this.options.icon.options,n=t.iconSize?R(t.iconSize):R(0,0),r=t.iconAnchor?R(t.iconAnchor):R(0,0);e.panInside(this._latlng,{paddingTopLeft:r,paddingBottomRight:n.subtract(r)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function nr(e,t){return new tr(e,t)}var rr=Vn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return f(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ir=rr.extend({options:{fill:!0,radius:10},initialize:function(e,t){f(this,t),this._latlng=U(e),this._radius=this.options.radius},setLatLng:function(e){var t=this._latlng;return this._latlng=U(e),this.redraw(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return rr.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,n=this._clickTolerance(),r=[e+n,t+n];this._pxBounds=new I(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function or(e,t){return new ir(e,t)}var sr=ir.extend({initialize:function(e,t,r){if("number"===typeof t&&(t=n({},r,{radius:t})),f(this,t),this._latlng=U(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new D(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:rr.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,n=this._map,r=n.options.crs;if(r.distance===H.distance){var i=Math.PI/180,o=this._mRadius/H.R/i,s=n.project([t+o,e]),a=n.project([t-o,e]),l=s.add(a).divideBy(2),c=n.unproject(l).lat,u=Math.acos((Math.cos(o*i)-Math.sin(t*i)*Math.sin(c*i))/(Math.cos(t*i)*Math.cos(c*i)))/i;(isNaN(u)||0===u)&&(u=o/Math.cos(Math.PI/180*t)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(u)?0:l.x-n.project([c,e-u]).x,this._radiusY=l.y-s.y}else{var d=r.unproject(r.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(d).x}this._updateBounds()}});function ar(e,t,n){return new sr(e,t,n)}var lr=rr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){f(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t,n,r=1/0,i=null,o=Rn,s=0,a=this._parts.length;s<a;s++)for(var l=this._parts[s],c=1,u=l.length;c<u;c++){var d=o(e,t=l[c-1],n=l[c],!0);d<r&&(r=d,i=o(e,t,n))}return i&&(i.distance=Math.sqrt(r)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Dn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=U(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new D,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return In(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],n=In(e),r=0,i=e.length;r<i;r++)n?(t[r]=U(e[r]),this._bounds.extend(t[r])):t[r]=this._convertLatLngs(e[r]);return t},_project:function(){var e=new I;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),t=new A(e,e);this._rawPxBounds&&(this._pxBounds=new I([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)]))},_projectLatlngs:function(e,t,n){var r,i,o=e[0]instanceof $,s=e.length;if(o){for(i=[],r=0;r<s;r++)i[r]=this._map.latLngToLayerPoint(e[r]),n.extend(i[r]);t.push(i)}else for(r=0;r<s;r++)this._projectLatlngs(e[r],t,n)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else{var t,n,r,i,o,s,a,l=this._parts;for(t=0,r=0,i=this._rings.length;t<i;t++)for(n=0,o=(a=this._rings[t]).length;n<o-1;n++)(s=Ln(a[n],a[n+1],e,n,!0))&&(l[r]=l[r]||[],l[r].push(s[0]),s[1]===a[n+1]&&n!==o-2||(l[r].push(s[1]),r++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,n=0,r=e.length;n<r;n++)e[n]=En(e[n],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var n,r,i,o,s,a,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(n=0,o=this._parts.length;n<o;n++)for(r=0,i=(s=(a=this._parts[n]).length)-1;r<s;i=r++)if((t||0!==r)&&Nn(e,a[i],a[r])<=l)return!0;return!1}});function cr(e,t){return new lr(e,t)}lr._flat=zn;var ur=lr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return xn(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var t=lr.prototype._convertLatLngs.call(this,e),n=t.length;return n>=2&&t[0]instanceof $&&t[0].equals(t[n-1])&&t.pop(),t},_setLatLngs:function(e){lr.prototype._setLatLngs.call(this,e),In(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return In(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,n=new A(t,t);if(e=new I(e.min.subtract(n),e.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else for(var r,i=0,o=this._rings.length;i<o;i++)(r=bn(this._rings[i],e,!0)).length&&this._parts.push(r)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var t,n,r,i,o,s,a,l,c=!1;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(i=0,a=this._parts.length;i<a;i++)for(o=0,s=(l=(t=this._parts[i]).length)-1;o<l;s=o++)n=t[o],r=t[s],n.y>e.y!==r.y>e.y&&e.x<(r.x-n.x)*(e.y-n.y)/(r.y-n.y)+n.x&&(c=!c);return c||lr.prototype._containsPoint.call(this,e,!0)}});function dr(e,t){return new ur(e,t)}var hr=Yn.extend({initialize:function(e,t){f(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t,n,r,i=v(e)?e:e.features;if(i){for(t=0,n=i.length;t<n;t++)((r=i[t]).geometries||r.geometry||r.features||r.coordinates)&&this.addData(r);return this}var o=this.options;if(o.filter&&!o.filter(e))return this;var s=fr(e,o);return s?(s.feature=br(e),s.defaultOptions=s.options,this.resetStyle(s),o.onEachFeature&&o.onEachFeature(e,s),this.addLayer(s)):this},resetStyle:function(e){return void 0===e?this.eachLayer(this.resetStyle,this):(e.options=n({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){e.setStyle&&("function"===typeof t&&(t=t(e.feature)),e.setStyle(t))}});function fr(e,t){var n,r,i,o,s="Feature"===e.type?e.geometry:e,a=s?s.coordinates:null,l=[],c=t&&t.pointToLayer,u=t&&t.coordsToLatLng||mr;if(!a&&!s)return null;switch(s.type){case"Point":return pr(c,e,n=u(a),t);case"MultiPoint":for(i=0,o=a.length;i<o;i++)n=u(a[i]),l.push(pr(c,e,n,t));return new Yn(l);case"LineString":case"MultiLineString":return r=gr(a,"LineString"===s.type?0:1,u),new lr(r,t);case"Polygon":case"MultiPolygon":return r=gr(a,"Polygon"===s.type?1:2,u),new ur(r,t);case"GeometryCollection":for(i=0,o=s.geometries.length;i<o;i++){var d=fr({geometry:s.geometries[i],type:"Feature",properties:e.properties},t);d&&l.push(d)}return new Yn(l);case"FeatureCollection":for(i=0,o=s.features.length;i<o;i++){var h=fr(s.features[i],t);h&&l.push(h)}return new Yn(l);default:throw new Error("Invalid GeoJSON object.")}}function pr(e,t,n,r){return e?e(t,n):new tr(n,r&&r.markersInheritOptions&&r)}function mr(e){return new $(e[1],e[0],e[2])}function gr(e,t,n){for(var r,i=[],o=0,s=e.length;o<s;o++)r=t?gr(e[o],t-1,n):(n||mr)(e[o]),i.push(r);return i}function vr(e,t){return void 0!==(e=U(e)).alt?[u(e.lng,t),u(e.lat,t),u(e.alt,t)]:[u(e.lng,t),u(e.lat,t)]}function yr(e,t,n,r){for(var i=[],o=0,s=e.length;o<s;o++)i.push(t?yr(e[o],In(e[o])?0:t-1,n,r):vr(e[o],r));return!t&&n&&i.length>0&&i.push(i[0].slice()),i}function _r(e,t){return e.feature?n({},e.feature,{geometry:t}):br(t)}function br(e){return"Feature"===e.type||"FeatureCollection"===e.type?e:{type:"Feature",properties:{},geometry:e}}var xr={toGeoJSON:function(e){return _r(this,{type:"Point",coordinates:vr(this.getLatLng(),e)})}};function wr(e,t){return new hr(e,t)}tr.include(xr),sr.include(xr),ir.include(xr),lr.include({toGeoJSON:function(e){var t=!In(this._latlngs);return _r(this,{type:(t?"Multi":"")+"LineString",coordinates:yr(this._latlngs,t?1:0,!1,e)})}}),ur.include({toGeoJSON:function(e){var t=!In(this._latlngs),n=t&&!In(this._latlngs[0]),r=yr(this._latlngs,n?2:t?1:0,!0,e);return t||(r=[r]),_r(this,{type:(n?"Multi":"")+"Polygon",coordinates:r})}}),qn.include({toMultiPoint:function(e){var t=[];return this.eachLayer(function(n){t.push(n.toGeoJSON(e).geometry.coordinates)}),_r(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint(e);var n="GeometryCollection"===t,r=[];return this.eachLayer(function(t){if(t.toGeoJSON){var i=t.toGeoJSON(e);if(n)r.push(i.geometry);else{var o=br(i);"FeatureCollection"===o.type?r.push.apply(r,o.features):r.push(o)}}}),n?_r(this,{geometries:r,type:"GeometryCollection"}):{type:"FeatureCollection",features:r}}});var Sr=wr,kr=Vn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,t,n){this._url=e,this._bounds=B(t),f(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(_t(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){pt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&gt(this._image),this},bringToBack:function(){return this._map&&vt(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=B(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e="IMG"===this._url.tagName,t=this._image=e?this._url:ft("img");_t(t,"leaflet-image-layer"),this._zoomAnimated&&_t(t,"leaflet-zoom-animated"),this.options.className&&_t(t,this.options.className),t.onselectstart=c,t.onmousemove=c,t.onload=i(this.fire,this,"load"),t.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(t.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e?this._url=t.src:(t.src=this._url,t.alt=this.options.alt)},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;Nt(this._image,n,t)},_reset:function(){var e=this._image,t=new I(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=t.getSize();jt(e,t.min),e.style.width=n.x+"px",e.style.height=n.y+"px"},_updateOpacity:function(){St(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}}),Er=function(e,t,n){return new kr(e,t,n)},Nr=kr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e="VIDEO"===this._url.tagName,t=this._image=e?this._url:ft("video");if(_t(t,"leaflet-image-layer"),this._zoomAnimated&&_t(t,"leaflet-zoom-animated"),this.options.className&&_t(t,this.options.className),t.onselectstart=c,t.onmousemove=c,t.onloadeddata=i(this.fire,this,"load"),e){for(var n=t.getElementsByTagName("source"),r=[],o=0;o<n.length;o++)r.push(n[o].src);this._url=n.length>0?r:[t.src]}else{v(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(t.style,"objectFit")&&(t.style.objectFit="fill"),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop,t.muted=!!this.options.muted,t.playsInline=!!this.options.playsInline;for(var s=0;s<this._url.length;s++){var a=ft("source");a.src=this._url[s],t.appendChild(a)}}}});function jr(e,t,n){return new Nr(e,t,n)}var Cr=kr.extend({_initImage:function(){var e=this._image=this._url;_t(e,"leaflet-image-layer"),this._zoomAnimated&&_t(e,"leaflet-zoom-animated"),this.options.className&&_t(e,this.options.className),e.onselectstart=c,e.onmousemove=c}});function Tr(e,t,n){return new Cr(e,t,n)}var Pr=Vn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(e,t){e&&(e instanceof $||v(e))?(this._latlng=U(e),f(this,t)):(f(this,e),this._source=t),this.options.content&&(this._content=this.options.content)},openOn:function(e){return(e=arguments.length?e:this._source._map).hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&St(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&St(this._container,1),this.bringToFront(),this.options.interactive&&(_t(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(St(this._container,0),this._removeTimeout=setTimeout(i(pt,void 0,this._container),200)):pt(this._container),this.options.interactive&&(bt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=U(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&gt(this._container),this},bringToBack:function(){return this._map&&vt(this._container),this},_prepareOpen:function(e){var t=this._source;if(!t._map)return!1;if(t instanceof Yn){t=null;var n=this._source._layers;for(var r in n)if(n[r]._map){t=n[r];break}if(!t)return!1;this._source=t}if(!e)if(t.getCenter)e=t.getCenter();else if(t.getLatLng)e=t.getLatLng();else{if(!t.getBounds)throw new Error("Unable to get source layer LatLng.");e=t.getBounds().getCenter()}return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var e=this._contentNode,t="function"===typeof this._content?this._content(this._source||this):this._content;if("string"===typeof t)e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=R(this.options.offset),n=this._getAnchor();this._zoomAnimated?jt(this._container,e.add(n)):t=t.add(e).add(n);var r=this._containerBottom=-t.y,i=this._containerLeft=-Math.round(this._containerWidth/2)+t.x;this._container.style.bottom=r+"px",this._container.style.left=i+"px"}},_getAnchor:function(){return[0,0]}});nn.include({_initOverlay:function(e,t,n,r){var i=t;return i instanceof e||(i=new e(r).setContent(t)),n&&i.setLatLng(n),i}}),Vn.include({_initOverlay:function(e,t,n,r){var i=n;return i instanceof e?(f(i,r),i._source=this):(i=t&&!r?t:new e(r,this)).setContent(n),i}});var Lr=Pr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return!(e=arguments.length?e:this._source._map).hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,Pr.prototype.openOn.call(this,e)},onAdd:function(e){Pr.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof rr||this._source.on("preclick",Zt))},onRemove:function(e){Pr.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof rr||this._source.off("preclick",Zt))},getEvents:function(){var e=Pr.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e="leaflet-popup",t=this._container=ft("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=ft("div",e+"-content-wrapper",t);if(this._contentNode=ft("div",e+"-content",n),Vt(t),Wt(this._contentNode),zt(t,"contextmenu",Zt),this._tipContainer=ft("div",e+"-tip-container",t),this._tip=ft("div",e+"-tip",this._tipContainer),this.options.closeButton){var r=this._closeButton=ft("a",e+"-close-button",t);r.setAttribute("role","button"),r.setAttribute("aria-label","Close popup"),r.href="#close",r.innerHTML='<span aria-hidden="true">&#215;</span>',zt(r,"click",function(e){qt(e),this.close()},this)}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var n=e.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),t.width=n+1+"px",t.whiteSpace="",t.height="";var r=e.offsetHeight,i=this.options.maxHeight,o="leaflet-popup-scrolled";i&&r>i?(t.height=i+"px",_t(e,o)):bt(e,o),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),n=this._getAnchor();jt(this._container,t.add(n))},_adjustPan:function(){if(this.options.autoPan)if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)this._autopanning=!1;else{var e=this._map,t=parseInt(ht(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+t,r=this._containerWidth,i=new A(this._containerLeft,-n-this._containerBottom);i._add(Ct(this._container));var o=e.layerPointToContainerPoint(i),s=R(this.options.autoPanPadding),a=R(this.options.autoPanPaddingTopLeft||s),l=R(this.options.autoPanPaddingBottomRight||s),c=e.getSize(),u=0,d=0;o.x+r+l.x>c.x&&(u=o.x+r-c.x+l.x),o.x-u-a.x<0&&(u=o.x-a.x),o.y+n+l.y>c.y&&(d=o.y+n-c.y+l.y),o.y-d-a.y<0&&(d=o.y-a.y),(u||d)&&(this.options.keepInView&&(this._autopanning=!0),e.fire("autopanstart").panBy([u,d]))}},_getAnchor:function(){return R(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Or=function(e,t){return new Lr(e,t)};nn.mergeOptions({closePopupOnClick:!0}),nn.include({openPopup:function(e,t,n){return this._initOverlay(Lr,e,t,n).openOn(this),this},closePopup:function(e){return(e=arguments.length?e:this._popup)&&e.close(),this}}),Vn.include({bindPopup:function(e,t){return this._popup=this._initOverlay(Lr,this._popup,e,t),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e){return this._popup&&(this instanceof Yn||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(this._popup&&this._map){Kt(e);var t=e.layer||e.target;this._popup._source!==t||t instanceof rr?(this._popup._source=t,this.openPopup(e.latlng)):this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){13===e.originalEvent.keyCode&&this._openPopup(e)}});var Ar=Pr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){Pr.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(e){Pr.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var e=Pr.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){var e="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ft("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+s(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t,n,r=this._map,i=this._container,o=r.latLngToContainerPoint(r.getCenter()),s=r.layerPointToContainerPoint(e),a=this.options.direction,l=i.offsetWidth,c=i.offsetHeight,u=R(this.options.offset),d=this._getAnchor();"top"===a?(t=l/2,n=c):"bottom"===a?(t=l/2,n=0):"center"===a?(t=l/2,n=c/2):"right"===a?(t=0,n=c/2):"left"===a?(t=l,n=c/2):s.x<o.x?(a="right",t=0,n=c/2):(a="left",t=l+2*(u.x+d.x),n=c/2),e=e.subtract(R(t,n,!0)).add(u).add(d),bt(i,"leaflet-tooltip-right"),bt(i,"leaflet-tooltip-left"),bt(i,"leaflet-tooltip-top"),bt(i,"leaflet-tooltip-bottom"),_t(i,"leaflet-tooltip-"+a),jt(i,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&St(this._container,e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(t)},_getAnchor:function(){return R(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Mr=function(e,t){return new Ar(e,t)};nn.include({openTooltip:function(e,t,n){return this._initOverlay(Ar,e,t,n).openOn(this),this},closeTooltip:function(e){return e.close(),this}}),Vn.include({bindTooltip:function(e,t){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ar,this._tooltip,e,t),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(e||!this._tooltipHandlersAdded){var t=e?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip,this._map?this._addFocusListeners():n.add=this._addFocusListeners),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[t](n),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&(this instanceof Yn||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){var t="function"===typeof e.getElement&&e.getElement();t&&(zt(t,"focus",function(){this._tooltip._source=e,this.openTooltip()},this),zt(t,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(e){var t="function"===typeof e.getElement&&e.getElement();t&&t.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(e){if(this._tooltip&&this._map)if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var t=this;this._map.once("moveend",function(){t._openOnceFlag=!1,t._openTooltip(e)})}else this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)},_moveTooltip:function(e){var t,n,r=e.latlng;this._tooltip.options.sticky&&e.originalEvent&&(t=this._map.mouseEventToContainerPoint(e.originalEvent),n=this._map.containerPointToLayerPoint(t),r=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(r)}});var Rr=Xn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var t=e&&"DIV"===e.tagName?e:document.createElement("div"),n=this.options;if(n.html instanceof Element?(mt(t),t.appendChild(n.html)):t.innerHTML=!1!==n.html?n.html:"",n.bgPos){var r=R(n.bgPos);t.style.backgroundPosition=-r.x+"px "+-r.y+"px"}return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}});function Ir(e){return new Rr(e)}Xn.Default=Qn;var zr=Vn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ie.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){f(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),pt(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(gt(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(vt(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=a(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof A?e:new A(e,e)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t,n=this.getPane().children,r=-e(-1/0,1/0),i=0,o=n.length;i<o;i++)t=n[i].style.zIndex,n[i]!==this._container&&t&&(r=e(r,+t));isFinite(r)&&(this.options.zIndex=r+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ie.ielt9){St(this._container,this.options.opacity);var e=+new Date,t=!1,n=!1;for(var r in this._tiles){var i=this._tiles[r];if(i.current&&i.loaded){var o=Math.min(1,(e-i.loaded)/200);St(i.el,o),o<1?t=!0:(i.active?n=!0:this._onOpaqueTile(i),i.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),t&&(N(this._fadeFrame),this._fadeFrame=E(this._updateOpacity,this))}},_onOpaqueTile:c,_initContainer:function(){this._container||(this._container=ft("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(void 0!==e){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===e?(this._levels[n].el.style.zIndex=t-Math.abs(e-n),this._onUpdateLevel(n)):(pt(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var r=this._levels[e],i=this._map;return r||((r=this._levels[e]={}).el=ft("div","leaflet-tile-container leaflet-zoom-animated",this._container),r.el.style.zIndex=t,r.origin=i.project(i.unproject(i.getPixelOrigin()),e).round(),r.zoom=e,this._setZoomTransform(r,i.getCenter(),i.getZoom()),c(r.el.offsetWidth),this._onCreateLevel(r)),this._level=r,r}},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(this._map){var e,t,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(e in this._tiles)(t=this._tiles[e]).retain=t.current;for(e in this._tiles)if((t=this._tiles[e]).current&&!t.active){var r=t.coords;this._retainParent(r.x,r.y,r.z,r.z-5)||this._retainChildren(r.x,r.y,r.z,r.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)pt(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,t,n,r){var i=Math.floor(e/2),o=Math.floor(t/2),s=n-1,a=new A(+i,+o);a.z=+s;var l=this._tileCoordsToKey(a),c=this._tiles[l];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),s>r&&this._retainParent(i,o,s,r))},_retainChildren:function(e,t,n,r){for(var i=2*e;i<2*e+2;i++)for(var o=2*t;o<2*t+2;o++){var s=new A(i,o);s.z=n+1;var a=this._tileCoordsToKey(s),l=this._tiles[a];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<r&&this._retainChildren(i,o,n+1,r))}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var t=this.options;return void 0!==t.minNativeZoom&&e<t.minNativeZoom?t.minNativeZoom:void 0!==t.maxNativeZoom&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(e,t,n,r){var i=Math.round(t);i=void 0!==this.options.maxZoom&&i>this.options.maxZoom||void 0!==this.options.minZoom&&i<this.options.minZoom?void 0:this._clampZoom(i);var o=this.options.updateWhenZooming&&i!==this._tileZoom;r&&!o||(this._tileZoom=i,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==i&&this._update(e),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var n in this._levels)this._setZoomTransform(this._levels[n],e,t)},_setZoomTransform:function(e,t,n){var r=this._map.getZoomScale(n,e.zoom),i=e.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(t,n)).round();Ie.any3d?Nt(e.el,i,r):jt(e.el,i)},_resetGrid:function(){var e=this._map,t=e.options.crs,n=this._tileSize=this.getTileSize(),r=this._tileZoom,i=this._map.getPixelWorldBounds(this._tileZoom);i&&(this._globalTileRange=this._pxBoundsToTileRange(i)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],r).x/n.x),Math.ceil(e.project([0,t.wrapLng[1]],r).x/n.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],r).y/n.x),Math.ceil(e.project([t.wrapLat[1],0],r).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(e){var t=this._map,n=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),r=t.getZoomScale(n,this._tileZoom),i=t.project(e,this._tileZoom).floor(),o=t.getSize().divideBy(2*r);return new I(i.subtract(o),i.add(o))},_update:function(e){var t=this._map;if(t){var n=this._clampZoom(t.getZoom());if(void 0===e&&(e=t.getCenter()),void 0!==this._tileZoom){var r=this._getTiledPixelBounds(e),i=this._pxBoundsToTileRange(r),o=i.getCenter(),s=[],a=this.options.keepBuffer,l=new I(i.getBottomLeft().subtract([a,-a]),i.getTopRight().add([a,-a]));if(!(isFinite(i.min.x)&&isFinite(i.min.y)&&isFinite(i.max.x)&&isFinite(i.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var c in this._tiles){var u=this._tiles[c].coords;u.z===this._tileZoom&&l.contains(new A(u.x,u.y))||(this._tiles[c].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(e,n);else{for(var d=i.min.y;d<=i.max.y;d++)for(var h=i.min.x;h<=i.max.x;h++){var f=new A(h,d);if(f.z=this._tileZoom,this._isValidTile(f)){var p=this._tiles[this._tileCoordsToKey(f)];p?p.current=!0:s.push(f)}}if(s.sort(function(e,t){return e.distanceTo(o)-t.distanceTo(o)}),0!==s.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(h=0;h<s.length;h++)this._addTile(s[h],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var n=this._globalTileRange;if(!t.wrapLng&&(e.x<n.min.x||e.x>n.max.x)||!t.wrapLat&&(e.y<n.min.y||e.y>n.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(e);return B(this.options.bounds).overlaps(r)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var t=this._map,n=this.getTileSize(),r=e.scaleBy(n),i=r.add(n);return[t.unproject(r,e.z),t.unproject(i,e.z)]},_tileCoordsToBounds:function(e){var t=this._tileCoordsToNwSe(e),n=new D(t[0],t[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),n=new A(+t[0],+t[1]);return n.z=+t[2],n},_removeTile:function(e){var t=this._tiles[e];t&&(pt(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){_t(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=c,e.onmousemove=c,Ie.ielt9&&this.options.opacity<1&&St(e,this.options.opacity)},_addTile:function(e,t){var n=this._getTilePos(e),r=this._tileCoordsToKey(e),o=this.createTile(this._wrapCoords(e),i(this._tileReady,this,e));this._initTile(o),this.createTile.length<2&&E(i(this._tileReady,this,e,null,o)),jt(o,n),this._tiles[r]={el:o,coords:e,current:!0},t.appendChild(o),this.fire("tileloadstart",{tile:o,coords:e})},_tileReady:function(e,t,n){t&&this.fire("tileerror",{error:t,tile:n,coords:e});var r=this._tileCoordsToKey(e);(n=this._tiles[r])&&(n.loaded=+new Date,this._map._fadeAnimated?(St(n.el,0),N(this._fadeFrame),this._fadeFrame=E(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),t||(_t(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ie.ielt9||!this._map._fadeAnimated?E(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new A(this._wrapX?l(e.x,this._wrapX):e.x,this._wrapY?l(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new I(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});function Dr(e){return new zr(e)}var Br=zr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,t){this._url=e,(t=f(this,t)).detectRetina&&Ie.retina&&t.maxZoom>0?(t.tileSize=Math.floor(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom=Math.min(t.maxZoom,t.minZoom+1)):(t.zoomOffset++,t.maxZoom=Math.max(t.minZoom,t.maxZoom-1)),t.minZoom=Math.max(0,t.minZoom)):t.zoomReverse?t.minZoom=Math.min(t.maxZoom,t.minZoom):t.maxZoom=Math.max(t.minZoom,t.maxZoom),"string"===typeof t.subdomains&&(t.subdomains=t.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url===e&&void 0===t&&(t=!0),this._url=e,t||this.redraw(),this},createTile:function(e,t){var n=document.createElement("img");return zt(n,"load",i(this._tileOnLoad,this,t,n)),zt(n,"error",i(this._tileOnError,this,t,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"===typeof this.options.referrerPolicy&&(n.referrerPolicy=this.options.referrerPolicy),n.alt="",n.src=this.getTileUrl(e),n},getTileUrl:function(e){var t={r:Ie.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var r=this._globalTileRange.max.y-e.y;this.options.tms&&(t.y=r),t["-y"]=r}return g(this._url,n(t,this.options))},_tileOnLoad:function(e,t){Ie.ielt9?setTimeout(i(e,this,null,t),0):e(null,t)},_tileOnError:function(e,t,n){var r=this.options.errorTileUrl;r&&t.getAttribute("src")!==r&&(t.src=r),e(n,t)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom;return this.options.zoomReverse&&(e=t-e),e+this.options.zoomOffset},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&((t=this._tiles[e].el).onload=c,t.onerror=c,!t.complete)){t.src=_;var n=this._tiles[e].coords;pt(t),delete this._tiles[e],this.fire("tileabort",{tile:t,coords:n})}},_removeTile:function(e){var t=this._tiles[e];if(t)return t.el.setAttribute("src",_),zr.prototype._removeTile.call(this,e)},_tileReady:function(e,t,n){if(this._map&&(!n||n.getAttribute("src")!==_))return zr.prototype._tileReady.call(this,e,t,n)}});function $r(e,t){return new Br(e,t)}var Ur=Br.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,t){this._url=e;var r=n({},this.defaultWmsParams);for(var i in t)i in this.options||(r[i]=t[i]);var o=(t=f(this,t)).detectRetina&&Ie.retina?2:1,s=this.getTileSize();r.width=s.x*o,r.height=s.y*o,this.wmsParams=r},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,Br.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToNwSe(e),n=this._crs,r=z(n.project(t[0]),n.project(t[1])),i=r.min,o=r.max,s=(this._wmsVersion>=1.3&&this._crs===Zn?[i.y,i.x,o.y,o.x]:[i.x,i.y,o.x,o.y]).join(","),a=Br.prototype.getTileUrl.call(this,e);return a+p(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+s},setParams:function(e,t){return n(this.wmsParams,e),t||this.redraw(),this}});function Fr(e,t){return new Ur(e,t)}Br.WMS=Ur,$r.wms=Fr;var Hr=Vn.extend({options:{padding:.1},initialize:function(e){f(this,e),s(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),_t(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var n=this._map.getZoomScale(t,this._zoom),r=this._map.getSize().multiplyBy(.5+this.options.padding),i=this._map.project(this._center,t),o=r.multiplyBy(-n).add(i).subtract(this._map._getNewPixelOrigin(e,t));Ie.any3d?Nt(this._container,o,n):jt(this._container,o)},_reset:function(){for(var e in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),n=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new I(n,n.add(t.multiplyBy(1+2*e)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Zr=Hr.extend({options:{tolerance:0},getEvents:function(){var e=Hr.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Hr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");zt(e,"mousemove",this._onMouseMove,this),zt(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),zt(e,"mouseout",this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext("2d")},_destroyContainer:function(){N(this._redrawRequest),delete this._ctx,pt(this._container),Bt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var e in this._redrawBounds=null,this._layers)this._layers[e]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){Hr.prototype._update.call(this);var e=this._bounds,t=this._container,n=e.getSize(),r=Ie.retina?2:1;jt(t,e.min),t.width=r*n.x,t.height=r*n.y,t.style.width=n.x+"px",t.style.height=n.y+"px",Ie.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){Hr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[s(e)]=e;var t=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,n=t.next,r=t.prev;n?n.prev=r:this._drawLast=r,r?r.next=n:this._drawFirst=n,delete e._order,delete this._layers[s(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if("string"===typeof e.options.dashArray){var t,n,r=e.options.dashArray.split(/[, ]+/),i=[];for(n=0;n<r.length;n++){if(t=Number(r[n]),isNaN(t))return;i.push(t)}e.options._dashArray=i}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||E(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new I,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,t=this._redrawBounds;if(this._ctx.save(),t){var n=t.getSize();this._ctx.beginPath(),this._ctx.rect(t.min.x,t.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var r=this._drawFirst;r;r=r.next)e=r.layer,(!t||e._pxBounds&&e._pxBounds.intersects(t))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(this._drawing){var n,r,i,o,s=e._parts,a=s.length,l=this._ctx;if(a){for(l.beginPath(),n=0;n<a;n++){for(r=0,i=s[n].length;r<i;r++)o=s[n][r],l[r?"lineTo":"moveTo"](o.x,o.y);t&&l.closePath()}this._fillStroke(l,e)}}},_updateCircle:function(e){if(this._drawing&&!e._empty()){var t=e._point,n=this._ctx,r=Math.max(Math.round(e._radius),1),i=(Math.max(Math.round(e._radiusY),1)||r)/r;1!==i&&(n.save(),n.scale(1,i)),n.beginPath(),n.arc(t.x,t.y/i,r,0,2*Math.PI,!1),1!==i&&n.restore(),this._fillStroke(n,e)}},_fillStroke:function(e,t){var n=t.options;n.fill&&(e.globalAlpha=n.fillOpacity,e.fillStyle=n.fillColor||n.color,e.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=n.opacity,e.lineWidth=n.weight,e.strokeStyle=n.color,e.lineCap=n.lineCap,e.lineJoin=n.lineJoin,e.stroke())},_onClick:function(e){for(var t,n,r=this._map.mouseEventToLayerPoint(e),i=this._drawFirst;i;i=i.next)(t=i.layer).options.interactive&&t._containsPoint(r)&&("click"!==e.type&&"preclick"!==e.type||!this._map._draggableMoved(t))&&(n=t);this._fireEvent(!!n&&[n],e)},_onMouseMove:function(e){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var t=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,t)}},_handleMouseOut:function(e){var t=this._hoveredLayer;t&&(bt(this._container,"leaflet-interactive"),this._fireEvent([t],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,t){if(!this._mouseHoverThrottled){for(var n,r,o=this._drawFirst;o;o=o.next)(n=o.layer).options.interactive&&n._containsPoint(t)&&(r=n);r!==this._hoveredLayer&&(this._handleMouseOut(e),r&&(_t(this._container,"leaflet-interactive"),this._fireEvent([r],e,"mouseover"),this._hoveredLayer=r)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],e),this._mouseHoverThrottled=!0,setTimeout(i(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(e,t,n){this._map._fireDOMEvent(t,n||t.type,e)},_bringToFront:function(e){var t=e._order;if(t){var n=t.next,r=t.prev;n&&(n.prev=r,r?r.next=n:n&&(this._drawFirst=n),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(e))}},_bringToBack:function(e){var t=e._order;if(t){var n=t.next,r=t.prev;r&&(r.next=n,n?n.prev=r:r&&(this._drawLast=r),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e))}}});function Wr(e){return Ie.canvas?new Zr(e):null}var Vr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch(e){}return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),qr={_initContainer:function(){this._container=ft("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Hr.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var t=e._container=Vr("shape");_t(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=Vr("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[s(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;pt(t),e.removeInteractiveTarget(t),delete this._layers[s(e)]},_updateStyle:function(e){var t=e._stroke,n=e._fill,r=e.options,i=e._container;i.stroked=!!r.stroke,i.filled=!!r.fill,r.stroke?(t||(t=e._stroke=Vr("stroke")),i.appendChild(t),t.weight=r.weight+"px",t.color=r.color,t.opacity=r.opacity,r.dashArray?t.dashStyle=v(r.dashArray)?r.dashArray.join(" "):r.dashArray.replace(/( *, *)/g," "):t.dashStyle="",t.endcap=r.lineCap.replace("butt","flat"),t.joinstyle=r.lineJoin):t&&(i.removeChild(t),e._stroke=null),r.fill?(n||(n=e._fill=Vr("fill")),i.appendChild(n),n.color=r.fillColor||r.color,n.opacity=r.fillOpacity):n&&(i.removeChild(n),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),n=Math.round(e._radius),r=Math.round(e._radiusY||n);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+n+","+r+" 0,23592600")},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){gt(e._container)},_bringToBack:function(e){vt(e._container)}},Kr=Ie.vml?Vr:G,Yr=Hr.extend({_initContainer:function(){this._container=Kr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Kr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){pt(this._container),Bt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){Hr.prototype._update.call(this);var e=this._bounds,t=e.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(t)||(this._svgSize=t,n.setAttribute("width",t.x),n.setAttribute("height",t.y)),jt(n,e.min),n.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" ")),this.fire("update")}},_initPath:function(e){var t=e._path=Kr("path");e.options.className&&_t(t,e.options.className),e.options.interactive&&_t(t,"leaflet-interactive"),this._updateStyle(e),this._layers[s(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){pt(e._path),e.removeInteractiveTarget(e._path),delete this._layers[s(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,n=e.options;t&&(n.stroke?(t.setAttribute("stroke",n.color),t.setAttribute("stroke-opacity",n.opacity),t.setAttribute("stroke-width",n.weight),t.setAttribute("stroke-linecap",n.lineCap),t.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?t.setAttribute("stroke-dasharray",n.dashArray):t.removeAttribute("stroke-dasharray"),n.dashOffset?t.setAttribute("stroke-dashoffset",n.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),n.fill?(t.setAttribute("fill",n.fillColor||n.color),t.setAttribute("fill-opacity",n.fillOpacity),t.setAttribute("fill-rule",n.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(e,t){this._setPath(e,X(e._parts,t))},_updateCircle:function(e){var t=e._point,n=Math.max(Math.round(e._radius),1),r="a"+n+","+(Math.max(Math.round(e._radiusY),1)||n)+" 0 1,0 ",i=e._empty()?"M0 0":"M"+(t.x-n)+","+t.y+r+2*n+",0 "+r+2*-n+",0 ";this._setPath(e,i)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){gt(e._path)},_bringToBack:function(e){vt(e._path)}});function Gr(e){return Ie.svg||Ie.vml?new Yr(e):null}Ie.vml&&Yr.include(qr),nn.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this._createRenderer()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if("overlayPane"===e||void 0===e)return!1;var t=this._paneRenderers[e];return void 0===t&&(t=this._createRenderer({pane:e}),this._paneRenderers[e]=t),t},_createRenderer:function(e){return this.options.preferCanvas&&Wr(e)||Gr(e)}});var Xr=ur.extend({initialize:function(e,t){ur.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return[(e=B(e)).getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});function Jr(e,t){return new Xr(e,t)}Yr.create=Kr,Yr.pointsToPath=X,hr.geometryToLayer=fr,hr.coordsToLatLng=mr,hr.coordsToLatLngs=gr,hr.latLngToCoords=vr,hr.latLngsToCoords=yr,hr.getFeature=_r,hr.asFeature=br,nn.mergeOptions({boxZoom:!0});var Qr=gn.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){zt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Bt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){pt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||1!==e.which&&1!==e.button)return!1;this._clearDeferredResetState(),this._resetState(),rt(),Pt(),this._startPoint=this._map.mouseEventToContainerPoint(e),zt(document,{contextmenu:Kt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=ft("div","leaflet-zoom-box",this._container),_t(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var t=new I(this._point,this._startPoint),n=t.getSize();jt(this._box,t.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(pt(this._box),bt(this._container,"leaflet-crosshair")),it(),Lt(),Bt(document,{contextmenu:Kt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if((1===e.which||1===e.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var t=new D(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})}},_onKeyDown:function(e){27===e.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});nn.addInitHook("addHandler","boxZoom",Qr),nn.mergeOptions({doubleClickZoom:!0});var ei=gn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,n=t.getZoom(),r=t.options.zoomDelta,i=e.originalEvent.shiftKey?n-r:n+r;"center"===t.options.doubleClickZoom?t.setZoom(i):t.setZoomAround(e.containerPoint,i)}});nn.addInitHook("addHandler","doubleClickZoom",ei),nn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ti=gn.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new _n(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}_t(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){bt(this._map._container,"leaflet-grab"),bt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=B(this._map.options.maxBounds);this._offsetLimit=z(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var t=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(t),this._prunePositions(t)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=Math.round(e/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,i=(r-t+n)%e+t-n,o=(r+t+n)%e-t-n,s=Math.abs(i+n)<Math.abs(o+n)?i:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=s},_onDragEnd:function(e){var t=this._map,n=t.options,r=!n.inertia||e.noInertia||this._times.length<2;if(t.fire("dragend",e),r)t.fire("moveend");else{this._prunePositions(+new Date);var i=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,s=n.easeLinearity,a=i.multiplyBy(s/o),l=a.distanceTo([0,0]),c=Math.min(n.inertiaMaxSpeed,l),u=a.multiplyBy(c/l),d=c/(n.inertiaDeceleration*s),h=u.multiplyBy(-d/2).round();h.x||h.y?(h=t._limitOffset(h,t.options.maxBounds),E(function(){t.panBy(h,{duration:d,easeLinearity:s,noMoveStart:!0,animate:!0})})):t.fire("moveend")}}});nn.addInitHook("addHandler","dragging",ti),nn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ni=gn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),zt(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Bt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,t=document.documentElement,n=e.scrollTop||t.scrollTop,r=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(r,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var t,n,r=this._panKeys={},i=this.keyCodes;for(t=0,n=i.left.length;t<n;t++)r[i.left[t]]=[-1*e,0];for(t=0,n=i.right.length;t<n;t++)r[i.right[t]]=[e,0];for(t=0,n=i.down.length;t<n;t++)r[i.down[t]]=[0,e];for(t=0,n=i.up.length;t<n;t++)r[i.up[t]]=[0,-1*e]},_setZoomDelta:function(e){var t,n,r=this._zoomKeys={},i=this.keyCodes;for(t=0,n=i.zoomIn.length;t<n;t++)r[i.zoomIn[t]]=e;for(t=0,n=i.zoomOut.length;t<n;t++)r[i.zoomOut[t]]=-e},_addHooks:function(){zt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Bt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t,n=e.keyCode,r=this._map;if(n in this._panKeys){if(!r._panAnim||!r._panAnim._inProgress)if(t=this._panKeys[n],e.shiftKey&&(t=R(t).multiplyBy(3)),r.options.maxBounds&&(t=r._limitOffset(R(t),r.options.maxBounds)),r.options.worldCopyJump){var i=r.wrapLatLng(r.unproject(r.project(r.getCenter()).add(t)));r.panTo(i)}else r.panBy(t)}else if(n in this._zoomKeys)r.setZoom(r.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!r._popup||!r._popup.options.closeOnEscapeKey)return;r.closePopup()}Kt(e)}}});nn.addInitHook("addHandler","keyboard",ni),nn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ri=gn.extend({addHooks:function(){zt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Bt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var t=Jt(e),n=this._map.options.wheelDebounceTime;this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var r=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),r),Kt(e)},_performZoom:function(){var e=this._map,t=e.getZoom(),n=this._map.options.zoomSnap||0;e._stop();var r=this._delta/(4*this._map.options.wheelPxPerZoomLevel),i=4*Math.log(2/(1+Math.exp(-Math.abs(r))))/Math.LN2,o=n?Math.ceil(i/n)*n:i,s=e._limitZoom(t+(this._delta>0?o:-o))-t;this._delta=0,this._startTime=null,s&&("center"===e.options.scrollWheelZoom?e.setZoom(t+s):e.setZoomAround(this._lastMousePos,t+s))}});nn.addInitHook("addHandler","scrollWheelZoom",ri);var ii=600;nn.mergeOptions({tapHold:Ie.touchNative&&Ie.safari&&Ie.mobile,tapTolerance:15});var oi=gn.extend({addHooks:function(){zt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Bt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),1===e.touches.length){var t=e.touches[0];this._startPos=this._newPos=new A(t.clientX,t.clientY),this._holdTimeout=setTimeout(i(function(){this._cancel(),this._isTapValid()&&(zt(document,"touchend",qt),zt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",t))},this),ii),zt(document,"touchend touchcancel contextmenu",this._cancel,this),zt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function e(){Bt(document,"touchend",qt),Bt(document,"touchend touchcancel",e)},_cancel:function(){clearTimeout(this._holdTimeout),Bt(document,"touchend touchcancel contextmenu",this._cancel,this),Bt(document,"touchmove",this._onMove,this)},_onMove:function(e){var t=e.touches[0];this._newPos=new A(t.clientX,t.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,t){var n=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY});n._simulated=!0,t.target.dispatchEvent(n)}});nn.addInitHook("addHandler","tapHold",oi),nn.mergeOptions({touchZoom:Ie.touch,bounceAtZoomLimits:!0});var si=gn.extend({addHooks:function(){_t(this._map._container,"leaflet-touch-zoom"),zt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){bt(this._map._container,"leaflet-touch-zoom"),Bt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(e.touches&&2===e.touches.length&&!t._animatingZoom&&!this._zooming){var n=t.mouseEventToContainerPoint(e.touches[0]),r=t.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),"center"!==t.options.touchZoom&&(this._pinchStartLatLng=t.containerPointToLatLng(n.add(r)._divideBy(2))),this._startDist=n.distanceTo(r),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t._stop(),zt(document,"touchmove",this._onTouchMove,this),zt(document,"touchend touchcancel",this._onTouchEnd,this),qt(e)}},_onTouchMove:function(e){if(e.touches&&2===e.touches.length&&this._zooming){var t=this._map,n=t.mouseEventToContainerPoint(e.touches[0]),r=t.mouseEventToContainerPoint(e.touches[1]),o=n.distanceTo(r)/this._startDist;if(this._zoom=t.getScaleZoom(o,this._startZoom),!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&o<1||this._zoom>t.getMaxZoom()&&o>1)&&(this._zoom=t._limitZoom(this._zoom)),"center"===t.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var s=n._add(r)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===s.x&&0===s.y)return;this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(s),this._zoom)}this._moved||(t._moveStart(!0,!1),this._moved=!0),N(this._animRequest);var a=i(t._move,t,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=E(a,this,!0),qt(e)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,N(this._animRequest),Bt(document,"touchmove",this._onTouchMove,this),Bt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});nn.addInitHook("addHandler","touchZoom",si),nn.BoxZoom=Qr,nn.DoubleClickZoom=ei,nn.Drag=ti,nn.Keyboard=ni,nn.ScrollWheelZoom=ri,nn.TapHold=oi,nn.TouchZoom=si,e.Bounds=I,e.Browser=Ie,e.CRS=F,e.Canvas=Zr,e.Circle=sr,e.CircleMarker=ir,e.Class=C,e.Control=on,e.DivIcon=Rr,e.DivOverlay=Pr,e.DomEvent=en,e.DomUtil=It,e.Draggable=_n,e.Evented=O,e.FeatureGroup=Yn,e.GeoJSON=hr,e.GridLayer=zr,e.Handler=gn,e.Icon=Xn,e.ImageOverlay=kr,e.LatLng=$,e.LatLngBounds=D,e.Layer=Vn,e.LayerGroup=qn,e.LineUtil=Bn,e.Map=nn,e.Marker=tr,e.Mixin=vn,e.Path=rr,e.Point=A,e.PolyUtil=kn,e.Polygon=ur,e.Polyline=lr,e.Popup=Lr,e.PosAnimation=tn,e.Projection=Fn,e.Rectangle=Xr,e.Renderer=Hr,e.SVG=Yr,e.SVGOverlay=Cr,e.TileLayer=Br,e.Tooltip=Ar,e.Transformation=V,e.Util=j,e.VideoOverlay=Nr,e.bind=i,e.bounds=z,e.canvas=Wr,e.circle=ar,e.circleMarker=or,e.control=sn,e.divIcon=Ir,e.extend=n,e.featureGroup=Gn,e.geoJSON=wr,e.geoJson=Sr,e.gridLayer=Dr,e.icon=Jn,e.imageOverlay=Er,e.latLng=U,e.latLngBounds=B,e.layerGroup=Kn,e.map=rn,e.marker=nr,e.point=R,e.polygon=dr,e.polyline=cr,e.popup=Or,e.rectangle=Jr,e.setOptions=f,e.stamp=s,e.svg=Gr,e.svgOverlay=Tr,e.tileLayer=$r,e.tooltip=Mr,e.transformation=q,e.version=t,e.videoOverlay=jr;var ai=window.L;e.noConflict=function(){return window.L=ai,this},window.L=e}(t)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,A(w);else{var t=r(u);null!==t&&M(x,t.startTime-e)}}function w(e,n){m=!1,g&&(g=!1,y(N),N=-1),p=!0;var o=f;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!T());){var s=h.callback;if("function"===typeof s){h.callback=null,f=h.priorityLevel;var a=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&M(x,d.startTime-n),l=!1}return l}finally{h=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,k=!1,E=null,N=-1,j=5,C=-1;function T(){return!(t.unstable_now()-C<j)}function P(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?S():(k=!1,E=null)}}else k=!1}if("function"===typeof _)S=function(){_(P)};else if("undefined"!==typeof MessageChannel){var L=new MessageChannel,O=L.port2;L.port1.onmessage=P,S=function(){O.postMessage(null)}}else S=function(){v(P,0)};function A(e){E=e,k||(k=!0,S())}function M(e,n){N=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,A(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(y(N),N=-1):g=!0,M(x,o-s))):(e.sortIndex=a,n(c,e),m||p||(m=!0,A(w))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},286:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(630)),o=r(n(611));t.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=i.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,n,r;let i=null,s=null,a=null,l=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(s="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const r=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),o=null===(n=e.headers.get("content-range"))||void 0===n?void 0:n.split("/");r&&o&&o.length>1&&(a=parseInt(o[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(s)&&(s.length>1?(i={code:"PGRST116",details:`Results contain ${s.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},s=null,a=null,l=406,c="Not Acceptable"):s=1===s.length?s[0]:null)}else{const t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(s=[],i=null,l=200,c="OK")}catch(u){404===e.status&&""===t?(l=204,c="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(r=null===i||void 0===i?void 0:i.details)||void 0===r?void 0:r.includes("0 rows"))&&(i=null,l=200,c="OK"),i&&this.shouldThrowOnError)throw new o.default(i)}return{error:i,data:s,count:a,status:l,statusText:c}});return this.shouldThrowOnError||(n=n.catch(e=>{var t,n,r;return{error:{message:`${null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null===e||void 0===e?void 0:e.message}`,details:`${null!==(n=null===e||void 0===e?void 0:e.stack)&&void 0!==n?n:""}`,hint:"",code:`${null!==(r=null===e||void 0===e?void 0:e.code)&&void 0!==r?r:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}}},330:(e,t,n)=>{"use strict";var r=n(43);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=r.useState,s=r.useEffect,a=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var u="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=o({inst:{value:n,getSnapshot:t}}),i=r[0].inst,u=r[1];return a(function(){i.value=n,i.getSnapshot=t,c(i)&&u({inst:i})},[e,n,t]),s(function(){return c(i)&&u({inst:i}),e(function(){c(i)&&u({inst:i})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},374:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(286));class o extends i.default{select(e){let t=!1;const n=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e){let{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=i?`${i}.order`:"order",s=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${s?`${s},`:""}${e}.${t?"asc":"desc"}${void 0===n?"":n?".nullsfirst":".nullslast"}`),this}limit(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r="undefined"===typeof n?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t){let{foreignTable:n,referencedTable:r=n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i="undefined"===typeof r?"offset":`${r}.offset`,o="undefined"===typeof r?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain(){let{analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var s;const a=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=null!==(s=this.headers.Accept)&&void 0!==s?s:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${l}"; options=${a};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}t.default=o},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},400:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="0.0.0-automated"},443:(e,t,n)=>{"use strict";e.exports=n(717)},446:function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,n=36e5,r="millisecond",i="second",o="minute",s="hour",a="day",l="week",c="month",u="quarter",d="year",h="date",f="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},v=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},y={s:v,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+v(r,2,"0")+":"+v(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,c),o=n-i<0,s=t.clone().add(r+(o?-1:1),c);return+(-(r+(n-i)/(o?i-s:s-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:d,w:l,d:a,D:h,h:s,m:o,s:i,ms:r,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},_="en",b={};b[_]=g;var x="$isDayjsObject",w=function(e){return e instanceof N||!(!e||!e[x])},S=function e(t,n,r){var i;if(!t)return _;if("string"==typeof t){var o=t.toLowerCase();b[o]&&(i=o),n&&(b[o]=n,i=o);var s=t.split("-");if(!i&&s.length>1)return e(s[0])}else{var a=t.name;b[a]=t,i=a}return!r&&i&&(_=i),i||!r&&_},k=function(e,t){if(w(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new N(n)},E=y;E.l=S,E.i=w,E.w=function(e,t){return k(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var N=function(){function g(e){this.$L=S(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[x]=!0}var v=g.prototype;return v.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(E.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(p);if(r){var i=r[2]-1||0,o=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(t)}(e),this.init()},v.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},v.$utils=function(){return E},v.isValid=function(){return!(this.$d.toString()===f)},v.isSame=function(e,t){var n=k(e);return this.startOf(t)<=n&&n<=this.endOf(t)},v.isAfter=function(e,t){return k(e)<this.startOf(t)},v.isBefore=function(e,t){return this.endOf(t)<k(e)},v.$g=function(e,t,n){return E.u(e)?this[t]:this.set(n,e)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(e,t){var n=this,r=!!E.u(t)||t,u=E.p(e),f=function(e,t){var i=E.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?i:i.endOf(a)},p=function(e,t){return E.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},m=this.$W,g=this.$M,v=this.$D,y="set"+(this.$u?"UTC":"");switch(u){case d:return r?f(1,0):f(31,11);case c:return r?f(1,g):f(0,g+1);case l:var _=this.$locale().weekStart||0,b=(m<_?m+7:m)-_;return f(r?v-b:v+(6-b),g);case a:case h:return p(y+"Hours",0);case s:return p(y+"Minutes",1);case o:return p(y+"Seconds",2);case i:return p(y+"Milliseconds",3);default:return this.clone()}},v.endOf=function(e){return this.startOf(e,!1)},v.$set=function(e,t){var n,l=E.p(e),u="set"+(this.$u?"UTC":""),f=(n={},n[a]=u+"Date",n[h]=u+"Date",n[c]=u+"Month",n[d]=u+"FullYear",n[s]=u+"Hours",n[o]=u+"Minutes",n[i]=u+"Seconds",n[r]=u+"Milliseconds",n)[l],p=l===a?this.$D+(t-this.$W):t;if(l===c||l===d){var m=this.clone().set(h,1);m.$d[f](p),m.init(),this.$d=m.set(h,Math.min(this.$D,m.daysInMonth())).$d}else f&&this.$d[f](p);return this.init(),this},v.set=function(e,t){return this.clone().$set(e,t)},v.get=function(e){return this[E.p(e)]()},v.add=function(r,u){var h,f=this;r=Number(r);var p=E.p(u),m=function(e){var t=k(f);return E.w(t.date(t.date()+Math.round(e*r)),f)};if(p===c)return this.set(c,this.$M+r);if(p===d)return this.set(d,this.$y+r);if(p===a)return m(1);if(p===l)return m(7);var g=(h={},h[o]=t,h[s]=n,h[i]=e,h)[p]||1,v=this.$d.getTime()+r*g;return E.w(v,this)},v.subtract=function(e,t){return this.add(-1*e,t)},v.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||f;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=E.z(this),o=this.$H,s=this.$m,a=this.$M,l=n.weekdays,c=n.months,u=n.meridiem,d=function(e,n,i,o){return e&&(e[n]||e(t,r))||i[n].slice(0,o)},h=function(e){return E.s(o%12||12,e,"0")},p=u||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(m,function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return E.s(t.$y,4,"0");case"M":return a+1;case"MM":return E.s(a+1,2,"0");case"MMM":return d(n.monthsShort,a,c,3);case"MMMM":return d(c,a);case"D":return t.$D;case"DD":return E.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(n.weekdaysMin,t.$W,l,2);case"ddd":return d(n.weekdaysShort,t.$W,l,3);case"dddd":return l[t.$W];case"H":return String(o);case"HH":return E.s(o,2,"0");case"h":return h(1);case"hh":return h(2);case"a":return p(o,s,!0);case"A":return p(o,s,!1);case"m":return String(s);case"mm":return E.s(s,2,"0");case"s":return String(t.$s);case"ss":return E.s(t.$s,2,"0");case"SSS":return E.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")})},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(r,h,f){var p,m=this,g=E.p(h),v=k(r),y=(v.utcOffset()-this.utcOffset())*t,_=this-v,b=function(){return E.m(m,v)};switch(g){case d:p=b()/12;break;case c:p=b();break;case u:p=b()/3;break;case l:p=(_-y)/6048e5;break;case a:p=(_-y)/864e5;break;case s:p=_/n;break;case o:p=_/t;break;case i:p=_/e;break;default:p=_}return f?p:E.a(p)},v.daysInMonth=function(){return this.endOf(c).$D},v.$locale=function(){return b[this.$L]},v.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=S(e,t,!0);return r&&(n.$L=r),n},v.clone=function(){return E.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},g}(),j=N.prototype;return k.prototype=j,[["$ms",r],["$s",i],["$m",o],["$H",s],["$W",a],["$M",c],["$y",d],["$D",h]].forEach(function(e){j[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),k.extend=function(e,t){return e.$i||(e(t,N,k),e.$i=!0),k},k.locale=S,k.isDayjs=w,k.unix=function(e){return k(1e3*e)},k.en=b[_],k.Ls=b,k.p={},k}()},450:function(e,t,n){var r,i,o;i=[],void 0===(o="function"===typeof(r=function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function r(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){l(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function i(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function o(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(r){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var s="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,a=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=s.saveAs||("object"!=typeof window||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(e,t,n){var a=s.URL||s.webkitURL,l=document.createElement("a");t=t||e.name||"download",l.download=t,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?o(l):i(l.href)?r(e,t,n):o(l,l.target="_blank")):(l.href=a.createObjectURL(e),setTimeout(function(){a.revokeObjectURL(l.href)},4e4),setTimeout(function(){o(l)},0))}:"msSaveOrOpenBlob"in navigator?function(e,n,s){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,s),n);else if(i(e))r(e,n,s);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout(function(){o(a)})}}:function(e,t,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return r(e,t,n);var o="application/octet-stream"===e.type,l=/constructor/i.test(s.HTMLElement)||s.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||o&&l||a)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},u.readAsDataURL(e)}else{var d=s.URL||s.webkitURL,h=d.createObjectURL(e);i?i.location=h:location.href=h,i=null,setTimeout(function(){d.revokeObjectURL(h)},4e4)}});s.saveAs=l.saveAs=l,e.exports=l})?r.apply(t,i):r)||(e.exports=o)},461:(e,t,n)=>{"use strict";e.exports=n(330)},579:(e,t,n)=>{"use strict";e.exports=n(153)},611:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=n},630:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Headers:()=>s,Request:()=>a,Response:()=>l,default:()=>o,fetch:()=>i});var r=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("unable to locate global object")}();const i=r.fetch,o=r.fetch.bind(r),s=r.Headers,a=r.Request,l=r.Response},717:(e,t,n)=>{"use strict";var r=n(43),i=n(461);var o="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=i.useSyncExternalStore,a=r.useRef,l=r.useEffect,c=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var d=a(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=c(function(){function e(e){if(!l){if(l=!0,s=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return a=t}return a=e}if(t=a,o(s,e))return t;var n=r(e);return void 0!==i&&i(t,n)?(s=e,t):(s=e,a=n)}var s,a,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,r,i]);var f=s(e,d[0],d[1]);return l(function(){h.hasValue=!0,h.value=f},[f]),u(f),f}},730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),j=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var A=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var I,z=Object.assign;function D(e){if(void 0===I)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);I=t&&t[1]||""}return"\n"+I+e}var B=!1;function $(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?D(e):""}function U(e){switch(e.tag){case 5:return D(e.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return e=$(e.type,!1);case 11:return e=$(e.type.render,!1);case 1:return e=$(e.type,!0);default:return""}}function F(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case w:return"Portal";case E:return"Profiler";case k:return"StrictMode";case T:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case j:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case L:return null!==(t=e.displayName||null)?t:F(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return F(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return F(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function Z(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function V(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return z({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function G(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Z(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function J(e,t){X(e,t);var n=Z(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,Z(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Q(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Z(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return z({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Z(n)}}function oe(e,t){var n=Z(t.value),r=Z(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ve=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Se=null,ke=null;function Ee(e){if(e=_i(e)){if("function"!==typeof we)throw Error(o(280));var t=e.stateNode;t&&(t=xi(t),we(e.stateNode,e.type,t))}}function Ne(e){Se?ke?ke.push(e):ke=[e]:Se=e}function je(){if(Se){var e=Se,t=ke;if(ke=Se=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Te(){}var Pe=!1;function Le(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Ce(e,t,n)}finally{Pe=!1,(null!==Se||null!==ke)&&(Te(),je())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ae=!1;if(u)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){Ae=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(ue){Ae=!1}function Re(e,t,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Ie=!1,ze=null,De=!1,Be=null,$e={onError:function(e){Ie=!0,ze=e}};function Ue(e,t,n,r,i,o,s,a,l){Ie=!1,ze=null,Re.apply($e,arguments)}function Fe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ze(e){if(Fe(e)!==e)throw Error(o(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Fe(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ze(i),e;if(s===r)return Ze(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ve(e):null}function Ve(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ve(e);if(null!==t)return t;e=e.sibling}return null}var qe=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Ge=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Qe=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=dt(a):0!==(o&=s)&&(r=dt(o))}else 0!==(s=n&~i)?r=dt(s):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _t=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,wt,St,kt,Et,Nt=!1,jt=[],Ct=null,Tt=null,Pt=null,Lt=new Map,Ot=new Map,At=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function It(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=_i(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function zt(e){var t=yi(e.target);if(null!==t){var n=Fe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Et(e.priority,function(){St(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Dt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_i(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Bt(e,t,n){Dt(e)&&n.delete(t)}function $t(){Nt=!1,null!==Ct&&Dt(Ct)&&(Ct=null),null!==Tt&&Dt(Tt)&&(Tt=null),null!==Pt&&Dt(Pt)&&(Pt=null),Lt.forEach(Bt),Ot.forEach(Bt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Nt||(Nt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,$t)))}function Ft(e){function t(t){return Ut(t,e)}if(0<jt.length){Ut(jt[0],e);for(var n=1;n<jt.length;n++){var r=jt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Ut(Ct,e),null!==Tt&&Ut(Tt,e),null!==Pt&&Ut(Pt,e),Lt.forEach(t),Ot.forEach(t),n=0;n<At.length;n++)(r=At[n]).blockedOn===e&&(r.blockedOn=null);for(;0<At.length&&null===(n=At[0]).blockedOn;)zt(n),null===n.blockedOn&&At.shift()}var Ht=b.ReactCurrentBatchConfig,Zt=!0;function Wt(e,t,n,r){var i=_t,o=Ht.transition;Ht.transition=null;try{_t=1,qt(e,t,n,r)}finally{_t=i,Ht.transition=o}}function Vt(e,t,n,r){var i=_t,o=Ht.transition;Ht.transition=null;try{_t=4,qt(e,t,n,r)}finally{_t=i,Ht.transition=o}}function qt(e,t,n,r){if(Zt){var i=Yt(e,t,n,r);if(null===i)Zr(e,t,r,Kt,n),Rt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=It(Ct,e,t,n,r,i),!0;case"dragenter":return Tt=It(Tt,e,t,n,r,i),!0;case"mouseover":return Pt=It(Pt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Lt.set(o,It(Lt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ot.set(o,It(Ot.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Rt(e,r),4&t&&-1<Mt.indexOf(e)){for(;null!==i;){var o=_i(i);if(null!==o&&xt(o),null===(o=Yt(e,t,n,r))&&Zr(e,t,r,Kt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Zr(e,t,r,null,n)}}var Kt=null;function Yt(e,t,n,r){if(Kt=null,null!==(e=yi(e=xe(r))))if(null===(t=Fe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Gt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Qe:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Qt=null;function en(){if(Qt)return Qt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return Qt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return z(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=z({},cn,{view:0,detail:0}),hn=on(dn),fn=z({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=on(fn),mn=on(z({},fn,{dataTransfer:0})),gn=on(z({},dn,{relatedTarget:0})),vn=on(z({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=z({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=on(yn),bn=on(z({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function En(){return kn}var Nn=z({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),jn=on(Nn),Cn=on(z({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=on(z({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Pn=on(z({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ln=z({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=on(Ln),An=[9,13,27,32],Mn=u&&"CompositionEvent"in window,Rn=null;u&&"documentMode"in document&&(Rn=document.documentMode);var In=u&&"TextEvent"in window&&!Rn,zn=u&&(!Mn||Rn&&8<Rn&&11>=Rn),Dn=String.fromCharCode(32),Bn=!1;function $n(e,t){switch(e){case"keyup":return-1!==An.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Fn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ne(r),0<(t=Vr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Vn=null,qn=null;function Kn(e){Dr(e,0)}function Yn(e){if(q(bi(e)))return e}function Gn(e,t){if("change"===e)return t}var Xn=!1;if(u){var Jn;if(u){var Qn="oninput"in document;if(!Qn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Qn="function"===typeof er.oninput}Jn=Qn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Vn&&(Vn.detachEvent("onpropertychange",nr),qn=Vn=null)}function nr(e){if("value"===e.propertyName&&Yn(qn)){var t=[];Wn(t,qn,e,xe(e)),Le(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),qn=n,(Vn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(qn)}function or(e,t){if("click"===e)return Yn(t)}function sr(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var s=ur(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,_r=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==gr||gr!==K(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Vr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Sr={},kr={};function Er(e){if(Sr[e])return Sr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return Sr[e]=n[t];return e}u&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Nr=Er("animationend"),jr=Er("animationiteration"),Cr=Er("animationstart"),Tr=Er("transitionend"),Pr=new Map,Lr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Pr.set(e,t),l(t,[e])}for(var Ar=0;Ar<Lr.length;Ar++){var Mr=Lr[Ar];Or(Mr.toLowerCase(),"on"+(Mr[0].toUpperCase()+Mr.slice(1)))}Or(Nr,"onAnimationEnd"),Or(jr,"onAnimationIteration"),Or(Cr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Tr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ir=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function zr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,l,c){if(Ue.apply(this,arguments),Ie){if(!Ie)throw Error(o(198));var u=ze;Ie=!1,ze=null,De||(De=!0,Be=u)}}(r,t,void 0,e),e.currentTarget=null}function Dr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;zr(i,a,c),o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;zr(i,a,c),o=l}}}if(De)throw e=Be,De=!1,Be=null,e}function Br(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function $r(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Fr(e){if(!e[Ur]){e[Ur]=!0,s.forEach(function(t){"selectionchange"!==t&&(Ir.has(t)||$r(t,!1,e),$r(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,$r("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Gt(t)){case 1:var i=Wt;break;case 4:i=Vt;break;default:i=qt}n=i.bind(null,t,n,e),i=void 0,!Ae||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Zr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=yi(a)))return;if(5===(l=s.tag)||6===l){r=o=s;continue e}a=a.parentNode}}r=r.return}Le(function(){var r=o,i=xe(n),s=[];e:{var a=Pr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=jn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Tn;break;case Nr:case jr:case Cr:l=vn;break;case Tr:l=Pn;break;case"scroll":l=hn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Oe(p,h))&&u.push(Wr(p,m,f)))),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(d=Fe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:bi(l),f=null==c?a:bi(c),(a=new u(m,p+"leave",l,n,i)).target=d,a.relatedTarget=f,m=null,yi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=qr(f))p++;for(f=0,m=h;m;m=qr(m))f++;for(;0<p-f;)u=qr(u),p--;for(;0<f-p;)h=qr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=qr(u),h=qr(h)}u=null}else u=null;null!==l&&Kr(s,a,l,u,!1),null!==c&&null!==d&&Kr(s,d,c,u,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Gn;else if(Zn(a))if(Xn)g=sr;else{g=ir;var v=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=or);switch(g&&(g=g(e,r))?Wn(s,g,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?bi(r):window,e){case"focusin":(Zn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,br(s,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(s,n,i)}var y;if(Mn)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Fn?$n(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(zn&&"ko"!==n.locale&&(Fn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Fn&&(y=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,Fn=!0)),0<(v=Vr(r,_)).length&&(_=new bn(_,e,null,n,i),s.push({event:_,listeners:v}),y?_.data=y:null!==(y=Un(n))&&(_.data=y))),(y=In?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Bn=!0,Dn);case"textInput":return(e=t.data)===Dn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Fn)return"compositionend"===e||!Mn&&$n(e,t)?(e=en(),Qt=Jt=Xt=null,Fn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Vr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=y))}Dr(s,t)})}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Oe(e,n))&&r.unshift(Wr(e,o,i)),null!=(o=Oe(e,t))&&r.push(Wr(e,o,i))),e=e.return}return r}function qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Oe(n,o))&&s.unshift(Wr(n,l,a)):i||null!=(l=Oe(n,o))&&s.push(Wr(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Yr=/\r\n?/g,Gr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Gr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(o(425))}function Qr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Ft(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ft(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,vi="__reactHandles$"+di;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function _i(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function xi(e){return e[fi]||null}var wi=[],Si=-1;function ki(e){return{current:e}}function Ei(e){0>Si||(e.current=wi[Si],wi[Si]=null,Si--)}function Ni(e,t){Si++,wi[Si]=e.current,e.current=t}var ji={},Ci=ki(ji),Ti=ki(!1),Pi=ji;function Li(e,t){var n=e.type.contextTypes;if(!n)return ji;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ai(){Ei(Ti),Ei(Ci)}function Mi(e,t,n){if(Ci.current!==ji)throw Error(o(168));Ni(Ci,t),Ni(Ti,n)}function Ri(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,H(e)||"Unknown",i));return z({},n,r)}function Ii(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ji,Pi=Ci.current,Ni(Ci,e),Ni(Ti,Ti.current),!0}function zi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Ri(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ti),Ei(Ci),Ni(Ci,e)):Ei(Ti),Ni(Ti,n)}var Di=null,Bi=!1,$i=!1;function Ui(e){null===Di?Di=[e]:Di.push(e)}function Fi(){if(!$i&&null!==Di){$i=!0;var e=0,t=_t;try{var n=Di;for(_t=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Di=null,Bi=!1}catch(i){throw null!==Di&&(Di=Di.slice(e+1)),qe(Qe,Fi),i}finally{_t=t,$i=!1}}return null}var Hi=[],Zi=0,Wi=null,Vi=0,qi=[],Ki=0,Yi=null,Gi=1,Xi="";function Ji(e,t){Hi[Zi++]=Vi,Hi[Zi++]=Wi,Wi=e,Vi=t}function Qi(e,t,n){qi[Ki++]=Gi,qi[Ki++]=Xi,qi[Ki++]=Yi,Yi=e;var r=Gi;e=Xi;var i=32-st(r)-1;r&=~(1<<i),n+=1;var o=32-st(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Gi=1<<32-st(t)+i|n<<i|r,Xi=o+e}else Gi=1<<o|n<<i|r,Xi=e}function eo(e){null!==e.return&&(Ji(e,1),Qi(e,1,0))}function to(e){for(;e===Wi;)Wi=Hi[--Zi],Hi[Zi]=null,Vi=Hi[--Zi],Hi[Zi]=null;for(;e===Yi;)Yi=qi[--Ki],qi[Ki]=null,Xi=qi[--Ki],qi[Ki]=null,Gi=qi[--Ki],qi[Ki]=null}var no=null,ro=null,io=!1,oo=null;function so(e,t){var n=Lc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Gi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Lc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!ao(e,t)){if(lo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&ao(e,t)?so(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw fo(),Error(o(418));for(;t;)so(e,t),t=ci(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=ci(e.nextSibling)}function po(){ro=no=null,io=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=b.ReactCurrentBatchConfig;function vo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function yo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _o(e){return(0,e._init)(e._payload)}function bo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ac(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=zc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===O&&_o(o)===t.type)?((r=i(t,n.props)).ref=vo(e,t,n),r.return=e,r):((r=Mc(n.type,n.key,n.props,null,e.mode,r)).ref=vo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Dc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Rc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=zc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Mc(t.type,t.key,t.props,null,e.mode,n)).ref=vo(e,null,t),n.return=e,n;case w:return(t=Dc(t,e.mode,n)).return=e,t;case O:return h(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=Rc(t,e.mode,n,null)).return=e,t;yo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case w:return n.key===i?u(e,t,n,r):null;case O:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||R(n))return null!==i?null:d(e,t,n,r,null);yo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case w:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||R(r))return d(t,e=e.get(n)||null,r,i,null);yo(t,r)}return null}function m(i,o,a,l){for(var c=null,u=null,d=o,m=o=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=f(i,d,a[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),o=s(v,o,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===a.length)return n(i,d),io&&Ji(i,m),c;if(null===d){for(;m<a.length;m++)null!==(d=h(i,a[m],l))&&(o=s(d,o,m),null===u?c=d:u.sibling=d,u=d);return io&&Ji(i,m),c}for(d=r(i,d);m<a.length;m++)null!==(g=p(d,i,m,a[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(i,e)}),io&&Ji(i,m),c}function g(i,a,l,c){var u=R(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,m=a,g=a=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var _=f(i,m,y.value,c);if(null===_){null===m&&(m=v);break}e&&m&&null===_.alternate&&t(i,m),a=s(_,a,g),null===d?u=_:d.sibling=_,d=_,m=v}if(y.done)return n(i,m),io&&Ji(i,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(i,y.value,c))&&(a=s(y,a,g),null===d?u=y:d.sibling=y,d=y);return io&&Ji(i,g),u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=p(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=s(y,a,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach(function(e){return t(i,e)}),io&&Ji(i,g),u}return function e(r,o,s,l){if("object"===typeof s&&null!==s&&s.type===S&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case x:e:{for(var c=s.key,u=o;null!==u;){if(u.key===c){if((c=s.type)===S){if(7===u.tag){n(r,u.sibling),(o=i(u,s.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&_o(c)===u.type){n(r,u.sibling),(o=i(u,s.props)).ref=vo(r,u,s),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===S?((o=Rc(s.props.children,r.mode,l,s.key)).return=r,r=o):((l=Mc(s.type,s.key,s.props,null,r.mode,l)).ref=vo(r,o,s),l.return=r,r=l)}return a(r);case w:e:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Dc(s,r.mode,l)).return=r,r=o}return a(r);case O:return e(r,o,(u=s._init)(s._payload),l)}if(te(s))return m(r,o,s,l);if(R(s))return g(r,o,s,l);yo(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=zc(s,r.mode,l)).return=r,r=o),a(r)):n(r,o)}}var xo=bo(!0),wo=bo(!1),So=ki(null),ko=null,Eo=null,No=null;function jo(){No=Eo=ko=null}function Co(e){var t=So.current;Ei(So),e._currentValue=t}function To(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Po(e,t){ko=e,No=Eo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_a=!0),e.firstContext=null)}function Lo(e){var t=e._currentValue;if(No!==e)if(e={context:e,memoizedValue:t,next:null},null===Eo){if(null===ko)throw Error(o(308));Eo=e,ko.dependencies={lanes:0,firstContext:e}}else Eo=Eo.next=e;return t}var Oo=null;function Ao(e){null===Oo?Oo=[e]:Oo.push(e)}function Mo(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ao(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ro(e,r)}function Ro(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Io=!1;function zo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Do(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function $o(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ro(e,n)}return null===(i=r.interleaved)?(t.next=t,Ao(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ro(e,n)}function Uo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Fo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ho(e,t,n,r){var i=e.updateQueue;Io=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(s=0,u=c=l=null,a=o;;){var h=a.lane,f=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=z({},d,h);break e;case 2:Io=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,s|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Il|=s,e.lanes=s,e.memoizedState=d}}function Zo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Wo={},Vo=ki(Wo),qo=ki(Wo),Ko=ki(Wo);function Yo(e){if(e===Wo)throw Error(o(174));return e}function Go(e,t){switch(Ni(Ko,t),Ni(qo,e),Ni(Vo,Wo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Vo),Ni(Vo,t)}function Xo(){Ei(Vo),Ei(qo),Ei(Ko)}function Jo(e){Yo(Ko.current);var t=Yo(Vo.current),n=le(t,e.type);t!==n&&(Ni(qo,e),Ni(Vo,n))}function Qo(e){qo.current===e&&(Ei(Vo),Ei(qo))}var es=ki(0);function ts(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ns=[];function rs(){for(var e=0;e<ns.length;e++)ns[e]._workInProgressVersionPrimary=null;ns.length=0}var is=b.ReactCurrentDispatcher,os=b.ReactCurrentBatchConfig,ss=0,as=null,ls=null,cs=null,us=!1,ds=!1,hs=0,fs=0;function ps(){throw Error(o(321))}function ms(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function gs(e,t,n,r,i,s){if(ss=s,as=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,is.current=null===e||null===e.memoizedState?Qs:ea,e=n(r,i),ds){s=0;do{if(ds=!1,hs=0,25<=s)throw Error(o(301));s+=1,cs=ls=null,t.updateQueue=null,is.current=ta,e=n(r,i)}while(ds)}if(is.current=Js,t=null!==ls&&null!==ls.next,ss=0,cs=ls=as=null,us=!1,t)throw Error(o(300));return e}function vs(){var e=0!==hs;return hs=0,e}function ys(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===cs?as.memoizedState=cs=e:cs=cs.next=e,cs}function _s(){if(null===ls){var e=as.alternate;e=null!==e?e.memoizedState:null}else e=ls.next;var t=null===cs?as.memoizedState:cs.next;if(null!==t)cs=t,ls=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ls=e).memoizedState,baseState:ls.baseState,baseQueue:ls.baseQueue,queue:ls.queue,next:null},null===cs?as.memoizedState=cs=e:cs=cs.next=e}return cs}function bs(e,t){return"function"===typeof t?t(e):t}function xs(e){var t=_s(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=ls,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=a=null,c=null,u=s;do{var d=u.lane;if((ss&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,as.lanes|=d,Il|=d}u=u.next}while(null!==u&&u!==s);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(_a=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,as.lanes|=s,Il|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ws(e){var t=_s(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);ar(s,t.memoizedState)||(_a=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Ss(){}function ks(e,t){var n=as,r=_s(),i=t(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,_a=!0),r=r.queue,Is(js.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==cs&&1&cs.memoizedState.tag){if(n.flags|=2048,Ls(9,Ns.bind(null,n,r,i,t),void 0,null),null===Tl)throw Error(o(349));0!==(30&ss)||Es(n,t,i)}return i}function Es(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ns(e,t,n,r){t.value=n,t.getSnapshot=r,Cs(t)&&Ts(e)}function js(e,t,n){return n(function(){Cs(t)&&Ts(e)})}function Cs(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Ts(e){var t=Ro(e,1);null!==t&&nc(t,e,1,-1)}function Ps(e){var t=ys();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:e},t.queue=e,e=e.dispatch=Ks.bind(null,as,e),[t.memoizedState,e]}function Ls(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Os(){return _s().memoizedState}function As(e,t,n,r){var i=ys();as.flags|=e,i.memoizedState=Ls(1|t,n,void 0,void 0===r?null:r)}function Ms(e,t,n,r){var i=_s();r=void 0===r?null:r;var o=void 0;if(null!==ls){var s=ls.memoizedState;if(o=s.destroy,null!==r&&ms(r,s.deps))return void(i.memoizedState=Ls(t,n,o,r))}as.flags|=e,i.memoizedState=Ls(1|t,n,o,r)}function Rs(e,t){return As(8390656,8,e,t)}function Is(e,t){return Ms(2048,8,e,t)}function zs(e,t){return Ms(4,2,e,t)}function Ds(e,t){return Ms(4,4,e,t)}function Bs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function $s(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ms(4,4,Bs.bind(null,t,e),n)}function Us(){}function Fs(e,t){var n=_s();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ms(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Hs(e,t){var n=_s();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ms(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Zs(e,t,n){return 0===(21&ss)?(e.baseState&&(e.baseState=!1,_a=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),as.lanes|=n,Il|=n,e.baseState=!0),t)}function Ws(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var r=os.transition;os.transition={};try{e(!1),t()}finally{_t=n,os.transition=r}}function Vs(){return _s().memoizedState}function qs(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ys(e))Gs(t,n);else if(null!==(n=Mo(e,t,n,r))){nc(n,e,r,ec()),Xs(n,t,r)}}function Ks(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ys(e))Gs(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,s)){var l=t.interleaved;return null===l?(i.next=i,Ao(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Mo(e,t,i,r))&&(nc(n,e,r,i=ec()),Xs(n,t,r))}}function Ys(e){var t=e.alternate;return e===as||null!==t&&t===as}function Gs(e,t){ds=us=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xs(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Js={readContext:Lo,useCallback:ps,useContext:ps,useEffect:ps,useImperativeHandle:ps,useInsertionEffect:ps,useLayoutEffect:ps,useMemo:ps,useReducer:ps,useRef:ps,useState:ps,useDebugValue:ps,useDeferredValue:ps,useTransition:ps,useMutableSource:ps,useSyncExternalStore:ps,useId:ps,unstable_isNewReconciler:!1},Qs={readContext:Lo,useCallback:function(e,t){return ys().memoizedState=[e,void 0===t?null:t],e},useContext:Lo,useEffect:Rs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,As(4194308,4,Bs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return As(4194308,4,e,t)},useInsertionEffect:function(e,t){return As(4,2,e,t)},useMemo:function(e,t){var n=ys();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ys();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=qs.bind(null,as,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ys().memoizedState=e},useState:Ps,useDebugValue:Us,useDeferredValue:function(e){return ys().memoizedState=e},useTransition:function(){var e=Ps(!1),t=e[0];return e=Ws.bind(null,e[1]),ys().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=as,i=ys();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Tl)throw Error(o(349));0!==(30&ss)||Es(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Rs(js.bind(null,r,s,e),[e]),r.flags|=2048,Ls(9,Ns.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=ys(),t=Tl.identifierPrefix;if(io){var n=Xi;t=":"+t+"R"+(n=(Gi&~(1<<32-st(Gi)-1)).toString(32)+n),0<(n=hs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fs++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Lo,useCallback:Fs,useContext:Lo,useEffect:Is,useImperativeHandle:$s,useInsertionEffect:zs,useLayoutEffect:Ds,useMemo:Hs,useReducer:xs,useRef:Os,useState:function(){return xs(bs)},useDebugValue:Us,useDeferredValue:function(e){return Zs(_s(),ls.memoizedState,e)},useTransition:function(){return[xs(bs)[0],_s().memoizedState]},useMutableSource:Ss,useSyncExternalStore:ks,useId:Vs,unstable_isNewReconciler:!1},ta={readContext:Lo,useCallback:Fs,useContext:Lo,useEffect:Is,useImperativeHandle:$s,useInsertionEffect:zs,useLayoutEffect:Ds,useMemo:Hs,useReducer:ws,useRef:Os,useState:function(){return ws(bs)},useDebugValue:Us,useDeferredValue:function(e){var t=_s();return null===ls?t.memoizedState=e:Zs(t,ls.memoizedState,e)},useTransition:function(){return[ws(bs)[0],_s().memoizedState]},useMutableSource:Ss,useSyncExternalStore:ks,useId:Vs,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=z({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:z({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&Fe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=Bo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=$o(e,o,i))&&(nc(t,e,i,r),Uo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=Bo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=$o(e,o,i))&&(nc(t,e,i,r),Uo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Bo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=$o(e,i,r))&&(nc(t,e,r,n),Uo(t,e,r))}};function oa(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function sa(e,t,n){var r=!1,i=ji,o=t.contextType;return"object"===typeof o&&null!==o?o=Lo(o):(i=Oi(t)?Pi:Ci.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Li(e,i):ji),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function la(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},zo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Lo(o):(o=Oi(t)?Pi:Ci.current,i.context=Li(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(ra(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),Ho(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ha="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=Bo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Zl||(Zl=!0,Wl=r),da(0,t)},n}function pa(e,t,n){(n=Bo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Vl?Vl=new Set([this]):Vl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ha;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Bo(-1,1)).tag=2,$o(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ya=b.ReactCurrentOwner,_a=!1;function ba(e,t,n,r){t.child=null===e?wo(t,null,n,r):xo(t,e.child,n,r)}function xa(e,t,n,r,i){n=n.render;var o=t.ref;return Po(t,i),r=gs(e,t,n,r,o,i),n=vs(),null===e||_a?(io&&n&&eo(t),t.flags|=1,ba(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Za(e,t,i))}function wa(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Oc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Sa(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return Za(e,t,i)}return t.flags|=1,(e=Ac(o,r)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(_a=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Za(e,t,i);0!==(131072&e.flags)&&(_a=!0)}}return Na(e,t,n,r,i)}function ka(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ni(Al,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ni(Al,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ni(Al,Ol),Ol|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ni(Al,Ol),Ol|=r;return ba(e,t,i,n),t.child}function Ea(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Na(e,t,n,r,i){var o=Oi(n)?Pi:Ci.current;return o=Li(t,o),Po(t,i),n=gs(e,t,n,r,o,i),r=vs(),null===e||_a?(io&&r&&eo(t),t.flags|=1,ba(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Za(e,t,i))}function ja(e,t,n,r,i){if(Oi(n)){var o=!0;Ii(t)}else o=!1;if(Po(t,i),null===t.stateNode)Ha(e,t),sa(t,n,r),la(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Lo(c):c=Li(t,c=Oi(n)?Pi:Ci.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==c)&&aa(t,s,r,c),Io=!1;var h=t.memoizedState;s.state=h,Ho(t,r,s,i),l=t.memoizedState,a!==r||h!==l||Ti.current||Io?("function"===typeof u&&(ra(t,n,u,r),l=t.memoizedState),(a=Io||oa(t,n,a,r,h,l,c))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Do(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:na(t.type,a),s.props=c,d=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Lo(l):l=Li(t,l=Oi(n)?Pi:Ci.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==l)&&aa(t,s,r,l),Io=!1,h=t.memoizedState,s.state=h,Ho(t,r,s,i);var p=t.memoizedState;a!==d||h!==p||Ti.current||Io?("function"===typeof f&&(ra(t,n,f,r),p=t.memoizedState),(c=Io||oa(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ca(e,t,n,r,o,i)}function Ca(e,t,n,r,i,o){Ea(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&zi(t,n,!1),Za(e,t,o);r=t.stateNode,ya.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=xo(t,e.child,null,o),t.child=xo(t,null,a,o)):ba(e,t,a,o),t.memoizedState=r.state,i&&zi(t,n,!0),t.child}function Ta(e){var t=e.stateNode;t.pendingContext?Mi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Mi(0,t.context,!1),Go(e,t.containerInfo)}function Pa(e,t,n,r,i){return po(),mo(i),t.flags|=256,ba(e,t,n,r),t.child}var La,Oa,Aa,Ma,Ra={dehydrated:null,treeContext:null,retryLane:0};function Ia(e){return{baseLanes:e,cachePool:null,transitions:null}}function za(e,t,n){var r,i=t.pendingProps,s=es.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ni(es,1&s),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Ic(l,i,0,null),e=Rc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ia(n),t.memoizedState=Ra,e):Da(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,a){if(n)return 256&t.flags?(t.flags&=-257,Ba(e,t,a,r=ua(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Ic({mode:"visible",children:r.children},i,0,null),(s=Rc(s,i,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&xo(t,e.child,null,a),t.child.memoizedState=Ia(a),t.memoizedState=Ra,s);if(0===(1&t.mode))return Ba(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ba(e,t,a,r=ua(s=Error(o(419)),r,void 0))}if(l=0!==(a&e.childLanes),_a||l){if(null!==(r=Tl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Ro(e,i),nc(r,e,i,-1))}return mc(),Ba(e,t,a,r=ua(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=jc.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(qi[Ki++]=Gi,qi[Ki++]=Xi,qi[Ki++]=Yi,Gi=e.id,Xi=e.overflow,Yi=t),t=Da(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,s,n);if(a){a=i.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Ac(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=Ac(r,a):(a=Rc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Ia(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ra,i}return e=(a=e.child).sibling,i=Ac(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Da(e,t){return(t=Ic({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ba(e,t,n,r){return null!==r&&mo(r),xo(t,e.child,null,n),(e=Da(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function $a(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),To(e.return,t,n)}function Ua(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Fa(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(ba(e,t,r.children,n),0!==(2&(r=es.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&$a(e,n,t);else if(19===e.tag)$a(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ni(es,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ts(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ua(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ts(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ua(t,!0,n,null,o);break;case"together":Ua(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ha(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Za(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Il|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ac(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ac(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wa(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Va(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function qa(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Va(t),null;case 1:case 17:return Oi(t.type)&&Ai(),Va(t),null;case 3:return r=t.stateNode,Xo(),Ei(Ti),Ei(Ci),rs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(sc(oo),oo=null))),Oa(e,t),Va(t),null;case 5:Qo(t);var i=Yo(Ko.current);if(n=t.type,null!==e&&null!=t.stateNode)Aa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Va(t),null}if(e=Yo(Vo.current),ho(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[hi]=t,r[fi]=s,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(i=0;i<Rr.length;i++)Br(Rr[i],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":G(r,s),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Br("invalid",r);break;case"textarea":ie(r,s),Br("invalid",r)}for(var l in ye(n,s),i=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Br("scroll",r)}switch(n){case"input":V(r),Q(r,s,!0);break;case"textarea":V(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Qr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,La(e,t,!1,!1),t.stateNode=e;e:{switch(l=_e(n,r),n){case"dialog":Br("cancel",e),Br("close",e),i=r;break;case"iframe":case"object":case"embed":Br("load",e),i=r;break;case"video":case"audio":for(i=0;i<Rr.length;i++)Br(Rr[i],e);i=r;break;case"source":Br("error",e),i=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),i=r;break;case"details":Br("toggle",e),i=r;break;case"input":G(e,r),i=Y(e,r),Br("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=z({},r,{value:void 0}),Br("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Br("invalid",e)}for(s in ye(n,i),c=i)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?ge(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&Br("scroll",e):null!=u&&_(e,s,u,l))}switch(n){case"input":V(e),Q(e,r,!1);break;case"textarea":V(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Z(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Qr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Va(t),null;case 6:if(e&&null!=t.stateNode)Ma(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=Yo(Ko.current),Yo(Vo.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(s=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Va(t),null;case 13:if(Ei(es),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),po(),t.flags|=98560,s=!1;else if(s=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[hi]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Va(t),s=!1}else null!==oo&&(sc(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&es.current)?0===Ml&&(Ml=3):mc())),null!==t.updateQueue&&(t.flags|=4),Va(t),null);case 4:return Xo(),Oa(e,t),null===e&&Fr(t.stateNode.containerInfo),Va(t),null;case 10:return Co(t.type._context),Va(t),null;case 19:if(Ei(es),null===(s=t.memoizedState))return Va(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)Wa(s,!1);else{if(0!==Ml||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ts(e))){for(t.flags|=128,Wa(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ni(es,1&es.current|2),t.child}e=e.sibling}null!==s.tail&&Xe()>Fl&&(t.flags|=128,r=!0,Wa(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ts(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wa(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!io)return Va(t),null}else 2*Xe()-s.renderingStartTime>Fl&&1073741824!==n&&(t.flags|=128,r=!0,Wa(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Xe(),t.sibling=null,n=es.current,Ni(es,r?1&n|2:1&n),t):(Va(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Va(t),6&t.subtreeFlags&&(t.flags|=8192)):Va(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Ka(e,t){switch(to(t),t.tag){case 1:return Oi(t.type)&&Ai(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xo(),Ei(Ti),Ei(Ci),rs(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Qo(t),null;case 13:if(Ei(es),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(es),null;case 4:return Xo(),null;case 10:return Co(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}La=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oa=function(){},Aa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Yo(Vo.current);var o,s=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),s=[];break;case"select":i=z({},i,{value:void 0}),r=z({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Qr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Br("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Ma=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ya=!1,Ga=!1,Xa="function"===typeof WeakSet?WeakSet:Set,Ja=null;function Qa(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){kc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){kc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&el(t,n,o)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Qr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ga||Qa(n,t);case 6:var r=ul,i=dl;ul=null,hl(e,t,n),dl=i,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Ft(e)):li(ul,n.stateNode));break;case 4:r=ul,i=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Ga&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&el(n,t,s),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Ga&&(Qa(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){kc(n,t,a)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Ga=(r=Ga)||null!==n.memoizedState,hl(e,t,n),Ga=r):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xa),t.forEach(function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(o(160));fl(s,a,i),ul=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){kc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){kc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){kc(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&Qa(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&Qa(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){kc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&X(i,s),_e(l,a);var u=_e(l,s);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):_(i,d,h,u)}switch(l){case"input":J(i,s);break;case"textarea":oe(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?ne(i,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[fi]=s}catch(g){kc(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){kc(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ft(t.containerInfo)}catch(g){kc(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Ul=Xe())),4&r&&pl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Ga=(u=Ga)||d,ml(t,e),Ga=u):ml(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Ja=e,d=e.child;null!==d;){for(h=Ja=d;null!==Ja;){switch(p=(f=Ja).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Qa(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){kc(r,n,g)}}break;case 5:Qa(f,f.return);break;case 22:if(null!==f.memoizedState){xl(h);continue}}null!==p?(p.return=f,Ja=p):xl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){kc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){kc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),vl(e),4&r&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,al(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;ll(e,al(e),s);break;default:throw Error(o(161))}}catch(a){kc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Ja=e,_l(e,t,n)}function _l(e,t,n){for(var r=0!==(1&e.mode);null!==Ja;){var i=Ja,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Ya;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ga;a=Ya;var c=Ga;if(Ya=s,(Ga=l)&&!c)for(Ja=i;null!==Ja;)l=(s=Ja).child,22===s.tag&&null!==s.memoizedState?wl(i):null!==l?(l.return=s,Ja=l):wl(i);for(;null!==o;)Ja=o,_l(o,t,n),o=o.sibling;Ja=i,Ya=a,Ga=c}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Ja=o):bl(e)}}function bl(e){for(;null!==Ja;){var t=Ja;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ga||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ga)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Zo(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Zo(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Ft(h)}}}break;default:throw Error(o(163))}Ga||512&t.flags&&il(t)}catch(f){kc(t,t.return,f)}}if(t===e){Ja=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ja=n;break}Ja=t.return}}function xl(e){for(;null!==Ja;){var t=Ja;if(t===e){Ja=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ja=n;break}Ja=t.return}}function wl(e){for(;null!==Ja;){var t=Ja;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){kc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){kc(t,i,l)}}var o=t.return;try{il(t)}catch(l){kc(t,o,l)}break;case 5:var s=t.return;try{il(t)}catch(l){kc(t,s,l)}}}catch(l){kc(t,t.return,l)}if(t===e){Ja=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Ja=a;break}Ja=t.return}}var Sl,kl=Math.ceil,El=b.ReactCurrentDispatcher,Nl=b.ReactCurrentOwner,jl=b.ReactCurrentBatchConfig,Cl=0,Tl=null,Pl=null,Ll=0,Ol=0,Al=ki(0),Ml=0,Rl=null,Il=0,zl=0,Dl=0,Bl=null,$l=null,Ul=0,Fl=1/0,Hl=null,Zl=!1,Wl=null,Vl=null,ql=!1,Kl=null,Yl=0,Gl=0,Xl=null,Jl=-1,Ql=0;function ec(){return 0!==(6&Cl)?Xe():-1!==Jl?Jl:Jl=Xe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cl)&&0!==Ll?Ll&-Ll:null!==go.transition?(0===Ql&&(Ql=mt()),Ql):0!==(e=_t)?e:e=void 0===(e=window.event)?16:Gt(e.type)}function nc(e,t,n,r){if(50<Gl)throw Gl=0,Xl=null,Error(o(185));vt(e,n,r),0!==(2&Cl)&&e===Tl||(e===Tl&&(0===(2&Cl)&&(zl|=n),4===Ml&&ac(e,Ll)),rc(e,r),1===n&&0===Cl&&0===(1&t.mode)&&(Fl=Xe()+500,Bi&&Fi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&r)||(i[s]=ft(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var r=ht(e,e===Tl?Ll:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Bi=!0,Ui(e)}(lc.bind(null,e)):Ui(lc.bind(null,e)),si(function(){0===(6&Cl)&&Fi()}),n=null;else{switch(bt(r)){case 1:n=Qe;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Tc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Jl=-1,Ql=0,0!==(6&Cl))throw Error(o(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=ht(e,e===Tl?Ll:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Cl;Cl|=2;var s=pc();for(Tl===e&&Ll===t||(Hl=null,Fl=Xe()+500,hc(e,t));;)try{yc();break}catch(l){fc(e,l)}jo(),El.current=s,Cl=i,null!==Pl?t=0:(Tl=null,Ll=0,t=Ml)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Rl,hc(e,0),ac(e,r),rc(e,Xe()),n;if(6===t)ac(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ar(o(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(s=pt(e))&&(r=s,t=oc(e,s))),1===t))throw n=Rl,hc(e,0),ac(e,r),rc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:xc(e,$l,Hl);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=Ul+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,$l,Hl),t);break}xc(e,$l,Hl);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-st(r);s=1<<a,(a=t[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kl(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,$l,Hl),r);break}xc(e,$l,Hl);break;default:throw Error(o(329))}}}return rc(e,Xe()),e.callbackNode===n?ic.bind(null,e):null}function oc(e,t){var n=Bl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=$l,$l=n,null!==t&&sc(t)),e}function sc(e){null===$l?$l=e:$l.push.apply($l,e)}function ac(e,t){for(t&=~Dl,t&=~zl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Cl))throw Error(o(327));wc();var t=ht(e,0);if(0===(1&t))return rc(e,Xe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Rl,hc(e,0),ac(e,t),rc(e,Xe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,$l,Hl),rc(e,Xe()),null}function cc(e,t){var n=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=n)&&(Fl=Xe()+500,Bi&&Fi())}}function uc(e){null!==Kl&&0===Kl.tag&&0===(6&Cl)&&wc();var t=Cl;Cl|=1;var n=jl.transition,r=_t;try{if(jl.transition=null,_t=1,e)return e()}finally{_t=r,jl.transition=n,0===(6&(Cl=t))&&Fi()}}function dc(){Ol=Al.current,Ei(Al)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ai();break;case 3:Xo(),Ei(Ti),Ei(Ci),rs();break;case 5:Qo(r);break;case 4:Xo();break;case 13:case 19:Ei(es);break;case 10:Co(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Tl=e,Pl=e=Ac(e.current,null),Ll=Ol=t,Ml=0,Rl=null,Dl=zl=Il=0,$l=Bl=null,null!==Oo){for(t=0;t<Oo.length;t++)if(null!==(r=(n=Oo[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}Oo=null}return e}function fc(e,t){for(;;){var n=Pl;try{if(jo(),is.current=Js,us){for(var r=as.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}us=!1}if(ss=0,cs=ls=as=null,ds=!1,hs=0,Nl.current=null,null===n||null===n.return){Ml=1,Rl=t,Pl=null;break}e:{var s=e,a=n.return,l=n,c=t;if(t=Ll,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ga(a);if(null!==p){p.flags&=-257,va(p,a,l,0,t),1&p.mode&&ma(s,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ma(s,u,t),mc();break e}c=Error(o(426))}else if(io&&1&l.mode){var v=ga(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),va(v,a,l,0,t),mo(ca(c,l));break e}}s=c=ca(c,l),4!==Ml&&(Ml=2),null===Bl?Bl=[s]:Bl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Fo(s,fa(0,c,t));break e;case 1:l=c;var y=s.type,_=s.stateNode;if(0===(128&s.flags)&&("function"===typeof y.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Vl||!Vl.has(_)))){s.flags|=65536,t&=-t,s.lanes|=t,Fo(s,pa(s,l,t));break e}}s=s.return}while(null!==s)}bc(n)}catch(b){t=b,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function pc(){var e=El.current;return El.current=Js,null===e?Js:e}function mc(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===Tl||0===(268435455&Il)&&0===(268435455&zl)||ac(Tl,Ll)}function gc(e,t){var n=Cl;Cl|=2;var r=pc();for(Tl===e&&Ll===t||(Hl=null,hc(e,t));;)try{vc();break}catch(i){fc(e,i)}if(jo(),Cl=n,El.current=r,null!==Pl)throw Error(o(261));return Tl=null,Ll=0,Ml}function vc(){for(;null!==Pl;)_c(Pl)}function yc(){for(;null!==Pl&&!Ye();)_c(Pl)}function _c(e){var t=Sl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?bc(e):Pl=t,Nl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=qa(n,t,Ol)))return void(Pl=n)}else{if(null!==(n=Ka(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Ml=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Ml&&(Ml=5)}function xc(e,t,n){var r=_t,i=jl.transition;try{jl.transition=null,_t=1,function(e,t,n,r){do{wc()}while(null!==Kl);if(0!==(6&Cl))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,s),e===Tl&&(Pl=Tl=null,Ll=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||ql||(ql=!0,Tc(tt,function(){return wc(),null})),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=jl.transition,jl.transition=null;var a=_t;_t=1;var l=Cl;Cl|=4,Nl.current=null,function(e,t){if(ei=Zt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(x){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==s||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=a),f===s&&++d===r&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Zt=!1,Ja=t;null!==Ja;)if(e=(t=Ja).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ja=e;else for(;null!==Ja;){t=Ja;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,_=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:na(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(o(163))}}catch(x){kc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Ja=e;break}Ja=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ti),Zt=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Ge(),Cl=l,_t=a,jl.transition=s}else e.current=n;if(ql&&(ql=!1,Kl=e,Yl=i),s=e.pendingLanes,0===s&&(Vl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Zl)throw Zl=!1,e=Wl,Wl=null,e;0!==(1&Yl)&&0!==e.tag&&wc(),s=e.pendingLanes,0!==(1&s)?e===Xl?Gl++:(Gl=0,Xl=e):Gl=0,Fi()}(e,t,n,r)}finally{jl.transition=i,_t=r}return null}function wc(){if(null!==Kl){var e=bt(Yl),t=jl.transition,n=_t;try{if(jl.transition=null,_t=16>e?16:e,null===Kl)var r=!1;else{if(e=Kl,Kl=null,Yl=0,0!==(6&Cl))throw Error(o(331));var i=Cl;for(Cl|=4,Ja=e.current;null!==Ja;){var s=Ja,a=s.child;if(0!==(16&Ja.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Ja=u;null!==Ja;){var d=Ja;switch(d.tag){case 0:case 11:case 15:nl(8,d,s)}var h=d.child;if(null!==h)h.return=d,Ja=h;else for(;null!==Ja;){var f=(d=Ja).sibling,p=d.return;if(ol(d),d===u){Ja=null;break}if(null!==f){f.return=p,Ja=f;break}Ja=p}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Ja=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Ja=a;else e:for(;null!==Ja;){if(0!==(2048&(s=Ja).flags))switch(s.tag){case 0:case 11:case 15:nl(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,Ja=y;break e}Ja=s.return}}var _=e.current;for(Ja=_;null!==Ja;){var b=(a=Ja).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Ja=b;else e:for(a=_;null!==Ja;){if(0!==(2048&(l=Ja).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(w){kc(l,l.return,w)}if(l===a){Ja=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Ja=x;break e}Ja=l.return}}if(Cl=i,Fi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(w){}r=!0}return r}finally{_t=n,jl.transition=t}}return!1}function Sc(e,t,n){e=$o(e,t=fa(0,t=ca(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function kc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Vl||!Vl.has(r))){t=$o(t,e=pa(t,e=ca(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Tl===e&&(Ll&n)===n&&(4===Ml||3===Ml&&(130023424&Ll)===Ll&&500>Xe()-Ul?hc(e,0):Dl|=n),rc(e,t)}function Nc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Ro(e,t))&&(vt(e,t,n),rc(e,n))}function jc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Nc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Nc(e,n)}function Tc(e,t){return qe(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lc(e,t,n,r){return new Pc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ac(e,t){var n=e.alternate;return null===n?((n=Lc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mc(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Oc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Rc(n.children,i,s,t);case k:a=8,i|=8;break;case E:return(e=Lc(12,n,t,2|i)).elementType=E,e.lanes=s,e;case T:return(e=Lc(13,n,t,i)).elementType=T,e.lanes=s,e;case P:return(e=Lc(19,n,t,i)).elementType=P,e.lanes=s,e;case A:return Ic(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case N:a=10;break e;case j:a=9;break e;case C:a=11;break e;case L:a=14;break e;case O:a=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Lc(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Rc(e,t,n,r){return(e=Lc(7,e,r,t)).lanes=n,e}function Ic(e,t,n,r){return(e=Lc(22,e,r,t)).elementType=A,e.lanes=n,e.stateNode={isHidden:!1},e}function zc(e,t,n){return(e=Lc(6,e,null,t)).lanes=n,e}function Dc(e,t,n){return(t=Lc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function $c(e,t,n,r,i,o,s,a,l){return e=new Bc(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Lc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zo(o),e}function Uc(e){if(!e)return ji;e:{if(Fe(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Ri(e,n,t)}return t}function Fc(e,t,n,r,i,o,s,a,l){return(e=$c(n,r,!0,e,0,o,0,a,l)).context=Uc(null),n=e.current,(o=Bo(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,$o(n,o,i),e.current.lanes=i,vt(e,i,r),rc(e,r),e}function Hc(e,t,n,r){var i=t.current,o=ec(),s=tc(i);return n=Uc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Bo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=$o(i,t,s))&&(nc(e,i,s,o),Uo(e,i,s)),s}function Zc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Vc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ti.current)_a=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _a=!1,function(e,t,n){switch(t.tag){case 3:Ta(t),po();break;case 5:Jo(t);break;case 1:Oi(t.type)&&Ii(t);break;case 4:Go(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ni(So,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ni(es,1&es.current),t.flags|=128,null):0!==(n&t.child.childLanes)?za(e,t,n):(Ni(es,1&es.current),null!==(e=Za(e,t,n))?e.sibling:null);Ni(es,1&es.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Fa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ni(es,es.current),r)break;return null;case 22:case 23:return t.lanes=0,ka(e,t,n)}return Za(e,t,n)}(e,t,n);_a=0!==(131072&e.flags)}else _a=!1,io&&0!==(1048576&t.flags)&&Qi(t,Vi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ha(e,t),e=t.pendingProps;var i=Li(t,Ci.current);Po(t,n),i=gs(null,t,r,e,i,n);var s=vs();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(s=!0,Ii(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,zo(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,la(t,r,e,n),t=Ca(null,t,r,!0,s,n)):(t.tag=0,io&&s&&eo(t),ba(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ha(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===L)return 14}return 2}(r),e=na(r,e),i){case 0:t=Na(null,t,r,e,n);break e;case 1:t=ja(null,t,r,e,n);break e;case 11:t=xa(null,t,r,e,n);break e;case 14:t=wa(null,t,r,na(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Na(e,t,r,i=t.elementType===r?i:na(r,i),n);case 1:return r=t.type,i=t.pendingProps,ja(e,t,r,i=t.elementType===r?i:na(r,i),n);case 3:e:{if(Ta(t),null===e)throw Error(o(387));r=t.pendingProps,i=(s=t.memoizedState).element,Do(e,t),Ho(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Pa(e,t,r,n,i=ca(Error(o(423)),t));break e}if(r!==i){t=Pa(e,t,r,n,i=ca(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=wo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=Za(e,t,n);break e}ba(e,t,r,n)}t=t.child}return t;case 5:return Jo(t),null===e&&co(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==s&&ni(r,s)&&(t.flags|=32),Ea(e,t),ba(e,t,a,n),t.child;case 6:return null===e&&co(t),null;case 13:return za(e,t,n);case 4:return Go(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xo(t,null,r,n):ba(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:na(r,i),n);case 7:return ba(e,t,t.pendingProps,n),t.child;case 8:case 12:return ba(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Ni(So,r._currentValue),r._currentValue=a,null!==s)if(ar(s.value,a)){if(s.children===i.children&&!Ti.current){t=Za(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=Bo(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),To(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),To(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}ba(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Po(t,n),r=r(i=Lo(i)),t.flags|=1,ba(e,t,r,n),t.child;case 14:return i=na(r=t.type,t.pendingProps),wa(e,t,r,i=na(r.type,i),n);case 15:return Sa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:na(r,i),Ha(e,t),t.tag=1,Oi(r)?(e=!0,Ii(t)):e=!1,Po(t,n),sa(t,r,i),la(t,r,i,n),Ca(null,t,r,!0,e,n);case 19:return Fa(e,t,n);case 22:return ka(e,t,n)}throw Error(o(156,t.tag))};var qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Gc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Qc(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var e=Zc(s);a.call(e)}}Hc(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Zc(s);o.call(e)}}var s=Fc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=s,e[pi]=s.current,Fr(8===e.nodeType?e.parentNode:e),uc(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Zc(l);a.call(e)}}var l=$c(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[pi]=l.current,Fr(8===e.nodeType?e.parentNode:e),uc(function(){Hc(t,l,n,r)}),l}(n,t,e,i,r);return Zc(s)}Yc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Hc(e,t,null,null)},Yc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Hc(null,e,null,null)}),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<At.length&&0!==t&&t<At[n].priority;n++);At.splice(n,0,e),0===n&&zt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Xe()),0===(6&Cl)&&(Fl=Xe()+500,Fi()))}break;case 13:uc(function(){var t=Ro(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Vc(e,1)}},wt=function(e){if(13===e.tag){var t=Ro(e,134217728);if(null!==t)nc(t,e,134217728,ec());Vc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=Ro(e,t);if(null!==n)nc(n,e,t,ec());Vc(e,t)}},kt=function(){return _t},Et=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},we=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(o(90));q(r),J(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Te=uc;var eu={usingClientEntryPoint:!1,Events:[_i,bi,xi,Ne,je,cc]},tu={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),ot=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Gc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Gc(e))throw Error(o(299));var n=!1,r="",i=qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=$c(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Fr(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(o(200));return Qc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Gc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Fc(t,null,e,1,null!=n?n:null,i,0,s,a),e[pi]=t.current,Fr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(o(200));return Qc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(o(40));return!!e._reactRootContainer&&(uc(function(){Qc(null,null,e,!1,function(){e._reactRootContainer=null,e[pi]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Qc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},736:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(374));class o extends i.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(e=>"string"===typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t){let{config:n,type:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i="";"plain"===r?i="pl":"phrase"===r?i="ph":"websearch"===r&&(i="w");const o=void 0===n?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(e=>{let[t,n]=e;this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}}t.default=o},745:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_HEADERS=void 0;const r=n(400);t.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${r.version}`}},829:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(736));t.default=class{constructor(e,t){let{headers:n={},schema:r,fetch:i}=t;this.url=e,this.headers=n,this.schema=r,this.fetch=i}select(e){let{head:t=!1,count:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=t?"HEAD":"GET";let o=!1;const s=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!o?"":('"'===e&&(o=!o),e)).join("");return this.url.searchParams.set("select",s),n&&(this.headers.Prefer=`count=${n}`),new i.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e){let{count:t,defaultToNull:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=[];if(this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),n||r.push("missing=default"),this.headers.Prefer=r.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new i.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e){let{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:o=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=[`resolution=${n?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),o||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new i.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new i.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new i.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},980:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const i=r(n(210));t.PostgrestClient=i.default;const o=r(n(829));t.PostgrestQueryBuilder=o.default;const s=r(n(736));t.PostgrestFilterBuilder=s.default;const a=r(n(374));t.PostgrestTransformBuilder=a.default;const l=r(n(286));t.PostgrestBuilder=l.default;const c=r(n(611));t.PostgrestError=c.default,t.default={PostgrestClient:i.default,PostgrestQueryBuilder:o.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:l.default,PostgrestError:c.default}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;("object"==typeof a||"function"==typeof a)&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach(e=>s[e]=()=>r[e]);return s.default=()=>r,n.d(o,s),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>Ei,hasStandardBrowserEnv:()=>ji,hasStandardBrowserWebWorkerEnv:()=>Ci,navigator:()=>Ni,origin:()=>Ti});var t,r=n(43),i=n.t(r,2),o=n(391);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const a="popstate";function l(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function c(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function u(e,t){return{usr:e.state,key:e.key,idx:t}}function d(e,t,n,r){return void 0===n&&(n=null),s({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?f(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function h(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function f(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function p(e,n,r,i){void 0===i&&(i={});let{window:o=document.defaultView,v5Compat:c=!1}=i,f=o.history,p=t.Pop,m=null,g=v();function v(){return(f.state||{idx:null}).idx}function y(){p=t.Pop;let e=v(),n=null==e?null:e-g;g=e,m&&m({action:p,location:b.location,delta:n})}function _(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:h(e);return l(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,f.replaceState(s({},f.state,{idx:g}),""));let b={get action(){return p},get location(){return e(o,f)},listen(e){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(a,y),m=e,()=>{o.removeEventListener(a,y),m=null}},createHref:e=>n(o,e),createURL:_,encodeLocation(e){let t=_(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){p=t.Push;let i=d(b.location,e,n);r&&r(i,e),g=v()+1;let s=u(i,g),a=b.createHref(i);try{f.pushState(s,"",a)}catch(l){if(l instanceof DOMException&&"DataCloneError"===l.name)throw l;o.location.assign(a)}c&&m&&m({action:p,location:b.location,delta:1})},replace:function(e,n){p=t.Replace;let i=d(b.location,e,n);r&&r(i,e),g=v();let o=u(i,g),s=b.createHref(i);f.replaceState(o,"",s),c&&m&&m({action:p,location:b.location,delta:0})},go:e=>f.go(e)};return b}var m;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(m||(m={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function g(e,t,n){void 0===n&&(n="/");let r=P(("string"===typeof t?f(t):t).pathname||"/",n);if(null==r)return null;let i=v(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let o=null;for(let s=0;null==o&&s<i.length;++s)o=j(i[s],T(r));return o}function v(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,o)=>{let s={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};s.relativePath.startsWith("/")&&(l(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));let a=M([r,s.relativePath]),c=n.concat(s);e.children&&e.children.length>0&&(l(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),v(e.children,t,c,a)),(null!=e.path||e.index)&&t.push({path:a,score:N(a,e.index),routesMeta:c})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of y(e.path))i(e,t,r);else i(e,t)}),t}function y(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let s=y(r.join("/")),a=[];return a.push(...s.map(e=>""===e?o:[o,e].join("/"))),i&&a.push(...s),a.map(t=>e.startsWith("/")&&""===t?"/":t)}const _=/^:\w+$/,b=3,x=2,w=1,S=10,k=-2,E=e=>"*"===e;function N(e,t){let n=e.split("/"),r=n.length;return n.some(E)&&(r+=k),t&&(r+=x),n.filter(e=>!E(e)).reduce((e,t)=>e+(_.test(t)?b:""===t?w:S),r)}function j(e,t){let{routesMeta:n}=e,r={},i="/",o=[];for(let s=0;s<n.length;++s){let e=n[s],a=s===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=C({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},l);if(!c)return null;Object.assign(r,c.params);let u=e.route;o.push({params:r,pathname:M([i,c.pathname]),pathnameBase:R(M([i,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(i=M([i,c.pathnameBase]))}return o}function C(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);c("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(e,t)=>(r.push(t),"/([^\\/]+)"));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((e,t,n)=>{if("*"===t){let e=a[n]||"";s=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return c(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(a[n]||"",t),e},{}),pathname:o,pathnameBase:s,pattern:e}}function T(e){try{return decodeURI(e)}catch(t){return c(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function L(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function O(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function A(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=f(e):(i=s({},e),l(!i.pathname||!i.pathname.includes("?"),L("?","pathname","search",i)),l(!i.pathname||!i.pathname.includes("#"),L("#","pathname","hash",i)),l(!i.search||!i.search.includes("#"),L("#","search","hash",i)));let o,a=""===e||""===i.pathname,c=a?"/":i.pathname;if(r||null==c)o=n;else{let e=t.length-1;if(c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?f(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:I(r),hash:z(i)}}(i,o),d=c&&"/"!==c&&c.endsWith("/"),h=(a||"."===c)&&n.endsWith("/");return u.pathname.endsWith("/")||!d&&!h||(u.pathname+="/"),u}const M=e=>e.join("/").replace(/\/\/+/g,"/"),R=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),I=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function D(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const B=["post","put","patch","delete"],$=(new Set(B),["get",...B]);new Set($),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function U(){return U=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},U.apply(this,arguments)}const F=r.createContext(null);const H=r.createContext(null);const Z=r.createContext(null);const W=r.createContext(null);const V=r.createContext({outlet:null,matches:[],isDataRoute:!1});const q=r.createContext(null);function K(){return null!=r.useContext(W)}function Y(){return K()||l(!1),r.useContext(W).location}function G(e){r.useContext(Z).static||r.useLayoutEffect(e)}function X(){let{isDataRoute:e}=r.useContext(V);return e?function(){let{router:e}=ae(oe.UseNavigateStable),t=ce(se.UseNavigateStable),n=r.useRef(!1);G(()=>{n.current=!0});let i=r.useCallback(function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,U({fromRouteId:t},i)))},[e,t]);return i}():function(){K()||l(!1);let e=r.useContext(F),{basename:t,navigator:n}=r.useContext(Z),{matches:i}=r.useContext(V),{pathname:o}=Y(),s=JSON.stringify(O(i).map(e=>e.pathnameBase)),a=r.useRef(!1);return G(()=>{a.current=!0}),r.useCallback(function(r,i){if(void 0===i&&(i={}),!a.current)return;if("number"===typeof r)return void n.go(r);let l=A(r,JSON.parse(s),o,"path"===i.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:M([t,l.pathname])),(i.replace?n.replace:n.push)(l,i.state,i)},[t,n,s,o,e])}()}function J(e,t){let{relative:n}=void 0===t?{}:t,{matches:i}=r.useContext(V),{pathname:o}=Y(),s=JSON.stringify(O(i).map(e=>e.pathnameBase));return r.useMemo(()=>A(e,JSON.parse(s),o,"path"===n),[e,s,o,n])}function Q(e,n,i){K()||l(!1);let{navigator:o}=r.useContext(Z),{matches:s}=r.useContext(V),a=s[s.length-1],c=a?a.params:{},u=(a&&a.pathname,a?a.pathnameBase:"/");a&&a.route;let d,h=Y();if(n){var p;let e="string"===typeof n?f(n):n;"/"===u||(null==(p=e.pathname)?void 0:p.startsWith(u))||l(!1),d=e}else d=h;let m=d.pathname||"/",v=g(e,{pathname:"/"===u?m:m.slice(u.length)||"/"});let y=ie(v&&v.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:M([u,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:M([u,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),s,i);return n&&y?r.createElement(W.Provider,{value:{location:U({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:t.Pop}},y):y}function ee(){let e=function(){var e;let t=r.useContext(q),n=le(se.UseRouteError),i=ce(se.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=D(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:o},n):null,null)}const te=r.createElement(ee,null);class ne extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error?r.createElement(V.Provider,{value:this.props.routeContext},r.createElement(q.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function re(e){let{routeContext:t,match:n,children:i}=e,o=r.useContext(F);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(V.Provider,{value:t},i)}function ie(e,t,n){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),null==e){var o;if(null==(o=n)||!o.errors)return null;e=n.matches}let s=e,a=null==(i=n)?void 0:i.errors;if(null!=a){let e=s.findIndex(e=>e.route.id&&(null==a?void 0:a[e.route.id]));e>=0||l(!1),s=s.slice(0,Math.min(s.length,e+1))}return s.reduceRight((e,i,o)=>{let l=i.route.id?null==a?void 0:a[i.route.id]:null,c=null;n&&(c=i.route.errorElement||te);let u=t.concat(s.slice(0,o+1)),d=()=>{let t;return t=l?c:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(re,{match:i,routeContext:{outlet:e,matches:u,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===o)?r.createElement(ne,{location:n.location,revalidation:n.revalidation,component:c,error:l,children:d(),routeContext:{outlet:null,matches:u,isDataRoute:!0}}):d()},null)}var oe,se;function ae(e){let t=r.useContext(F);return t||l(!1),t}function le(e){let t=r.useContext(H);return t||l(!1),t}function ce(e){let t=function(){let e=r.useContext(V);return e||l(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||l(!1),n.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"}(oe||(oe={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"}(se||(se={}));i.startTransition;function ue(e){l(!1)}function de(e){let{basename:n="/",children:i=null,location:o,navigationType:s=t.Pop,navigator:a,static:c=!1}=e;K()&&l(!1);let u=n.replace(/^\/*/,"/"),d=r.useMemo(()=>({basename:u,navigator:a,static:c}),[u,a,c]);"string"===typeof o&&(o=f(o));let{pathname:h="/",search:p="",hash:m="",state:g=null,key:v="default"}=o,y=r.useMemo(()=>{let e=P(h,u);return null==e?null:{location:{pathname:e,search:p,hash:m,state:g,key:v},navigationType:s}},[u,h,p,m,g,v,s]);return null==y?null:r.createElement(Z.Provider,{value:d},r.createElement(W.Provider,{children:i,value:y}))}function he(e){let{children:t,location:n}=e;return Q(pe(t),n)}var fe;!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(fe||(fe={}));new Promise(()=>{});r.Component;function pe(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,(e,i)=>{if(!r.isValidElement(e))return;let o=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,pe(e.props.children,o));e.type!==ue&&l(!1),e.props.index&&e.props.children&&l(!1);let s={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=pe(e.props.children,o)),n.push(s)}),n}function me(){return me=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},me.apply(this,arguments)}function ge(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const ve=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];const ye=i.startTransition;function _e(e){let{basename:t,children:n,future:i,window:o}=e,s=r.useRef();var a;null==s.current&&(s.current=(void 0===(a={window:o,v5Compat:!0})&&(a={}),p(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return d("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:h(t)},null,a)));let l=s.current,[c,u]=r.useState({action:l.action,location:l.location}),{v7_startTransition:f}=i||{},m=r.useCallback(e=>{f&&ye?ye(()=>u(e)):u(e)},[u,f]);return r.useLayoutEffect(()=>l.listen(m),[l,m]),r.createElement(de,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l})}const be="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,xe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,we=r.forwardRef(function(e,t){let n,{onClick:i,relative:o,reloadDocument:s,replace:a,state:c,target:u,to:d,preventScrollReset:f}=e,p=ge(e,ve),{basename:m}=r.useContext(Z),g=!1;if("string"===typeof d&&xe.test(d)&&(n=d,be))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),n=P(t.pathname,m);t.origin===e.origin&&null!=n?d=n+t.search+t.hash:g=!0}catch(_){}let v=function(e,t){let{relative:n}=void 0===t?{}:t;K()||l(!1);let{basename:i,navigator:o}=r.useContext(Z),{hash:s,pathname:a,search:c}=J(e,{relative:n}),u=a;return"/"!==i&&(u="/"===a?i:M([i,a])),o.createHref({pathname:u,search:c,hash:s})}(d,{relative:o}),y=function(e,t){let{target:n,replace:i,state:o,preventScrollReset:s,relative:a}=void 0===t?{}:t,l=X(),c=Y(),u=J(e,{relative:a});return r.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==i?i:h(c)===h(u);l(e,{replace:n,state:o,preventScrollReset:s,relative:a})}},[c,l,u,i,o,n,e,s,a])}(d,{replace:a,state:c,target:u,preventScrollReset:f,relative:o});return r.createElement("a",me({},p,{href:n||v,onClick:g||s?i:function(e){i&&i(e),e.defaultPrevented||y(e)},ref:t,target:u}))});var Se,ke;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(Se||(Se={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(ke||(ke={}));class Ee extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",n=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=n}}class Ne extends Ee{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class je extends Ee{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ce extends Ee{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Te;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(Te||(Te={}));var Pe=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})};class Le{constructor(e){let{headers:t={},customFetch:r,region:i=Te.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=i,this.fetch=(e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}})(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return Pe(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:o}=t;let s={},{region:a}=t;a||(a=this.region);const l=new URL(`${this.url}/${e}`);let c;a&&"any"!==a&&(s["x-region"]=a,l.searchParams.set("forceFunctionRegion",a)),o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!==typeof Blob&&o instanceof Blob||o instanceof ArrayBuffer?(s["Content-Type"]="application/octet-stream",c=o):"string"===typeof o?(s["Content-Type"]="text/plain",c=o):"undefined"!==typeof FormData&&o instanceof FormData?c=o:(s["Content-Type"]="application/json",c=JSON.stringify(o)));const u=yield this.fetch(l.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},s),this.headers),r),body:c}).catch(e=>{throw new Ne(e)}),d=u.headers.get("x-relay-error");if(d&&"true"===d)throw new je(u);if(!u.ok)throw new Ce(u);let h,f=(null!==(n=u.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return h="application/json"===f?yield u.json():"application/octet-stream"===f?yield u.blob():"text/event-stream"===f?u:"multipart/form-data"===f?yield u.formData():yield u.text(),{data:h,error:null,response:u}}catch(r){return{data:null,error:r,response:r instanceof Ce||r instanceof je?r.context:void 0}}})}}var Oe=n(980);const{PostgrestClient:Ae,PostgrestQueryBuilder:Me,PostgrestFilterBuilder:Re,PostgrestTransformBuilder:Ie,PostgrestBuilder:ze,PostgrestError:De}=Oe;const Be=function(){if("undefined"!==typeof WebSocket)return WebSocket;if("undefined"!==typeof global.WebSocket)return global.WebSocket;if("undefined"!==typeof window.WebSocket)return window.WebSocket;if("undefined"!==typeof self.WebSocket)return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}();var $e,Ue,Fe,He,Ze,We;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}($e||($e={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(Ue||(Ue={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(Fe||(Fe={})),function(e){e.websocket="websocket"}(He||(He={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(Ze||(Ze={}));class Ve{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const s=n.decode(e.slice(o,o+r));o+=r;const a=n.decode(e.slice(o,o+i));o+=i;return{ref:null,topic:s,event:a,payload:JSON.parse(n.decode(e.slice(o,e.byteLength)))}}}class qe{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(We||(We={}));const Ke=function(e,t){var n;const r=null!==(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==n?n:[];return Object.keys(t).reduce((n,i)=>(n[i]=Ye(i,e,t,r),n),{})},Ye=(e,t,n,r)=>{const i=t.find(t=>t.name===e),o=null===i||void 0===i?void 0:i.type,s=n[e];return o&&!r.includes(o)?Ge(o,s):Xe(s)},Ge=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return tt(t,n)}switch(e){case We.bool:return Je(t);case We.float4:case We.float8:case We.int2:case We.int4:case We.int8:case We.numeric:case We.oid:return Qe(t);case We.json:case We.jsonb:return et(t);case We.timestamp:return nt(t);case We.abstime:case We.date:case We.daterange:case We.int4range:case We.int8range:case We.money:case We.reltime:case We.text:case We.time:case We.timestamptz:case We.timetz:case We.tsrange:case We.tstzrange:default:return Xe(t)}},Xe=e=>e,Je=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Qe=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},et=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},tt=(e,t)=>{if("string"!==typeof e)return e;const n=e.length-1,r=e[n];if("{"===e[0]&&"}"===r){let r;const o=e.slice(1,n);try{r=JSON.parse("["+o+"]")}catch(i){r=o?o.split(","):[]}return r.map(e=>Ge(t,e))}return e},nt=e=>"string"===typeof e?e.replace(" ","T"):e,rt=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class it{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:n}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ot,st,at,lt;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(ot||(ot={}));class ct{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ct.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=ct.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],r()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=ct.syncDiff(this.state,e,t,n),r())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const i=this.cloneDeep(e),o=this.transformState(t),s={},a={};return this.map(i,(e,t)=>{o[e]||(a[e]=t)}),this.map(o,(e,t)=>{const n=i[e];if(n){const r=t.map(e=>e.presence_ref),i=n.map(e=>e.presence_ref),o=t.filter(e=>i.indexOf(e.presence_ref)<0),l=n.filter(e=>r.indexOf(e.presence_ref)<0);o.length>0&&(s[e]=o),l.length>0&&(a[e]=l)}else s[e]=t}),this.syncDiff(i,{joins:s,leaves:a},n,r)}static syncDiff(e,t,n,r){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(i,(t,r)=>{var i;const o=null!==(i=e[t])&&void 0!==i?i:[];if(e[t]=this.cloneDeep(r),o.length>0){const n=e[t].map(e=>e.presence_ref),r=o.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...r)}n(t,o,r)}),this.map(o,(t,n)=>{let i=e[t];if(!i)return;const o=n.map(e=>e.presence_ref);i=i.filter(e=>o.indexOf(e.presence_ref)<0),e[t]=i,r(t,i,n),0===i.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return t[n]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(st||(st={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(at||(at={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(lt||(lt={}));class ut{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},n=arguments.length>2?arguments[2]:void 0;this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=Ue.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new it(this,Fe.join,this.params,this.timeout),this.rejoinTimer=new qe(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ue.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ue.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Ue.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ue.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Fe.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new ct(this),this.broadcastEndpointURL=rt(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var n,r;if(this.socket.isConnected()||this.socket.connect(),this.state==Ue.closed){const{config:{broadcast:i,presence:o,private:s}}=this.params;this._onError(t=>null===e||void 0===e?void 0:e(lt.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(lt.CLOSED));const a={},l={broadcast:i,presence:o,postgres_changes:null!==(r=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==r?r:[],private:s};this.socket.accessTokenValue&&(a.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},a)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:n}=t;var r;if(this.socket.setAuth(),void 0!==n){const t=this.bindings.postgres_changes,i=null!==(r=null===t||void 0===t?void 0:t.length)&&void 0!==r?r:0,o=[];for(let r=0;r<i;r++){const i=t[r],{filter:{event:s,schema:a,table:l,filter:c}}=i,u=n&&n[r];if(!u||u.event!==s||u.schema!==a||u.table!==l||u.filter!==c)return this.unsubscribe(),this.state=Ue.errored,void(null===e||void 0===e||e(lt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));o.push(Object.assign(Object.assign({},i),{id:u.id}))}return this.bindings.postgres_changes=o,void(e&&e(lt.SUBSCRIBED))}null===e||void 0===e||e(lt.SUBSCRIBED)}).receive("error",t=>{this.state=Ue.errored,null===e||void 0===e||e(lt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(lt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var r,i,o;const s=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(o=null===(i=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===i?void 0:i.broadcast)||void 0===o?void 0:o.ack)||n("ok"),s.receive("ok",()=>n("ok")),s.receive("error",()=>n("error")),s.receive("timeout",()=>n("timed out"))});{const{event:o,payload:s}=e,a={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:s,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,a,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(i){return"AbortError"===i.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=Ue.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Fe.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new it(this,Fe.leave,{},e),n.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{null===n||void 0===n||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,n){const r=new AbortController,i=setTimeout(()=>r.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),o}_push(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new it(this,e,t,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,i;const o=e.toLocaleLowerCase(),{close:s,error:a,leave:l,join:c}=Fe;if(n&&[s,a,l,c].indexOf(o)>=0&&n!==this._joinRef())return;let u=this._onMessage(o,t,n);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,n,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===r?void 0:r.toLocaleLowerCase())===o}).map(e=>e.callback(u,n)):null===(i=this.bindings[o])||void 0===i||i.filter(e=>{var n,r,i,s,a,l;if(["broadcast","presence","postgres_changes"].includes(o)){if("id"in e){const o=e.id,s=null===(n=e.filter)||void 0===n?void 0:n.event;return o&&(null===(r=t.ids)||void 0===r?void 0:r.includes(o))&&("*"===s||(null===s||void 0===s?void 0:s.toLocaleLowerCase())===(null===(i=t.data)||void 0===i?void 0:i.type.toLocaleLowerCase()))}{const n=null===(a=null===(s=null===e||void 0===e?void 0:e.filter)||void 0===s?void 0:s.event)||void 0===a?void 0:a.toLocaleLowerCase();return"*"===n||n===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===o}).map(e=>{if("object"===typeof u&&"ids"in u){const e=u.data,{schema:t,table:n,commit_timestamp:r,type:i,errors:o}=e,s={schema:t,table:n,commit_timestamp:r,eventType:i,new:{},old:{},errors:o};u=Object.assign(Object.assign({},s),this._getPayloadRecords(e))}e.callback(u,n)})}_isClosed(){return this.state===Ue.closed}_isJoined(){return this.state===Ue.joined}_isJoining(){return this.state===Ue.joining}_isLeaving(){return this.state===Ue.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===n&&ut.isEqual(e.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Fe.close,{},e)}_onError(e){this._on(Fe.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ue.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=Ke(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=Ke(e.columns,e.old_record)),t}}const dt=()=>{};class ht{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=dt,this.ref=0,this.logger=dt,this.conn=null,this.sendBuffer=[],this.serializer=new Ve,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},this.endPoint=`${e}/${He.websocket}`,this.httpEndpoint=rt(e),(null===t||void 0===t?void 0:t.transport)?this.transport=t.transport:this.transport=null,(null===t||void 0===t?void 0:t.params)&&(this.params=t.params),(null===t||void 0===t?void 0:t.timeout)&&(this.timeout=t.timeout),(null===t||void 0===t?void 0:t.logger)&&(this.logger=t.logger),((null===t||void 0===t?void 0:t.logLevel)||(null===t||void 0===t?void 0:t.log_level))&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),(null===t||void 0===t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=null===(r=null===t||void 0===t?void 0:t.params)||void 0===r?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=(null===t||void 0===t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null===t||void 0===t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null===t||void 0===t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new qe(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch),null===t||void 0===t?void 0:t.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(null===t||void 0===t?void 0:t.worker)||!1,this.workerUrl=null===t||void 0===t?void 0:t.workerUrl}this.accessToken=(null===t||void 0===t?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Be),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(e=>e.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case $e.connecting:return Ze.Connecting;case $e.open:return Ze.Open;case $e.closing:return Ze.Closing;default:return Ze.Closed}}isConnected(){return this.connectionState()===Ze.Open}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const n=`realtime:${e}`,r=this.getChannels().find(e=>e.topic===n);if(r)return r;{const n=new ut(`realtime:${e}`,t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:r,ref:i}=e,o=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${n} (${i})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(){let e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{const n={access_token:e,version:"realtime-js/2.11.15"};e&&t.updateJoinPayload(n),t.joinedOnce&&t._isJoined()&&t._push(Fe.access_token,{access_token:e})}))}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}else this.heartbeatCallback("disconnected")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,e=>{let{topic:t,event:n,payload:r,ref:i}=e;"phoenix"===t&&"phx_reply"===n&&this.heartbeatCallback("ok"==e.payload.status?"ok":"error"),i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${r.status||""} ${t} ${n} ${i&&"("+i+")"||""}`,r),Array.from(this.channels).filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,r,i)),this.stateChangeCallbacks.message.forEach(t=>t(e))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Fe.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?";return`${e}${n}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}}class ft extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function pt(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class mt extends ft{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class gt extends ft{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var vt=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})};const yt=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},_t=e=>{if(Array.isArray(e))return e.map(e=>_t(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[n,r]=e;const i=n.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[i]=_t(r)}),t};var bt=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})};const xt=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),wt=(e,t,r)=>bt(void 0,void 0,void 0,function*(){const i=yield vt(void 0,void 0,void 0,function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(n.bind(n,630))).Response:Response});e instanceof i&&!(null===r||void 0===r?void 0:r.noResolveJson)?e.json().then(n=>{const r=e.status||500,i=(null===n||void 0===n?void 0:n.statusCode)||r+"";t(new mt(xt(n),r,i))}).catch(e=>{t(new gt(xt(e),e))}):t(new gt(xt(e),e))}),St=(e,t,n,r)=>{const i={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"!==e&&r?((e=>{if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(r)?(i.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),n)):i};function kt(e,t,n,r,i,o){return bt(this,void 0,void 0,function*(){return new Promise((s,a)=>{e(n,St(t,r,i,o)).then(e=>{if(!e.ok)throw e;return(null===r||void 0===r?void 0:r.noResolveJson)?e:e.json()}).then(e=>s(e)).catch(e=>wt(e,a,r))})})}function Et(e,t,n,r){return bt(this,void 0,void 0,function*(){return kt(e,"GET",t,n,r)})}function Nt(e,t,n,r,i){return bt(this,void 0,void 0,function*(){return kt(e,"POST",t,r,i,n)})}function jt(e,t,n,r,i){return bt(this,void 0,void 0,function*(){return kt(e,"PUT",t,r,i,n)})}function Ct(e,t,n,r,i){return bt(this,void 0,void 0,function*(){return kt(e,"DELETE",t,r,i,n)})}var Tt=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})};const Pt={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Lt={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ot{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;this.url=e,this.headers=t,this.bucketId=n,this.fetch=yt(r)}uploadOrUpdate(e,t,n,r){return Tt(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Lt),r);let s=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(o.upsert)});const a=o.metadata;"undefined"!==typeof Blob&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),a&&i.append("metadata",this.encodeMetadata(a)),i.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),a&&i.append("metadata",this.encodeMetadata(a))):(i=n,s["cache-control"]=`max-age=${o.cacheControl}`,s["content-type"]=o.contentType,a&&(s["x-metadata"]=this.toBase64(this.encodeMetadata(a)))),(null===r||void 0===r?void 0:r.headers)&&(s=Object.assign(Object.assign({},s),r.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield("PUT"==e?jt:Nt)(this.fetch,`${this.url}/object/${c}`,i,Object.assign({headers:s},(null===o||void 0===o?void 0:o.duplex)?{duplex:o.duplex}:{}));return{data:{path:l,id:u.Id,fullPath:u.Key},error:null}}catch(i){if(pt(i))return{data:null,error:i};throw i}})}upload(e,t,n){return Tt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return Tt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),s=new URL(this.url+`/object/upload/sign/${o}`);s.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:Lt.upsert},r),o=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,o["cache-control"]=`max-age=${t.cacheControl}`,o["content-type"]=t.contentType);return{data:{path:i,fullPath:(yield jt(this.fetch,s.toString(),e,{headers:o})).Key},error:null}}catch(a){if(pt(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(e,t){return Tt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(r["x-upsert"]="true");const i=yield Nt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),o=new URL(this.url+i.url),s=o.searchParams.get("token");if(!s)throw new ft("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:s},error:null}}catch(n){if(pt(n))return{data:null,error:n};throw n}})}update(e,t,n){return Tt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return Tt(this,void 0,void 0,function*(){try{return{data:yield Nt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(pt(r))return{data:null,error:r};throw r}})}copy(e,t,n){return Tt(this,void 0,void 0,function*(){try{return{data:{path:(yield Nt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(pt(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,n){return Tt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield Nt(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},(null===n||void 0===n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const o=(null===n||void 0===n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(r){if(pt(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,n){return Tt(this,void 0,void 0,function*(){try{const r=yield Nt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=(null===n||void 0===n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${i}`):null})),error:null}}catch(r){if(pt(r))return{data:null,error:r};throw r}})}download(e,t){return Tt(this,void 0,void 0,function*(){const n="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),i=r?`?${r}`:"";try{const t=this._getFinalPath(e),r=yield Et(this.fetch,`${this.url}/${n}/${t}${i}`,{headers:this.headers,noResolveJson:!0});return{data:yield r.blob(),error:null}}catch(o){if(pt(o))return{data:null,error:o};throw o}})}info(e){return Tt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield Et(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:_t(e),error:null}}catch(n){if(pt(n))return{data:null,error:n};throw n}})}exists(e){return Tt(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,r){return bt(this,void 0,void 0,function*(){return kt(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(pt(n)&&n instanceof gt){const e=n.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],i=(null===t||void 0===t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==i&&r.push(i);const o="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",s=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==s&&r.push(s);let a=r.join("&");return""!==a&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${a}`)}}}remove(e){return Tt(this,void 0,void 0,function*(){try{return{data:yield Ct(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(pt(t))return{data:null,error:t};throw t}})}list(e,t,n){return Tt(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},Pt),t),{prefix:e||""});return{data:yield Nt(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(pt(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const At={"X-Client-Info":"storage-js/2.10.4"};var Mt=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})};class Rt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;const i=new URL(e);if(null===r||void 0===r?void 0:r.useNewHostname){/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."))}this.url=i.href,this.headers=Object.assign(Object.assign({},At),t),this.fetch=yt(n)}listBuckets(){return Mt(this,void 0,void 0,function*(){try{return{data:yield Et(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(pt(e))return{data:null,error:e};throw e}})}getBucket(e){return Mt(this,void 0,void 0,function*(){try{return{data:yield Et(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(pt(t))return{data:null,error:t};throw t}})}createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return Mt(this,void 0,void 0,function*(){try{return{data:yield Nt(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(pt(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return Mt(this,void 0,void 0,function*(){try{return{data:yield jt(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(pt(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Mt(this,void 0,void 0,function*(){try{return{data:yield Nt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(pt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Mt(this,void 0,void 0,function*(){try{return{data:yield Ct(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(pt(t))return{data:null,error:t};throw t}})}}class It extends Rt{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0)}from(e){return new Ot(this.url,this.headers,e,this.fetch)}}let zt="";zt="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Dt={headers:{"X-Client-Info":`supabase-js-${zt}/2.53.0`}},Bt={schema:"public"},$t={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ut={};var Ft=n(630),Ht=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})};const Zt=e=>{let t;return t=e||("undefined"===typeof fetch?Ft.default:fetch),function(){return t(...arguments)}},Wt=(e,t,n)=>{const r=Zt(n),i="undefined"===typeof Headers?Ft.Headers:Headers;return(n,o)=>Ht(void 0,void 0,void 0,function*(){var s;const a=null!==(s=yield t())&&void 0!==s?s:e;let l=new i(null===o||void 0===o?void 0:o.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${a}`),r(n,Object.assign(Object.assign({},o),{headers:l}))})};var Vt=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})};const qt="2.71.1",Kt=3e4,Yt=9e4,Gt={"X-Client-Info":`gotrue-js/${qt}`},Xt="X-Supabase-Api-Version",Jt={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},Qt=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class en extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function tn(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class nn extends en{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class rn extends en{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class on extends en{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class sn extends on{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class an extends on{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ln extends on{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class cn extends on{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class un extends on{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class dn extends on{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function hn(e){return tn(e)&&"AuthRetryableFetchError"===e.name}class fn extends on{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class pn extends on{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const mn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),gn=" \t\n\r=".split(""),vn=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<gn.length;t+=1)e[gn[t].charCodeAt(0)]=-2;for(let t=0;t<mn.length;t+=1)e[mn[t].charCodeAt(0)]=t;return e})();function yn(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(mn[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(mn[e]),t.queuedBits-=6}}function _n(e,t,n){const r=vn[e];if(!(r>-1)){if(-2===r)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function bn(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(0===(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,r,n)};for(let s=0;s<e.length;s+=1)_n(e.charCodeAt(s),i,o);return t.join("")}function xn(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function wn(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const t=1024*(r-55296)&65535;r=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}xn(r,t)}}function Sn(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};for(let i=0;i<e.length;i+=1)_n(e.charCodeAt(i),n,r);return new Uint8Array(t)}function kn(e){const t=[],n={queue:0,queuedBits:0},r=e=>{t.push(e)};return e.forEach(e=>yn(e,n,r)),yn(null,n,r),t.join("")}const En=()=>"undefined"!==typeof window&&"undefined"!==typeof document,Nn={tested:!1,writable:!1},jn=()=>{if(!En())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(t){return!1}if(Nn.tested)return Nn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Nn.tested=!0,Nn.writable=!0}catch(t){Nn.tested=!0,Nn.writable=!1}return Nn.writable};const Cn=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},Tn=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Pn=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(r){return n}},Ln=async(e,t)=>{await e.removeItem(t)};class On{constructor(){this.promise=new On.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function An(e){const t=e.split(".");if(3!==t.length)throw new pn("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Qt.test(t[n]))throw new pn("JWT not in base64url format");return{header:JSON.parse(bn(t[0])),payload:JSON.parse(bn(t[1])),signature:Sn(t[2]),raw:{header:t[0],payload:t[1]}}}function Mn(e){return("0"+e.toString(16)).substr(-2)}async function Rn(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function In(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let r=0;r<56;r++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,Mn).join("")}();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await Tn(e,`${t}-code-verifier`,i);const o=await Rn(r);return[o,r===o?"plain":"s256"]}On.promiseConstructor=Promise;const zn=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const Dn=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Bn(e){if(!Dn.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function $n(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"===typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Un(e){return JSON.parse(JSON.stringify(e))}var Fn=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const Hn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Zn=[502,503,504];async function Wn(e){var t,n;if(!("object"===typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"===typeof n.json))throw new dn(Hn(e),0);if(Zn.includes(e.status))throw new dn(Hn(e),e.status);let r,i;try{r=await e.json()}catch(s){throw new rn(Hn(s),s)}const o=function(e){const t=e.headers.get(Xt);if(!t)return null;if(!t.match(zn))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(s){return null}}(e);if(o&&o.getTime()>=Jt.timestamp&&"object"===typeof r&&r&&"string"===typeof r.code?i=r.code:"object"===typeof r&&r&&"string"===typeof r.error_code&&(i=r.error_code),i){if("weak_password"===i)throw new fn(Hn(r),e.status,(null===(t=r.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===i)throw new sn}else if("object"===typeof r&&r&&"object"===typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new fn(Hn(r),e.status,r.weak_password.reasons);throw new nn(Hn(r),e.status||500,i)}async function Vn(e,t,n,r){var i;const o=Object.assign({},null===r||void 0===r?void 0:r.headers);o[Xt]||(o[Xt]=Jt.name),(null===r||void 0===r?void 0:r.jwt)&&(o.Authorization=`Bearer ${r.jwt}`);const s=null!==(i=null===r||void 0===r?void 0:r.query)&&void 0!==i?i:{};(null===r||void 0===r?void 0:r.redirectTo)&&(s.redirect_to=r.redirectTo);const a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",l=await async function(e,t,n,r,i,o){const s=((e,t,n,r)=>{const i={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))})(t,r,i,o);let a;try{a=await e(n,Object.assign({},s))}catch(l){throw console.error(l),new dn(Hn(l),0)}a.ok||await Wn(a);if(null===r||void 0===r?void 0:r.noResolveJson)return a;try{return await a.json()}catch(l){await Wn(l)}}(e,t,n+a,{headers:o,noResolveJson:null===r||void 0===r?void 0:r.noResolveJson},{},null===r||void 0===r?void 0:r.body);return(null===r||void 0===r?void 0:r.xform)?null===r||void 0===r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function qn(e){var t;let n=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Kn(e){const t=qn(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function Yn(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Gn(e){return{data:e,error:null}}function Xn(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=e,s=Fn(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},user:Object.assign({},s)},error:null}}function Jn(e){return e}const Qn=["global","local","others"];var er=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class tr{constructor(e){let{url:t="",headers:n={},fetch:r}=e;this.url=t,this.headers=n,this.fetch=Cn(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qn[0];if(Qn.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Qn.join(", ")}`);try{return await Vn(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(tn(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await Vn(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Yn})}catch(n){if(tn(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=er(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=null===n||void 0===n?void 0:n.newEmail,delete r.newEmail),await Vn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:Xn,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(tn(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Vn(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Yn})}catch(t){if(tn(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,i,o,s,a;try{const l={nextPage:null,lastPage:0,total:0},c=await Vn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(i=null===(r=null===e||void 0===e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==i?i:""},xform:Jn});if(c.error)throw c.error;const u=await c.json(),d=null!==(o=c.headers.get("x-total-count"))&&void 0!==o?o:0,h=null!==(a=null===(s=c.headers.get("link"))||void 0===s?void 0:s.split(","))&&void 0!==a?a:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l[`${n}Page`]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(tn(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){Bn(e);try{return await Vn(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Yn})}catch(t){if(tn(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Bn(e);try{return await Vn(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Yn})}catch(n){if(tn(n))return{data:{user:null},error:n};throw n}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Bn(e);try{return await Vn(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Yn})}catch(n){if(tn(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Bn(e.userId);try{const{data:t,error:n}=await Vn(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(tn(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Bn(e.userId),Bn(e.id);try{return{data:await Vn(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(tn(t))return{data:null,error:t};throw t}}}function nr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const rr=!!(globalThis&&jn()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class ir extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class or extends ir{}async function sr(e,t,n){rr&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),rr&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async r=>{if(!r){if(0===t)throw rr&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new or(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(rr)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}rr&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await n()}finally{rr&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}))}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!==typeof self&&(self.globalThis=self)}}();const ar={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Gt,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function lr(e,t,n){return await n()}const cr={};class ur{constructor(e){var t,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ur.nextInstanceID,ur.nextInstanceID+=1,this.instanceID>0&&En()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},ar),e);if(this.logDebugMessages=!!r.debug,"function"===typeof r.debug&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new tr({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Cn(r.fetch),this.lock=r.lock||lr,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:En()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=sr:this.lock=lr,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:jn()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=nr(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=nr(this.memoryStorage)),En()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=cr[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){cr[this.storageKey]=Object.assign(Object.assign({},cr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=cr[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){cr[this.storageKey]=Object.assign(Object.assign({},cr[this.storageKey]),{cachedAt:e})}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger(`GoTrueClient@${this.instanceID} (${qt}) ${(new Date).toISOString()}`,...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(r){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),En()&&this.detectSessionInUrl&&"none"!==n){const{data:r,error:i}=await this._getSessionFromURL(t,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),function(e){return tn(e)&&"AuthImplicitGrantRedirectError"===e.name}(i)){const t=null===(e=i.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:s}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",s),await this._saveSession(o),setTimeout(async()=>{"recovery"===s?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return tn(t)?{error:t}:{error:new rn("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const i=await Vn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(n=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken}},xform:qn}),{data:o,error:s}=i;if(s||!o)return{data:{user:null,session:null},error:s};const a=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(i){if(tn(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,n,r;try{let i;if("email"in e){const{email:n,password:r,options:o}=e;let s=null,a=null;"pkce"===this.flowType&&([s,a]=await In(this.storage,this.storageKey)),i=await Vn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null===o||void 0===o?void 0:o.emailRedirectTo,body:{email:n,password:r,data:null!==(t=null===o||void 0===o?void 0:o.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken},code_challenge:s,code_challenge_method:a},xform:qn})}else{if(!("phone"in e))throw new ln("You must provide either an email or phone number and a password");{const{phone:t,password:o,options:s}=e;i=await Vn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:o,data:null!==(n=null===s||void 0===s?void 0:s.data)&&void 0!==n?n:{},channel:null!==(r=null===s||void 0===s?void 0:s.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}},xform:qn})}}const{data:o,error:s}=i;if(s||!o)return{data:{user:null,session:null},error:s};const a=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(i){if(tn(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:r,options:i}=e;t=await Vn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:r,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:Kn})}else{if(!("phone"in e))throw new ln("You must provide either an email or phone number and a password");{const{phone:n,password:r,options:i}=e;t=await Vn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:r,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:Kn})}}const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r}):{data:{user:null,session:null},error:new an}}catch(t){if(tn(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(i=e.options)||void 0===i?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,n,r,i,o,s,a,l,c,u,d,h;let f,p;if("message"in e)f=e.message,p=e.signature;else{const{chain:d,wallet:h,statement:m,options:g}=e;let v;if(En())if("object"===typeof h)v=h;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");v=e.solana}else{if("object"!==typeof h||!(null===g||void 0===g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=h}const y=new URL(null!==(t=null===g||void 0===g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in v&&v.signIn){const e=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===g||void 0===g?void 0:g.signInWithSolana),{version:"1",domain:y.host,uri:y.href}),m?{statement:m}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");f="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),p=t.signature}else{if(!("signMessage"in v)||"function"!==typeof v.signMessage||!("publicKey"in v)||"object"!==typeof v||!v.publicKey||!("toBase58"in v.publicKey)||"function"!==typeof v.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=[`${y.host} wants you to sign in with your Solana account:`,v.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${y.href}`,`Issued At: ${null!==(r=null===(n=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==r?r:(new Date).toISOString()}`,...(null===(i=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===i?void 0:i.notBefore)?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...(null===(o=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===o?void 0:o.expirationTime)?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...(null===(s=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===s?void 0:s.chainId)?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...(null===(a=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===a?void 0:a.nonce)?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...(null===(l=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...(null===(u=null===(c=null===g||void 0===g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===u?void 0:u.length)?["Resources",...g.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await v.signMessage((new TextEncoder).encode(f),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:t,error:n}=await Vn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:kn(p)},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:qn});if(n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new an}}catch(m){if(tn(m))return{data:{user:null,session:null},error:m};throw m}}async _exchangeCodeForSession(e){const t=await Pn(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:i}=await Vn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:qn});if(await Ln(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!==r&&void 0!==r?r:null}),error:i}):{data:{user:null,session:null,redirectType:null},error:new an}}catch(i){if(tn(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:i,nonce:o}=e,s=await Vn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:qn}),{data:a,error:l}=s;return l?{data:{user:null,session:null},error:l}:a&&a.session&&a.user?(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:l}):{data:{user:null,session:null},error:new an}}catch(t){if(tn(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,r,i,o;try{if("email"in e){const{email:r,options:i}=e;let o=null,s=null;"pkce"===this.flowType&&([o,s]=await In(this.storage,this.storageKey));const{error:a}=await Vn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:r,data:null!==(t=null===i||void 0===i?void 0:i.data)&&void 0!==t?t:{},create_user:null===(n=null===i||void 0===i?void 0:i.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken},code_challenge:o,code_challenge_method:s},redirectTo:null===i||void 0===i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){const{phone:t,options:n}=e,{data:s,error:a}=await Vn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(r=null===n||void 0===n?void 0:n.data)&&void 0!==r?r:{},create_user:null===(i=null===n||void 0===n?void 0:n.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken},channel:null!==(o=null===n||void 0===n?void 0:n.channel)&&void 0!==o?o:"sms"}});return{data:{user:null,session:null,messageId:null===s||void 0===s?void 0:s.message_id},error:a}}throw new ln("You must provide either an email or phone number.")}catch(s){if(tn(s))return{data:{user:null,session:null},error:s};throw s}}async verifyOtp(e){var t,n;try{let r,i;"options"in e&&(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo,i=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:o,error:s}=await Vn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:qn});if(s)throw s;if(!o)throw new Error("An error occurred on token verification.");const a=o.session,l=o.user;return(null===a||void 0===a?void 0:a.access_token)&&(await this._saveSession(a),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(r){if(tn(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,n,r;try{let i=null,o=null;return"pkce"===this.flowType&&([i,o]=await In(this.storage,this.storageKey)),await Vn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(r=null===e||void 0===e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Gn})}catch(i){if(tn(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new sn;const{error:r}=await Vn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(tn(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:i}=e,{error:o}=await Vn(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},redirectTo:null===i||void 0===i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:n,type:r,options:i}=e,{data:o,error:s}=await Vn(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:null===o||void 0===o?void 0:o.message_id},error:s}}throw new ln("You must provide either an email or phone number and a type")}catch(t){if(tn(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(e){}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Pn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<Yt;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const t=await Pn(this.userStorage,this.storageKey+"-user");(null===t||void 0===t?void 0:t.user)?e.user=t.user:e.user=$n()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,n,r)=>(t||"user"!==n||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,n,r))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await Vn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Yn}):await this._useSession(async e=>{var t,n,r;const{data:i,error:o}=e;if(o)throw o;return(null===(t=i.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await Vn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(r=null===(n=i.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0,xform:Yn}):{data:{user:null},error:new sn}})}catch(t){if(tn(t))return function(e){return tn(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await Ln(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async n=>{const{data:r,error:i}=n;if(i)throw i;if(!r.session)throw new sn;const o=r.session;let s=null,a=null;"pkce"===this.flowType&&null!=e.email&&([s,a]=await In(this.storage,this.storageKey));const{data:l,error:c}=await Vn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:s,code_challenge_method:a}),jwt:o.access_token,xform:Yn});if(c)throw c;return o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(tn(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new sn;const t=Date.now()/1e3;let n=t,r=!0,i=null;const{payload:o}=An(e.access_token);if(o.exp&&(n=o.exp,r=n<=t),r){const{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};i=t}else{const{data:r,error:o}=await this._getUser(e.access_token);if(o)throw o;i={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(tn(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:r,error:i}=t;if(i)throw i;e=null!==(n=r.session)&&void 0!==n?n:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new sn;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(tn(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!En())throw new cn("No browser detected.");if(e.error||e.error_description||e.error_code)throw new cn(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new un("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new cn("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new un("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:i,refresh_token:o,expires_in:s,expires_at:a,token_type:l}=e;if(!i||!s||!o||!l)throw new cn("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(s);let d=c+u;a&&(d=parseInt(a));const h=d-c;1e3*h<=Kt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${u}s`);const f=d-u;c-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,d,c):c-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,d,c);const{data:p,error:m}=await this._getUser(i);if(m)throw m;const g={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:u,expires_at:d,refresh_token:o,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(n){if(tn(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Pn(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i)return{error:i};const o=null===(n=r.session)||void 0===n?void 0:n.access_token;if(o){const{error:t}=await this.admin.signOut(o,e);if(t&&(!function(e){return tn(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await Ln(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:r},error:i}=t;if(i)throw i;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(i){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=null;"pkce"===this.flowType&&([n,r]=await In(this.storage,this.storageKey,!0));try{return await Vn(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(tn(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(tn(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:r}=await this._useSession(async t=>{var n,r,i,o,s;const{data:a,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(i=e.options)||void 0===i?void 0:i.queryParams,skipBrowserRedirect:!0});return await Vn(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(s=null===(o=a.session)||void 0===o?void 0:o.access_token)&&void 0!==s?s:void 0})});if(r)throw r;return En()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===n||void 0===n?void 0:n.url),{data:{provider:e.provider,url:null===n||void 0===n?void 0:n.url},error:null}}catch(n){if(tn(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:i,error:o}=t;if(o)throw o;return await Vn(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(r=null===(n=i.session)||void 0===n?void 0:n.access_token)&&void 0!==r?r:void 0})})}catch(t){if(tn(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const i=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await Vn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:qn})),r=(e,t)=>{const n=200*Math.pow(2,e);return t&&hn(t)&&Date.now()+n-i<Kt},new Promise((e,t)=>{(async()=>{for(let o=0;o<1/0;o++)try{const t=await n(o);if(!r(o,null,t))return void e(t)}catch(i){if(!r(o,i))return void t(i)}})()}))}catch(i){if(this._debug(t,"error",i),tn(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(t,"end")}var n,r}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),En()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await Pn(this.storage,this.storageKey);if(i&&this.userStorage){let t=await Pn(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:i.user},await Tn(this.userStorage,this.storageKey+"-user",t)),i.user=null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:$n()}else if(i&&!i.user&&!i.user){const e=await Pn(this.storage,this.storageKey+"-user");e&&(null===e||void 0===e?void 0:e.user)?(i.user=e.user,await Ln(this.storage,this.storageKey+"-user"),await Tn(this.storage,this.storageKey,i)):i.user=$n()}if(this._debug(n,"session from storage",i),!this._isValidSession(i))return this._debug(n,"session is not valid"),void(null!==i&&await this._removeSession());const o=1e3*(null!==(t=i.expires_at)&&void 0!==t?t:1/0)-Date.now()<Yt;if(this._debug(n,`session has${o?"":" not"} expired with margin of 90000s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:e}=await this._callRefreshToken(i.refresh_token);e&&(console.error(e),hn(e)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(i.user&&!0===i.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(i.access_token);!t&&(null===e||void 0===e?void 0:e.user)?(i.user=e.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(r){console.error("Error getting user data:",r),this._debug(n,"error getting user data, skipping SIGNED_IN notification",r)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){return this._debug(n,"error",i),void console.error(i)}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new sn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new On;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new sn;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={session:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(i){if(this._debug(r,"error",i),tn(i)){const e={session:null,error:i};return hn(i)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],i=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(i){r.push(i)}});if(await Promise.all(i),r.length>0){for(let e=0;e<r.length;e+=1)console.error(r[e]);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!n&&t.user&&await Tn(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const r=Un(e);await Tn(this.storage,this.storageKey,r)}else{const e=Un(t);await Tn(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await Ln(this.storage,this.storageKey),await Ln(this.storage,this.storageKey+"-code-verifier"),await Ln(this.storage,this.storageKey+"-user"),this.userStorage&&await Ln(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&En()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Kt);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:n}}=e;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*n.expires_at-t)/Kt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),r<=3&&await this._callRefreshToken(n.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof ir))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!En()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=[`provider=${encodeURIComponent(t)}`];if((null===n||void 0===n?void 0:n.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),(null===n||void 0===n?void 0:n.scopes)&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),"pkce"===this.flowType){const[e,t]=await In(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});r.push(n.toString())}if(null===n||void 0===n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);r.push(e.toString())}return(null===n||void 0===n?void 0:n.skipBrowserRedirect)&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;return i?{data:null,error:i}:await Vn(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(tn(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:i,error:o}=t;if(o)return{data:null,error:o};const s=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:a,error:l}=await Vn(this.fetch,"POST",`${this.url}/factors`,{body:s,headers:this.headers,jwt:null===(n=null===i||void 0===i?void 0:i.session)||void 0===n?void 0:n.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(r=null===a||void 0===a?void 0:a.totp)||void 0===r?void 0:r.qr_code)&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})})}catch(t){if(tn(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:s}=await Vn(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token});return s?{data:null,error:s}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:s})})}catch(t){if(tn(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;return i?{data:null,error:i}:await Vn(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token})})}catch(t){if(tn(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(null===e||void 0===e?void 0:e.factors)||[],r=n.filter(e=>"totp"===e.factor_type&&"verified"===e.status),i=n.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:n,totp:r,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=An(r.access_token);let s=null;o.aal&&(s=o.aal);let a=s;(null!==(n=null===(t=r.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==n?n:[]).length>0&&(a="aal2");return{data:{currentLevel:s,nextLevel:a,currentAuthenticationMethods:o.amr||[]},error:null}}))}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;const n=Date.now();if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>n)return t;const{data:r,error:i}=await Vn(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return r.keys&&0!==r.keys.length?(this.jwks=r,this.jwks_cached_at=n,t=r.keys.find(t=>t.kid===e),t||null):null}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};n=e.session.access_token}const{header:r,payload:i,signature:o,raw:{header:s,payload:a}}=An(n);(null===t||void 0===t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(i.exp);const l=r.alg&&!r.alg.startsWith("HS")&&r.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(r.kid,(null===t||void 0===t?void 0:t.keys)?{keys:t.keys}:null===t||void 0===t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:i,header:r,signature:o},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(r.alg),u=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!await crypto.subtle.verify(c,u,o,function(e){const t=[];return wn(e,e=>t.push(e)),new Uint8Array(t)}(`${s}.${a}`)))throw new pn("Invalid JWT signature");return{data:{claims:i,header:r,signature:o},error:null}}catch(n){if(tn(n))return{data:null,error:n};throw n}}}ur.nextInstanceID=0;const dr=ur;class hr extends dr{constructor(e){super(e)}}var fr=function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}l((r=r.apply(e,t||[])).next())})};class pr{constructor(e,t,n){var r,i,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const s=(a=e).endsWith("/")?a:a+"/";var a;const l=new URL(s);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u=function(e,t){var n,r;const{db:i,auth:o,realtime:s,global:a}=e,{db:l,auth:c,realtime:u,global:d}=t,h={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),o),realtime:Object.assign(Object.assign({},u),s),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},null!==(n=null===d||void 0===d?void 0:d.headers)&&void 0!==n?n:{}),null!==(r=null===a||void 0===a?void 0:a.headers)&&void 0!==r?r:{})}),accessToken:()=>Vt(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!==n&&void 0!==n?n:{},{db:Bt,realtime:Ut,auth:Object.assign(Object.assign({},$t),{storageKey:c}),global:Dt});this.storageKey=null!==(r=u.auth.storageKey)&&void 0!==r?r:"",this.headers=null!==(i=u.global.headers)&&void 0!==i?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(o=u.auth)&&void 0!==o?o:{},this.headers,u.global.fetch),this.fetch=Wt(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new Ae(new URL("rest/v1",l).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new It(this.storageUrl.href,this.headers,this.fetch,null===n||void 0===n?void 0:n.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new Le(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,n)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return fr(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null})}_initSupabaseAuthClient(e,t,n){let{autoRefreshToken:r,persistSession:i,detectSessionInUrl:o,storage:s,storageKey:a,flowType:l,lock:c,debug:u}=e;const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new hr({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),t),storageKey:a,autoRefreshToken:r,persistSession:i,detectSessionInUrl:o,storage:s,flowType:l,lock:c,debug:u,fetch:n,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new ht(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=n}}(function(){if("undefined"!==typeof window||"undefined"===typeof process||void 0===process.version||null===process.version)return!1;const e=process.version.match(/^v(\d+)\./);return!!e&&parseInt(e[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const mr=new pr("https://yueoqcjicffzgrafwmhh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl1ZW9xY2ppY2ZmemdyYWZ3bWhoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA0MDA2OTcsImV4cCI6MjA2NTk3NjY5N30.YeheD11-9oXT3PZz_PNoe0xy-_Cu6EfZYQSKqU9H0k4",gr);var gr,vr=n(579);function yr(e){let{onValid:t=()=>{}}=e;const[n,i]=(0,r.useState)(""),[o,s]=(0,r.useState)("");return(0,vr.jsxs)("div",{className:"p-4",children:[(0,vr.jsx)("input",{type:"text",value:n,onChange:e=>{const n=e.target.value;i(n),n.trim().length>=3?(s(""),t(n)):s("Invalid ID. Must be at least 3 characters.")},placeholder:"Enter wallet ID",className:"w-full border p-2 rounded-md shadow-sm text-sm"}),o&&(0,vr.jsx)("p",{className:"text-red-500 text-sm mt-1",children:o})]})}function _r(e){let{reports:t}=e;const[n,i]=(0,r.useState)(!0),o=[...t].sort((e,t)=>{const r=new Date(e.date),i=new Date(t.date);return n?r-i:i-r}),s=o.reduce((e,t)=>{const n=t.date||"Unknown Date";return(e[n]=e[n]||[]).push(t),e},{});return(0,vr.jsxs)("div",{className:"mt-8 px-4 md:px-8",children:[(0,vr.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,vr.jsx)("h2",{className:"text-xl font-bold text-center mb-4",children:"Incident Timeline"}),(0,vr.jsxs)("button",{className:"text-blue-600 underline",onClick:()=>i(!n),children:["Sort: ",n?"Oldest First":"Newest First"]})]}),0===o.length?(0,vr.jsx)("p",{className:"text-gray-500",children:"No reports available."}):Object.keys(s).map(e=>(0,vr.jsxs)("div",{className:"mb-6",children:[(0,vr.jsx)("h4",{className:"text-md font-semibold text-gray-700 mb-2",children:e}),(0,vr.jsx)("ul",{className:"space-y-3",children:s[e].map((e,t)=>(0,vr.jsx)("li",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center  bg-white p-4 rounded-md shadow-md border  hover:bg-gray-100 transition duration-200 ease-in-out",children:(0,vr.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between w-full",children:[(0,vr.jsxs)("div",{children:[(0,vr.jsxs)("p",{className:"text-sm text-gray-500",children:["Wallet:"," ",e.wallet?`${e.wallet.slice(0,6)}...${e.wallet.slice(-4)}`:"N/A"]}),(0,vr.jsxs)("p",{className:"text-xs text-gray-400",children:["Risk: ",(e.risk||"unknown").toUpperCase()]}),(0,vr.jsxs)("p",{className:"text-xs text-blue-600",children:["Txn Hash:"," ",(0,vr.jsx)("a",{href:`https://etherscan.io/tx/${e.txnHash||"0x123456789abcdef"}`,target:"_blank",rel:"noopener noreferrer",className:"underline",children:e.txnHash?`${e.txnHash.slice(0,6)}...${e.txnHash.slice(-4)}`:"0x1234...cdef"})]}),"contract"===e.source&&(0,vr.jsx)("p",{className:"text-purple-600 text-sm mt-1",children:"(Flagged by Smart Contract)"}),"admin"===e.source&&(0,vr.jsx)("p",{className:"text-red-600 text-sm mt-1",children:"(Manual Escalation)"})]}),(0,vr.jsx)("div",{className:"text-sm px-3 py-1 rounded-full font-bold text-white mt-2 sm:mt-0",style:{backgroundColor:"high"===e.risk?"red":"medium"===e.risk?"orange":"low"===e.risk?"green":"gray"},children:(e.risk||"unknown").toUpperCase()})]})},t))})]},e))]})}function br(e,t){return function(){return e.apply(t,arguments)}}const{toString:xr}=Object.prototype,{getPrototypeOf:wr}=Object,{iterator:Sr,toStringTag:kr}=Symbol,Er=(Nr=Object.create(null),e=>{const t=xr.call(e);return Nr[t]||(Nr[t]=t.slice(8,-1).toLowerCase())});var Nr;const jr=e=>(e=e.toLowerCase(),t=>Er(t)===e),Cr=e=>t=>typeof t===e,{isArray:Tr}=Array,Pr=Cr("undefined");function Lr(e){return null!==e&&!Pr(e)&&null!==e.constructor&&!Pr(e.constructor)&&Mr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Or=jr("ArrayBuffer");const Ar=Cr("string"),Mr=Cr("function"),Rr=Cr("number"),Ir=e=>null!==e&&"object"===typeof e,zr=e=>{if("object"!==Er(e))return!1;const t=wr(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(kr in e)&&!(Sr in e)},Dr=jr("Date"),Br=jr("File"),$r=jr("Blob"),Ur=jr("FileList"),Fr=jr("URLSearchParams"),[Hr,Zr,Wr,Vr]=["ReadableStream","Request","Response","Headers"].map(jr);function qr(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Tr(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{if(Lr(e))return;const r=i?Object.getOwnPropertyNames(e):Object.keys(e),o=r.length;let s;for(n=0;n<o;n++)s=r[n],t.call(null,e[s],s,e)}}function Kr(e,t){if(Lr(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const Yr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,Gr=e=>!Pr(e)&&e!==Yr;const Xr=(Jr="undefined"!==typeof Uint8Array&&wr(Uint8Array),e=>Jr&&e instanceof Jr);var Jr;const Qr=jr("HTMLFormElement"),ei=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),ti=jr("RegExp"),ni=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};qr(n,(n,i)=>{let o;!1!==(o=t(n,i,e))&&(r[i]=o||n)}),Object.defineProperties(e,r)};const ri=jr("AsyncFunction"),ii=((e,t)=>{return e?setImmediate:t?(n=`axios@${Math.random()}`,r=[],Yr.addEventListener("message",e=>{let{source:t,data:i}=e;t===Yr&&i===n&&r.length&&r.shift()()},!1),e=>{r.push(e),Yr.postMessage(n,"*")}):e=>setTimeout(e);var n,r})("function"===typeof setImmediate,Mr(Yr.postMessage)),oi="undefined"!==typeof queueMicrotask?queueMicrotask.bind(Yr):"undefined"!==typeof process&&process.nextTick||ii,si={isArray:Tr,isArrayBuffer:Or,isBuffer:Lr,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||Mr(e.append)&&("formdata"===(t=Er(e))||"object"===t&&Mr(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Or(e.buffer),t},isString:Ar,isNumber:Rr,isBoolean:e=>!0===e||!1===e,isObject:Ir,isPlainObject:zr,isEmptyObject:e=>{if(!Ir(e)||Lr(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},isReadableStream:Hr,isRequest:Zr,isResponse:Wr,isHeaders:Vr,isUndefined:Pr,isDate:Dr,isFile:Br,isBlob:$r,isRegExp:ti,isFunction:Mr,isStream:e=>Ir(e)&&Mr(e.pipe),isURLSearchParams:Fr,isTypedArray:Xr,isFileList:Ur,forEach:qr,merge:function e(){const{caseless:t}=Gr(this)&&this||{},n={},r=(r,i)=>{const o=t&&Kr(n,i)||i;zr(n[o])&&zr(r)?n[o]=e(n[o],r):zr(r)?n[o]=e({},r):Tr(r)?n[o]=r.slice():n[o]=r};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&qr(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return qr(t,(t,r)=>{n&&Mr(t)?e[r]=br(t,n):e[r]=t},{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,o,s;const a={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)s=i[o],r&&!r(s,e,t)||a[s]||(t[s]=e[s],a[s]=!0);e=!1!==n&&wr(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Er,kindOfTest:jr,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(Tr(e))return e;let t=e.length;if(!Rr(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Sr]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Qr,hasOwnProperty:ei,hasOwnProp:ei,reduceDescriptors:ni,freezeMethods:e=>{ni(e,(t,n)=>{if(Mr(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];Mr(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach(e=>{n[e]=!0})};return Tr(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Kr,global:Yr,isContextDefined:Gr,isSpecCompliantForm:function(e){return!!(e&&Mr(e.append)&&"FormData"===e[kr]&&e[Sr])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(Ir(e)){if(t.indexOf(e)>=0)return;if(Lr(e))return e;if(!("toJSON"in e)){t[r]=e;const i=Tr(e)?[]:{};return qr(e,(e,t)=>{const o=n(e,r+1);!Pr(o)&&(i[t]=o)}),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:ri,isThenable:e=>e&&(Ir(e)||Mr(e))&&Mr(e.then)&&Mr(e.catch),setImmediate:ii,asap:oi,isIterable:e=>null!=e&&Mr(e[Sr])};function ai(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}si.inherits(ai,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:si.toJSONObject(this.config),code:this.code,status:this.status}}});const li=ai.prototype,ci={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{ci[e]={value:e}}),Object.defineProperties(ai,ci),Object.defineProperty(li,"isAxiosError",{value:!0}),ai.from=(e,t,n,r,i,o)=>{const s=Object.create(li);return si.toFlatObject(e,s,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),ai.call(s,e.message,t,n,r,i),s.cause=e,s.name=e.name,o&&Object.assign(s,o),s};const ui=ai;function di(e){return si.isPlainObject(e)||si.isArray(e)}function hi(e){return si.endsWith(e,"[]")?e.slice(0,-2):e}function fi(e,t,n){return e?e.concat(t).map(function(e,t){return e=hi(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}const pi=si.toFlatObject(si,{},null,function(e){return/^is[A-Z]/.test(e)});const mi=function(e,t,n){if(!si.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=si.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!si.isUndefined(t[e])})).metaTokens,i=n.visitor||c,o=n.dots,s=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&si.isSpecCompliantForm(t);if(!si.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(si.isDate(e))return e.toISOString();if(si.isBoolean(e))return e.toString();if(!a&&si.isBlob(e))throw new ui("Blob is not supported. Use a Buffer instead.");return si.isArrayBuffer(e)||si.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){let a=e;if(e&&!i&&"object"===typeof e)if(si.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(si.isArray(e)&&function(e){return si.isArray(e)&&!e.some(di)}(e)||(si.isFileList(e)||si.endsWith(n,"[]"))&&(a=si.toArray(e)))return n=hi(n),a.forEach(function(e,r){!si.isUndefined(e)&&null!==e&&t.append(!0===s?fi([n],r,o):null===s?n:n+"[]",l(e))}),!1;return!!di(e)||(t.append(fi(i,n,o),l(e)),!1)}const u=[],d=Object.assign(pi,{defaultVisitor:c,convertValue:l,isVisitable:di});if(!si.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!si.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),si.forEach(n,function(n,o){!0===(!(si.isUndefined(n)||null===n)&&i.call(t,n,si.isString(o)?o.trim():o,r,d))&&e(n,r?r.concat(o):[o])}),u.pop()}}(e),t};function gi(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function vi(e,t){this._pairs=[],e&&mi(e,this,t)}const yi=vi.prototype;yi.append=function(e,t){this._pairs.push([e,t])},yi.toString=function(e){const t=e?function(t){return e.call(this,t,gi)}:gi;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const _i=vi;function bi(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function xi(e,t,n){if(!t)return e;const r=n&&n.encode||bi;si.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let o;if(o=i?i(t,n):si.isURLSearchParams(t)?t.toString():new _i(t,n).toString(r),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}const wi=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){si.forEach(this.handlers,function(t){null!==t&&e(t)})}},Si={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ki={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:_i,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Ei="undefined"!==typeof window&&"undefined"!==typeof document,Ni="object"===typeof navigator&&navigator||void 0,ji=Ei&&(!Ni||["ReactNative","NativeScript","NS"].indexOf(Ni.product)<0),Ci="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Ti=Ei&&window.location.href||"http://localhost",Pi={...e,...ki};const Li=function(e){function t(e,n,r,i){let o=e[i++];if("__proto__"===o)return!0;const s=Number.isFinite(+o),a=i>=e.length;if(o=!o&&si.isArray(r)?r.length:o,a)return si.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!s;r[o]&&si.isObject(r[o])||(r[o]=[]);return t(e,n,r[o],i)&&si.isArray(r[o])&&(r[o]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}(r[o])),!s}if(si.isFormData(e)&&si.isFunction(e.entries)){const n={};return si.forEachEntry(e,(e,r)=>{t(function(e){return si.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),r,n,0)}),n}return null};const Oi={transitional:Si,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=si.isObject(e);i&&si.isHTMLForm(e)&&(e=new FormData(e));if(si.isFormData(e))return r?JSON.stringify(Li(e)):e;if(si.isArrayBuffer(e)||si.isBuffer(e)||si.isStream(e)||si.isFile(e)||si.isBlob(e)||si.isReadableStream(e))return e;if(si.isArrayBufferView(e))return e.buffer;if(si.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return mi(e,new Pi.classes.URLSearchParams,{visitor:function(e,t,n,r){return Pi.isNode&&si.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...t})}(e,this.formSerializer).toString();if((o=si.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return mi(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(si.isString(e))try{return(t||JSON.parse)(e),si.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Oi.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(si.isResponse(e)||si.isReadableStream(e))return e;if(e&&si.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(i){if(n){if("SyntaxError"===i.name)throw ui.from(i,ui.ERR_BAD_RESPONSE,this,null,this.response);throw i}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Pi.classes.FormData,Blob:Pi.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};si.forEach(["delete","get","head","post","put","patch"],e=>{Oi.headers[e]={}});const Ai=Oi,Mi=si.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ri=Symbol("internals");function Ii(e){return e&&String(e).trim().toLowerCase()}function zi(e){return!1===e||null==e?e:si.isArray(e)?e.map(zi):String(e)}function Di(e,t,n,r,i){return si.isFunction(r)?r.call(this,t,n):(i&&(t=n),si.isString(t)?si.isString(r)?-1!==t.indexOf(r):si.isRegExp(r)?r.test(t):void 0:void 0)}class Bi{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=Ii(t);if(!i)throw new Error("header name must be a non-empty string");const o=si.findKey(r,i);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||t]=zi(e))}const o=(e,t)=>si.forEach(e,(e,n)=>i(e,n,t));if(si.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(si.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))o((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach(function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&Mi[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t})(e),t);else if(si.isObject(e)&&si.isIterable(e)){let n,r,i={};for(const t of e){if(!si.isArray(t))throw TypeError("Object iterator must return a key-value pair");i[r=t[0]]=(n=i[r])?si.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}o(i,t)}else null!=e&&i(t,e,n);return this}get(e,t){if(e=Ii(e)){const n=si.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(si.isFunction(t))return t.call(this,e,n);if(si.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ii(e)){const n=si.findKey(this,e);return!(!n||void 0===this[n]||t&&!Di(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=Ii(e)){const i=si.findKey(n,e);!i||t&&!Di(0,n[i],i,t)||(delete n[i],r=!0)}}return si.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!Di(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return si.forEach(this,(r,i)=>{const o=si.findKey(n,i);if(o)return t[o]=zi(r),void delete t[i];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}(i):String(i).trim();s!==i&&delete t[i],t[s]=zi(r),n[s]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return si.forEach(this,(n,r)=>{null!=n&&!1!==n&&(t[r]=e&&si.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,n]=e;return t+": "+n}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[Ri]=this[Ri]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=Ii(e);t[r]||(!function(e,t){const n=si.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})})}(n,e),t[r]=!0)}return si.isArray(e)?e.forEach(r):r(e),this}}Bi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),si.reduceDescriptors(Bi.prototype,(e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}}),si.freezeMethods(Bi);const $i=Bi;function Ui(e,t){const n=this||Ai,r=t||n,i=$i.from(r.headers);let o=r.data;return si.forEach(e,function(e){o=e.call(n,o,i.normalize(),t?t.status:void 0)}),i.normalize(),o}function Fi(e){return!(!e||!e.__CANCEL__)}function Hi(e,t,n){ui.call(this,null==e?"canceled":e,ui.ERR_CANCELED,t,n),this.name="CanceledError"}si.inherits(Hi,ui,{__CANCEL__:!0});const Zi=Hi;function Wi(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new ui("Request failed with status code "+n.status,[ui.ERR_BAD_REQUEST,ui.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const Vi=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,o=0,s=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),c=r[s];i||(i=l),n[o]=a,r[o]=l;let u=s,d=0;for(;u!==o;)d+=n[u++],u%=e;if(o=(o+1)%e,o===s&&(s=(s+1)%e),l-i<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}};const qi=function(e,t){let n,r,i=0,o=1e3/t;const s=function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();i=o,n=null,r&&(clearTimeout(r),r=null),e(...t)};return[function(){const e=Date.now(),t=e-i;for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];t>=o?s(l,e):(n=l,r||(r=setTimeout(()=>{r=null,s(n)},o-t)))},()=>n&&s(n)]},Ki=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const i=Vi(50,250);return qi(n=>{const o=n.loaded,s=n.lengthComputable?n.total:void 0,a=o-r,l=i(a);r=o;e({loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:l||void 0,estimated:l&&s&&o<=s?(s-o)/l:void 0,event:n,lengthComputable:null!=s,[t?"download":"upload"]:!0})},n)},Yi=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Gi=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return si.asap(()=>e(...n))},Xi=Pi.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Pi.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Pi.origin),Pi.navigator&&/(msie|trident)/i.test(Pi.navigator.userAgent)):()=>!0,Ji=Pi.hasStandardBrowserEnv?{write(e,t,n,r,i,o){const s=[e+"="+encodeURIComponent(t)];si.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),si.isString(r)&&s.push("path="+r),si.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Qi(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const eo=e=>e instanceof $i?{...e}:e;function to(e,t){t=t||{};const n={};function r(e,t,n,r){return si.isPlainObject(e)&&si.isPlainObject(t)?si.merge.call({caseless:r},e,t):si.isPlainObject(t)?si.merge({},t):si.isArray(t)?t.slice():t}function i(e,t,n,i){return si.isUndefined(t)?si.isUndefined(e)?void 0:r(void 0,e,0,i):r(e,t,0,i)}function o(e,t){if(!si.isUndefined(t))return r(void 0,t)}function s(e,t){return si.isUndefined(t)?si.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,o){return o in t?r(n,i):o in e?r(void 0,n):void 0}const l={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t,n)=>i(eo(e),eo(t),0,!0)};return si.forEach(Object.keys({...e,...t}),function(r){const o=l[r]||i,s=o(e[r],t[r],r);si.isUndefined(s)&&o!==a||(n[r]=s)}),n}const no=e=>{const t=to({},e);let n,{data:r,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:s,headers:a,auth:l}=t;if(t.headers=a=$i.from(a),t.url=xi(Qi(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),si.isFormData(r))if(Pi.hasStandardBrowserEnv||Pi.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(n=a.getContentType())){const[e,...t]=n?n.split(";").map(e=>e.trim()).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(Pi.hasStandardBrowserEnv&&(i&&si.isFunction(i)&&(i=i(t)),i||!1!==i&&Xi(t.url))){const e=o&&s&&Ji.read(s);e&&a.set(o,e)}return t},ro="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){const r=no(e);let i=r.data;const o=$i.from(r.headers).normalize();let s,a,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:f}=r;function p(){c&&c(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(s),r.signal&&r.signal.removeEventListener("abort",s)}let m=new XMLHttpRequest;function g(){if(!m)return;const r=$i.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());Wi(function(e){t(e),p()},function(e){n(e),p()},{data:d&&"text"!==d&&"json"!==d?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m}),m=null}m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new ui("Request aborted",ui.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new ui("Network Error",ui.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const i=r.transitional||Si;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new ui(t,i.clarifyTimeoutError?ui.ETIMEDOUT:ui.ECONNABORTED,e,m)),m=null},void 0===i&&o.setContentType(null),"setRequestHeader"in m&&si.forEach(o.toJSON(),function(e,t){m.setRequestHeader(t,e)}),si.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),d&&"json"!==d&&(m.responseType=r.responseType),f&&([l,u]=Ki(f,!0),m.addEventListener("progress",l)),h&&m.upload&&([a,c]=Ki(h),m.upload.addEventListener("progress",a),m.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(s=t=>{m&&(n(!t||t.type?new Zi(null,e,m):t),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(s),r.signal&&(r.signal.aborted?s():r.signal.addEventListener("abort",s)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);v&&-1===Pi.protocols.indexOf(v)?n(new ui("Unsupported protocol "+v+":",ui.ERR_BAD_REQUEST,e)):m.send(i||null)})},io=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const i=function(e){if(!n){n=!0,s();const t=e instanceof Error?e:this.reason;r.abort(t instanceof ui?t:new Zi(t instanceof Error?t.message:t))}};let o=t&&setTimeout(()=>{o=null,i(new ui(`timeout ${t} of ms exceeded`,ui.ETIMEDOUT))},t);const s=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)}),e=null)};e.forEach(e=>e.addEventListener("abort",i));const{signal:a}=r;return a.unsubscribe=()=>si.asap(s),a}},oo=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},so=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},ao=(e,t,n,r)=>{const i=async function*(e,t){for await(const n of so(e))yield*oo(n,t)}(e,t);let o,s=0,a=e=>{o||(o=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await i.next();if(t)return a(),void e.close();let o=r.byteLength;if(n){let e=s+=o;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw a(t),t}},cancel:e=>(a(e),i.return())},{highWaterMark:2})},lo="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,co=lo&&"function"===typeof ReadableStream,uo=lo&&("function"===typeof TextEncoder?(ho=new TextEncoder,e=>ho.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var ho;const fo=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(i){return!1}},po=co&&fo(()=>{let e=!1;const t=new Request(Pi.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),mo=co&&fo(()=>si.isReadableStream(new Response("").body)),go={stream:mo&&(e=>e.body)};var vo;lo&&(vo=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!go[e]&&(go[e]=si.isFunction(vo[e])?t=>t[e]():(t,n)=>{throw new ui(`Response type '${e}' is not supported`,ui.ERR_NOT_SUPPORT,n)})}));const yo=async(e,t)=>{const n=si.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(si.isBlob(e))return e.size;if(si.isSpecCompliantForm(e)){const t=new Request(Pi.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return si.isArrayBufferView(e)||si.isArrayBuffer(e)?e.byteLength:(si.isURLSearchParams(e)&&(e+=""),si.isString(e)?(await uo(e)).byteLength:void 0)})(t):n},_o=lo&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:o,timeout:s,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:h}=no(e);c=c?(c+"").toLowerCase():"text";let f,p=io([i,o&&o.toAbortSignal()],s);const m=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let g;try{if(l&&po&&"get"!==n&&"head"!==n&&0!==(g=await yo(u,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(si.isFormData(r)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=Yi(g,Ki(Gi(l)));r=ao(n.body,65536,e,t)}}si.isString(d)||(d=d?"include":"omit");const i="credentials"in Request.prototype;f=new Request(t,{...h,signal:p,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:i?d:void 0});let o=await fetch(f,h);const s=mo&&("stream"===c||"response"===c);if(mo&&(a||s&&m)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=o[t]});const t=si.toFiniteNumber(o.headers.get("content-length")),[n,r]=a&&Yi(t,Ki(Gi(a),!0))||[];o=new Response(ao(o.body,65536,n,()=>{r&&r(),m&&m()}),e)}c=c||"text";let v=await go[si.findKey(go,c)||"text"](o,e);return!s&&m&&m(),await new Promise((t,n)=>{Wi(t,n,{data:v,headers:$i.from(o.headers),status:o.status,statusText:o.statusText,config:e,request:f})})}catch(v){if(m&&m(),v&&"TypeError"===v.name&&/Load failed|fetch/i.test(v.message))throw Object.assign(new ui("Network Error",ui.ERR_NETWORK,e,f),{cause:v.cause||v});throw ui.from(v,v&&v.code,e,f)}}),bo={http:null,xhr:ro,fetch:_o};si.forEach(bo,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}});const xo=e=>`- ${e}`,wo=e=>si.isFunction(e)||null===e||!1===e,So=e=>{e=si.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let o=0;o<t;o++){let t;if(n=e[o],r=n,!wo(n)&&(r=bo[(t=String(n)).toLowerCase()],void 0===r))throw new ui(`Unknown adapter '${t}'`);if(r)break;i[t||"#"+o]=r}if(!r){const e=Object.entries(i).map(e=>{let[t,n]=e;return`adapter ${t} `+(!1===n?"is not supported by the environment":"is not available in the build")});let n=t?e.length>1?"since :\n"+e.map(xo).join("\n"):" "+xo(e[0]):"as no adapter specified";throw new ui("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function ko(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Zi(null,e)}function Eo(e){ko(e),e.headers=$i.from(e.headers),e.data=Ui.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return So(e.adapter||Ai.adapter)(e).then(function(t){return ko(e),t.data=Ui.call(e,e.transformResponse,t),t.headers=$i.from(t.headers),t},function(t){return Fi(t)||(ko(e),t&&t.response&&(t.response.data=Ui.call(e,e.transformResponse,t.response),t.response.headers=$i.from(t.response.headers))),Promise.reject(t)})}const No="1.11.0",jo={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{jo[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Co={};jo.transitional=function(e,t,n){function r(e,t){return"[Axios v"+No+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,o)=>{if(!1===e)throw new ui(r(i," has been removed"+(t?" in "+t:"")),ui.ERR_DEPRECATED);return t&&!Co[i]&&(Co[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,o)}},jo.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};const To={assertOptions:function(e,t,n){if("object"!==typeof e)throw new ui("options must be an object",ui.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],s=t[o];if(s){const t=e[o],n=void 0===t||s(t,o,e);if(!0!==n)throw new ui("option "+o+" must be "+n,ui.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new ui("Unknown option "+o,ui.ERR_BAD_OPTION)}},validators:jo},Po=To.validators;class Lo{constructor(e){this.defaults=e||{},this.interceptors={request:new wi,response:new wi}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(r){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=to(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&To.assertOptions(n,{silentJSONParsing:Po.transitional(Po.boolean),forcedJSONParsing:Po.transitional(Po.boolean),clarifyTimeoutError:Po.transitional(Po.boolean)},!1),null!=r&&(si.isFunction(r)?t.paramsSerializer={serialize:r}:To.assertOptions(r,{encode:Po.function,serialize:Po.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),To.assertOptions(t,{baseUrl:Po.spelling("baseURL"),withXsrfToken:Po.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&si.merge(i.common,i[t.method]);i&&si.forEach(["delete","get","head","post","put","patch","common"],e=>{delete i[e]}),t.headers=$i.concat(o,i);const s=[];let a=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,s.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let u,d=0;if(!a){const e=[Eo.bind(this),void 0];for(e.unshift(...s),e.push(...l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=s.length;let h=t;for(d=0;d<u;){const e=s[d++],t=s[d++];try{h=e(h)}catch(f){t.call(this,f);break}}try{c=Eo.call(this,h)}catch(f){return Promise.reject(f)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return xi(Qi((e=to(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}si.forEach(["delete","get","head","options"],function(e){Lo.prototype[e]=function(t,n){return this.request(to(n||{},{method:e,url:t,data:(n||{}).data}))}}),si.forEach(["post","put","patch"],function(e){function t(t){return function(n,r,i){return this.request(to(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Lo.prototype[e]=t(),Lo.prototype[e+"Form"]=t(!0)});const Oo=Lo;class Ao{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const r=new Promise(e=>{n.subscribe(e),t=e}).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e(function(e,r,i){n.reason||(n.reason=new Zi(e,r,i),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Ao(function(t){e=t}),cancel:e}}}const Mo=Ao;const Ro={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ro).forEach(e=>{let[t,n]=e;Ro[n]=t});const Io=Ro;const zo=function e(t){const n=new Oo(t),r=br(Oo.prototype.request,n);return si.extend(r,Oo.prototype,n,{allOwnKeys:!0}),si.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(to(t,n))},r}(Ai);zo.Axios=Oo,zo.CanceledError=Zi,zo.CancelToken=Mo,zo.isCancel=Fi,zo.VERSION=No,zo.toFormData=mi,zo.AxiosError=ui,zo.Cancel=zo.CanceledError,zo.all=function(e){return Promise.all(e)},zo.spread=function(e){return function(t){return e.apply(null,t)}},zo.isAxiosError=function(e){return si.isObject(e)&&!0===e.isAxiosError},zo.mergeConfig=to,zo.AxiosHeaders=$i,zo.formToJSON=e=>Li(si.isHTMLForm(e)?new FormData(e):e),zo.getAdapter=So,zo.HttpStatusCode=Io,zo.default=zo;const Do=zo,Bo=e=>{let{caseId:t,entity:n,onUploadSuccess:i,onUploadError:o}=e;const[s,a]=(0,r.useState)(null),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)(""),[h,f]=(0,r.useState)("medium"),[p,m]=(0,r.useState)(!1),[g,v]=(0,r.useState)(null),[y,_]=(0,r.useState)(!1),b=(0,r.useRef)(null),x=e=>e?e.size>52428800?{valid:!1,error:"File size must be less than 50MB"}:{valid:!0}:{valid:!1,error:"No file selected"},w=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?_(!0):"dragleave"===e.type&&_(!1)},S="border-2 border-dashed rounded-lg p-6 text-center transition-colors "+(y?"border-blue-400 bg-blue-50":s?"border-green-400 bg-green-50":"border-gray-300 bg-gray-50 hover:border-gray-400"),k="w-full py-2 px-4 rounded-md text-white font-medium transition-colors "+(!s||p?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700");return(0,vr.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[(0,vr.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"\ud83d\udcce Upload Evidence"}),(0,vr.jsxs)("div",{className:S,onDragEnter:w,onDragLeave:w,onDragOver:w,onDrop:e=>{if(e.preventDefault(),e.stopPropagation(),_(!1),e.dataTransfer.files&&e.dataTransfer.files[0]){const t=e.dataTransfer.files[0],n=x(t);n.valid?(a(t),v(null)):null===o||void 0===o||o(n.error)}},children:[s?(0,vr.jsxs)("div",{className:"space-y-2",children:[(0,vr.jsx)("div",{className:"text-green-600 text-lg",children:"\u2705"}),(0,vr.jsx)("p",{className:"text-sm font-medium text-gray-700",children:s.name}),(0,vr.jsx)("p",{className:"text-xs text-gray-500",children:(e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]})(s.size)}),(0,vr.jsx)("button",{onClick:()=>{a(null),v(null),b.current&&(b.current.value="")},className:"text-red-600 hover:text-red-800 text-sm underline",children:"Remove file"})]}):(0,vr.jsxs)("div",{className:"space-y-2",children:[(0,vr.jsx)("div",{className:"text-gray-400 text-3xl",children:"\ud83d\udcc1"}),(0,vr.jsxs)("p",{className:"text-gray-600",children:["Drag and drop your evidence file here, or"," ",(0,vr.jsx)("button",{onClick:()=>{var e;return null===(e=b.current)||void 0===e?void 0:e.click()},className:"text-blue-600 hover:text-blue-800 underline",children:"browse"})]}),(0,vr.jsx)("p",{className:"text-xs text-gray-500",children:"Supported: Any file type including ZIP, PDF, Images, Documents, Videos, Audio (Max 50MB)"})]}),(0,vr.jsx)("input",{ref:b,type:"file",onChange:e=>{if(e.target.files&&e.target.files[0]){const t=e.target.files[0],n=x(t);n.valid?(a(t),v(null)):null===o||void 0===o||o(n.error)}},accept:"*/*",className:"hidden"})]}),(0,vr.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,vr.jsxs)("div",{children:[(0,vr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,vr.jsx)("textarea",{value:l,onChange:e=>c(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md text-sm",placeholder:"Describe this evidence...",rows:"2"})]}),(0,vr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,vr.jsxs)("div",{children:[(0,vr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags (comma-separated)"}),(0,vr.jsx)("input",{type:"text",value:u,onChange:e=>d(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md text-sm",placeholder:"invoice, suspicious, transaction"})]}),(0,vr.jsxs)("div",{children:[(0,vr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Risk Level"}),(0,vr.jsxs)("select",{value:h,onChange:e=>f(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md text-sm",children:[(0,vr.jsx)("option",{value:"low",children:"Low Risk"}),(0,vr.jsx)("option",{value:"medium",children:"Medium Risk"}),(0,vr.jsx)("option",{value:"high",children:"High Risk"})]})]})]}),(0,vr.jsx)("button",{onClick:async()=>{if(s)if(t&&n){m(!0),v(null);try{const e=new FormData;e.append("evidenceFile",s),e.append("caseId",t),e.append("entity",n),e.append("description",l),e.append("tags",u),e.append("riskLevel",h);const r=(void 0).VITE_BACKEND_URL,o=localStorage.getItem("authToken"),p=await Do.post(`${r}/api/evidence/upload`,e,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${o}`}});v(p.data),null===i||void 0===i||i(p.data),a(null),c(""),d(""),f("medium"),b.current&&(b.current.value="")}catch(p){var e,r;console.error("Error uploading evidence:",p);const t=(null===(e=p.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.error)||"Failed to upload evidence";null===o||void 0===o||o(t)}finally{m(!1)}}else null===o||void 0===o||o("Case ID and entity are required");else null===o||void 0===o||o("Please select a file")},disabled:!s||p,className:k,children:p?"\ud83d\udd04 Uploading...":"\ud83d\udce4 Upload Evidence"})]}),g&&(0,vr.jsxs)("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-md",children:[(0,vr.jsx)("h4",{className:"text-green-800 font-medium mb-2",children:"\u2705 Evidence Uploaded Successfully!"}),(0,vr.jsxs)("div",{className:"text-sm text-green-700 space-y-1",children:[(0,vr.jsxs)("p",{children:[(0,vr.jsx)("strong",{children:"File Hash:"})," ",g.evidence.fileHash.substring(0,16),"..."]}),(0,vr.jsxs)("p",{children:[(0,vr.jsx)("strong",{children:"IPFS Hash:"})," ",g.evidence.ipfsHash]}),(0,vr.jsxs)("p",{children:[(0,vr.jsx)("strong",{children:"Blockchain Tx:"})," ",g.blockchain.txHash.substring(0,16),"..."]}),(0,vr.jsxs)("p",{children:[(0,vr.jsx)("strong",{children:"Block Number:"})," ",g.blockchain.blockNumber]}),(0,vr.jsxs)("p",{children:[(0,vr.jsx)("strong",{children:"Timestamp:"})," ",new Date(g.evidence.uploadedAt).toLocaleString()]})]})]})]})};function $o(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=$o(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}const Uo=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=$o(e))&&(r&&(r+=" "),r+=t);return r};var Fo=n(950);function Ho(){return Ho=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ho.apply(this,arguments)}function Zo(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function Wo(e){return"number"===typeof e&&!isNaN(e)}function Vo(e){return"boolean"===typeof e}function qo(e){return"string"===typeof e}function Ko(e){return"function"===typeof e}function Yo(e){return qo(e)||Ko(e)?e:null}function Go(e){return 0===e||e}var Xo=!("undefined"===typeof window||!window.document||!window.document.createElement);function Jo(e){return(0,r.isValidElement)(e)||qo(e)||Ko(e)||Wo(e)}var Qo={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},es={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"};function ts(e){var t=e.enter,n=e.exit,i=e.appendPosition,o=void 0!==i&&i,s=e.collapse,a=void 0===s||s,l=e.collapseDuration,c=void 0===l?300:l;return function(e){var i=e.children,s=e.position,l=e.preventExitTransition,u=e.done,d=e.nodeRef,h=e.isIn,f=o?t+"--"+s:t,p=o?n+"--"+s:n,m=(0,r.useRef)(),g=(0,r.useRef)(0);function v(e){if(e.target===d.current){var t=d.current;t.dispatchEvent(new Event("d")),t.removeEventListener("animationend",v),t.removeEventListener("animationcancel",v),0===g.current&&(t.className=m.current)}}function y(){var e=d.current;e.removeEventListener("animationend",y),a?function(e,t,n){void 0===n&&(n=300);var r=e.scrollHeight,i=e.style;requestAnimationFrame(function(){i.minHeight="initial",i.height=r+"px",i.transition="all "+n+"ms",requestAnimationFrame(function(){i.height="0",i.padding="0",i.margin="0",setTimeout(t,n)})})}(e,u,c):u()}return(0,r.useLayoutEffect)(function(){!function(){var e=d.current;m.current=e.className,e.className+=" "+f,e.addEventListener("animationend",v),e.addEventListener("animationcancel",v)}()},[]),(0,r.useEffect)(function(){h||(l?y():function(){g.current=1;var e=d.current;e.className+=" "+p,e.addEventListener("animationend",y)}())},[h]),r.createElement(r.Fragment,null,i)}}var ns={list:new Map,emitQueue:new Map,on:function(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off:function(e,t){if(t){var n=this.list.get(e).filter(function(e){return e!==t});return this.list.set(e,n),this}return this.list.delete(e),this},cancelEmit:function(e){var t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.list.has(e)&&this.list.get(e).forEach(function(n){var i=setTimeout(function(){n.apply(void 0,r)},0);t.emitQueue.has(e)||t.emitQueue.set(e,[]),t.emitQueue.get(e).push(i)})}},rs=["delay","staleId"];function is(e){var t=(0,r.useReducer)(function(e){return e+1},0)[1],n=(0,r.useState)([]),i=n[0],o=n[1],s=(0,r.useRef)(null),a=(0,r.useRef)(new Map).current,l=function(e){return-1!==i.indexOf(e)},c=(0,r.useRef)({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:l,getToast:function(e){return a.get(e)}}).current;function u(e){var t=e.containerId;!c.props.limit||t&&c.containerId!==t||(c.count-=c.queue.length,c.queue=[])}function d(e){o(function(t){return Go(e)?t.filter(function(t){return t!==e}):[]})}function h(){var e=c.queue.shift();p(e.toastContent,e.toastProps,e.staleId)}function f(e,n){var i=n.delay,o=n.staleId,l=Zo(n,rs);if(Jo(e)&&!function(e){return!s.current||c.props.enableMultiContainer&&e.containerId!==c.props.containerId||a.has(e.toastId)&&null==e.updateId}(l)){var u=l.toastId,f=l.updateId,m=l.data,g=c.props,v=function(){return d(u)},y=null==f;y&&c.count++;var _,b,x={toastId:u,updateId:f,isLoading:l.isLoading,theme:l.theme||g.theme,icon:null!=l.icon?l.icon:g.icon,isIn:!1,key:l.key||c.toastKey++,type:l.type,closeToast:v,closeButton:l.closeButton,rtl:g.rtl,position:l.position||g.position,transition:l.transition||g.transition,className:Yo(l.className||g.toastClassName),bodyClassName:Yo(l.bodyClassName||g.bodyClassName),style:l.style||g.toastStyle,bodyStyle:l.bodyStyle||g.bodyStyle,onClick:l.onClick||g.onClick,pauseOnHover:Vo(l.pauseOnHover)?l.pauseOnHover:g.pauseOnHover,pauseOnFocusLoss:Vo(l.pauseOnFocusLoss)?l.pauseOnFocusLoss:g.pauseOnFocusLoss,draggable:Vo(l.draggable)?l.draggable:g.draggable,draggablePercent:l.draggablePercent||g.draggablePercent,draggableDirection:l.draggableDirection||g.draggableDirection,closeOnClick:Vo(l.closeOnClick)?l.closeOnClick:g.closeOnClick,progressClassName:Yo(l.progressClassName||g.progressClassName),progressStyle:l.progressStyle||g.progressStyle,autoClose:!l.isLoading&&(_=l.autoClose,b=g.autoClose,!1===_||Wo(_)&&_>0?_:b),hideProgressBar:Vo(l.hideProgressBar)?l.hideProgressBar:g.hideProgressBar,progress:l.progress,role:l.role||g.role,deleteToast:function(){a.delete(u);var e=c.queue.length;if(c.count=Go(u)?c.count-1:c.count-c.displayedToast,c.count<0&&(c.count=0),e>0){var n=Go(u)?1:c.props.limit;if(1===e||1===n)c.displayedToast++,h();else{var r=n>e?e:n;c.displayedToast=r;for(var i=0;i<r;i++)h()}}else t()}};Ko(l.onOpen)&&(x.onOpen=l.onOpen),Ko(l.onClose)&&(x.onClose=l.onClose),x.closeButton=g.closeButton,!1===l.closeButton||Jo(l.closeButton)?x.closeButton=l.closeButton:!0===l.closeButton&&(x.closeButton=!Jo(g.closeButton)||g.closeButton);var w=e;(0,r.isValidElement)(e)&&!qo(e.type)?w=(0,r.cloneElement)(e,{closeToast:v,toastProps:x,data:m}):Ko(e)&&(w=e({closeToast:v,toastProps:x,data:m})),g.limit&&g.limit>0&&c.count>g.limit&&y?c.queue.push({toastContent:w,toastProps:x,staleId:o}):Wo(i)&&i>0?setTimeout(function(){p(w,x,o)},i):p(w,x,o)}}function p(e,t,n){var r=t.toastId;n&&a.delete(n),a.set(r,{content:e,props:t}),o(function(e){return[].concat(e,[r]).filter(function(e){return e!==n})})}return(0,r.useEffect)(function(){return c.containerId=e.containerId,ns.cancelEmit(3).on(0,f).on(1,function(e){return s.current&&d(e)}).on(5,u).emit(2,c),function(){return ns.emit(3,c)}},[]),(0,r.useEffect)(function(){c.isToastActive=l,c.displayedToast=i.length,ns.emit(4,i.length,e.containerId)},[i]),(0,r.useEffect)(function(){c.props=e}),{getToastToRender:function(t){var n=new Map,r=Array.from(a.values());return e.newestOnTop&&r.reverse(),r.forEach(function(e){var t=e.props.position;n.has(t)||n.set(t,[]),n.get(t).push(e)}),Array.from(n,function(e){return t(e[0],e[1])})},containerRef:s,isToastActive:l}}function os(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function ss(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function as(e){var t=(0,r.useState)(!1),n=t[0],i=t[1],o=(0,r.useState)(!1),s=o[0],a=o[1],l=(0,r.useRef)(null),c=(0,r.useRef)({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,u=(0,r.useRef)(e),d=e.autoClose,h=e.pauseOnHover,f=e.closeToast,p=e.onClick,m=e.closeOnClick;function g(t){if(e.draggable){c.didMove=!1,document.addEventListener("mousemove",b),document.addEventListener("mouseup",x),document.addEventListener("touchmove",b),document.addEventListener("touchend",x);var n=l.current;c.canCloseOnClick=!0,c.canDrag=!0,c.boundingRect=n.getBoundingClientRect(),n.style.transition="",c.x=os(t.nativeEvent),c.y=ss(t.nativeEvent),"x"===e.draggableDirection?(c.start=c.x,c.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(c.start=c.y,c.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent/100))}}function v(){if(c.boundingRect){var t=c.boundingRect,n=t.top,r=t.bottom,i=t.left,o=t.right;e.pauseOnHover&&c.x>=i&&c.x<=o&&c.y>=n&&c.y<=r?_():y()}}function y(){i(!0)}function _(){i(!1)}function b(t){var r=l.current;c.canDrag&&r&&(c.didMove=!0,n&&_(),c.x=os(t),c.y=ss(t),"x"===e.draggableDirection?c.delta=c.x-c.start:c.delta=c.y-c.start,c.start!==c.x&&(c.canCloseOnClick=!1),r.style.transform="translate"+e.draggableDirection+"("+c.delta+"px)",r.style.opacity=""+(1-Math.abs(c.delta/c.removalDistance)))}function x(){document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",x),document.removeEventListener("touchmove",b),document.removeEventListener("touchend",x);var t=l.current;if(c.canDrag&&c.didMove&&t){if(c.canDrag=!1,Math.abs(c.delta)>c.removalDistance)return a(!0),void e.closeToast();t.style.transition="transform 0.2s, opacity 0.2s",t.style.transform="translate"+e.draggableDirection+"(0)",t.style.opacity="1"}}(0,r.useEffect)(function(){u.current=e}),(0,r.useEffect)(function(){return l.current&&l.current.addEventListener("d",y,{once:!0}),Ko(e.onOpen)&&e.onOpen((0,r.isValidElement)(e.children)&&e.children.props),function(){var e=u.current;Ko(e.onClose)&&e.onClose((0,r.isValidElement)(e.children)&&e.children.props)}},[]),(0,r.useEffect)(function(){return e.pauseOnFocusLoss&&function(){document.hasFocus()||_();window.addEventListener("focus",y),window.addEventListener("blur",_)}(),function(){e.pauseOnFocusLoss&&(window.removeEventListener("focus",y),window.removeEventListener("blur",_))}},[e.pauseOnFocusLoss]);var w={onMouseDown:g,onTouchStart:g,onMouseUp:v,onTouchEnd:v};return d&&h&&(w.onMouseEnter=_,w.onMouseLeave=y),m&&(w.onClick=function(e){p&&p(e),c.canCloseOnClick&&f()}),{playToast:y,pauseToast:_,isRunning:n,preventExitTransition:s,toastRef:l,eventHandlers:w}}function ls(e){var t=e.closeToast,n=e.theme,i=e.ariaLabel,o=void 0===i?"close":i;return(0,r.createElement)("button",{className:"Toastify__close-button Toastify__close-button--"+n,type:"button",onClick:function(e){e.stopPropagation(),t(e)},"aria-label":o},(0,r.createElement)("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},(0,r.createElement)("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function cs(e){var t,n,i=e.delay,o=e.isRunning,s=e.closeToast,a=e.type,l=e.hide,c=e.className,u=e.style,d=e.controlledProgress,h=e.progress,f=e.rtl,p=e.isIn,m=e.theme,g=Ho({},u,{animationDuration:i+"ms",animationPlayState:o?"running":"paused",opacity:l?0:1});d&&(g.transform="scaleX("+h+")");var v=Uo("Toastify__progress-bar",d?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated","Toastify__progress-bar-theme--"+m,"Toastify__progress-bar--"+a,((t={})["Toastify__progress-bar--rtl"]=f,t)),y=Ko(c)?c({rtl:f,type:a,defaultClassName:v}):Uo(v,c),_=((n={})[d&&h>=1?"onTransitionEnd":"onAnimationEnd"]=d&&h<1?null:function(){p&&s()},n);return(0,r.createElement)("div",Object.assign({role:"progressbar","aria-hidden":l?"true":"false","aria-label":"notification timer",className:y,style:g},_))}cs.defaultProps={type:es.DEFAULT,hide:!1};var us=["theme","type"],ds=function(e){var t=e.theme,n=e.type,i=Zo(e,us);return(0,r.createElement)("svg",Object.assign({viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===t?"currentColor":"var(--toastify-icon-color-"+n+")"},i))};var hs={info:function(e){return(0,r.createElement)(ds,Object.assign({},e),(0,r.createElement)("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return(0,r.createElement)(ds,Object.assign({},e),(0,r.createElement)("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return(0,r.createElement)(ds,Object.assign({},e),(0,r.createElement)("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return(0,r.createElement)(ds,Object.assign({},e),(0,r.createElement)("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return(0,r.createElement)("div",{className:"Toastify__spinner"})}},fs=function(e){var t,n,i=as(e),o=i.isRunning,s=i.preventExitTransition,a=i.toastRef,l=i.eventHandlers,c=e.closeButton,u=e.children,d=e.autoClose,h=e.onClick,f=e.type,p=e.hideProgressBar,m=e.closeToast,g=e.transition,v=e.position,y=e.className,_=e.style,b=e.bodyClassName,x=e.bodyStyle,w=e.progressClassName,S=e.progressStyle,k=e.updateId,E=e.role,N=e.progress,j=e.rtl,C=e.toastId,T=e.deleteToast,P=e.isIn,L=e.isLoading,O=e.icon,A=e.theme,M=Uo("Toastify__toast","Toastify__toast-theme--"+A,"Toastify__toast--"+f,((t={})["Toastify__toast--rtl"]=j,t)),R=Ko(y)?y({rtl:j,position:v,type:f,defaultClassName:M}):Uo(M,y),I=!!N,z=hs[f],D={theme:A,type:f},B=z&&z(D);return!1===O?B=void 0:Ko(O)?B=O(D):(0,r.isValidElement)(O)?B=(0,r.cloneElement)(O,D):qo(O)?B=O:L&&(B=hs.spinner()),(0,r.createElement)(g,{isIn:P,done:T,position:v,preventExitTransition:s,nodeRef:a},(0,r.createElement)("div",Object.assign({id:C,onClick:h,className:R},l,{style:_,ref:a}),(0,r.createElement)("div",Object.assign({},P&&{role:E},{className:Ko(b)?b({type:f}):Uo("Toastify__toast-body",b),style:x}),B&&(0,r.createElement)("div",{className:Uo("Toastify__toast-icon",(n={},n["Toastify--animate-icon Toastify__zoom-enter"]=!L,n))},B),(0,r.createElement)("div",null,u)),function(e){if(e){var t={closeToast:m,type:f,theme:A};return Ko(e)?e(t):(0,r.isValidElement)(e)?(0,r.cloneElement)(e,t):void 0}}(c),(d||I)&&(0,r.createElement)(cs,Object.assign({},k&&!I?{key:"pb-"+k}:{},{rtl:j,theme:A,delay:d,isRunning:o,isIn:P,closeToast:m,hide:p,type:f,style:S,className:w,controlledProgress:I,progress:N}))))},ps=ts({enter:"Toastify--animate Toastify__bounce-enter",exit:"Toastify--animate Toastify__bounce-exit",appendPosition:!0}),ms=function(e){var t=is(e),n=t.getToastToRender,i=t.containerRef,o=t.isToastActive,s=e.className,a=e.style,l=e.rtl,c=e.containerId;function u(e){var t,n=Uo("Toastify__toast-container","Toastify__toast-container--"+e,((t={})["Toastify__toast-container--rtl"]=l,t));return Ko(s)?s({position:e,rtl:l,defaultClassName:n}):Uo(n,Yo(s))}return(0,r.createElement)("div",{ref:i,className:"Toastify",id:c},n(function(e,t){var n=t.length?Ho({},a):Ho({},a,{pointerEvents:"none"});return(0,r.createElement)("div",{className:u(e),style:n,key:"container-"+e},t.map(function(e){var t=e.content,n=e.props;return(0,r.createElement)(fs,Object.assign({},n,{isIn:o(n.toastId),key:"toast-"+n.key,closeButton:!0===n.closeButton?ls:n.closeButton}),t)}))}))};ms.defaultProps={position:Qo.TOP_RIGHT,transition:ps,rtl:!1,autoClose:5e3,hideProgressBar:!1,closeButton:ls,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,newestOnTop:!1,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};var gs,vs,ys,_s=new Map,bs=[],xs=!1;function ws(){return Math.random().toString(36).substring(2,9)}function Ss(e){return e&&(qo(e.toastId)||Wo(e.toastId))?e.toastId:ws()}function ks(e,t){return _s.size>0?ns.emit(0,e,t):(bs.push({content:e,options:t}),xs&&Xo&&(xs=!1,vs=document.createElement("div"),document.body.appendChild(vs),(0,Fo.render)((0,r.createElement)(ms,Object.assign({},ys)),vs))),t.toastId}function Es(e,t){return Ho({},t,{type:t&&t.type||e,toastId:Ss(t)})}function Ns(e){return function(t,n){return ks(t,Es(e,n))}}function js(e,t){return ks(e,Es(es.DEFAULT,t))}js.loading=function(e,t){return ks(e,Es(es.DEFAULT,Ho({isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1},t)))},js.promise=function(e,t,n){var r,i=t.pending,o=t.error,s=t.success;i&&(r=qo(i)?js.loading(i,n):js.loading(i.render,Ho({},n,i)));var a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=function(e,t,i){if(null!=t){var o=Ho({type:e},a,n,{data:i}),s=qo(t)?{render:t}:t;return r?js.update(r,Ho({},o,s)):js(s.render,Ho({},o,s)),i}js.dismiss(r)},c=Ko(e)?e():e;return c.then(function(e){return l("success",s,e)}).catch(function(e){return l("error",o,e)}),c},js.success=Ns(es.SUCCESS),js.info=Ns(es.INFO),js.error=Ns(es.ERROR),js.warning=Ns(es.WARNING),js.warn=js.warning,js.dark=function(e,t){return ks(e,Es(es.DEFAULT,Ho({theme:"dark"},t)))},js.dismiss=function(e){return ns.emit(1,e)},js.clearWaitingQueue=function(e){return void 0===e&&(e={}),ns.emit(5,e)},js.isActive=function(e){var t=!1;return _s.forEach(function(n){n.isToastActive&&n.isToastActive(e)&&(t=!0)}),t},js.update=function(e,t){void 0===t&&(t={}),setTimeout(function(){var n=function(e,t){var n=t.containerId,r=_s.get(n||gs);return r?r.getToast(e):null}(e,t);if(n){var r=n.props,i=n.content,o=Ho({},r,t,{toastId:t.toastId||e,updateId:ws()});o.toastId!==e&&(o.staleId=e);var s=o.render||i;delete o.render,ks(s,o)}},0)},js.done=function(e){js.update(e,{progress:1})},js.onChange=function(e){return Ko(e)&&ns.on(4,e),function(){Ko(e)&&ns.off(4,e)}},js.configure=function(e){void 0===e&&(e={}),xs=!0,ys=e},js.POSITION=Qo,js.TYPE=es,ns.on(2,function(e){gs=e.containerId||e,_s.set(gs,e),bs.forEach(function(e){ns.emit(0,e.content,e.options)}),bs=[]}).on(3,function(e){_s.delete(e.containerId||e),0===_s.size&&ns.off(0).off(1).off(5),Xo&&vs&&document.body.removeChild(vs)});const Cs=e=>{let{caseId:t,onError:n}=e;const[i,o]=(0,r.useState)([]),[s,a]=(0,r.useState)(!1),[l,c]=(0,r.useState)(null),u=async()=>{if(t){a(!0);try{const e=(void 0).VITE_BACKEND_URL,r=localStorage.getItem("authToken"),i=await Do.get(`${e}/api/evidence/trail/${t}`,{headers:{Authorization:`Bearer ${r}`}});i.data.success?o(i.data.trail):null===n||void 0===n||n("Failed to fetch evidence trail")}catch(e){console.error("Error fetching evidence trail:",e),null===n||void 0===n||n("Error fetching evidence trail")}finally{a(!1)}}};(0,r.useEffect)(()=>{u()},[t]);const d=e=>{switch(e){case"Evidence Upload":return"\ud83d\udcce";case"Flagged":return"\ud83d\udea9";case"Risk Analysis":return"\u26a0\ufe0f";case"Action Triggered":return"\u26a1";default:return"\ud83d\udcdd"}},h=e=>{switch(e){case"confirmed":return"bg-green-100 border-green-300 text-green-800";case"pending":return"bg-yellow-100 border-yellow-300 text-yellow-800";case"failed":return"bg-red-100 border-red-300 text-red-800";default:return"bg-gray-100 border-gray-300 text-gray-800"}},f=e=>new Date(e).toLocaleString(),p=e=>e?`${e.substring(0,8)}...${e.substring(e.length-8)}`:"N/A";return s?(0,vr.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,vr.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,vr.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading evidence trail..."})]}):i.length?(0,vr.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[(0,vr.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,vr.jsxs)("h3",{className:"text-lg font-semibold text-gray-800",children:["\ud83d\udd17 Evidence Chain - ",t]}),(0,vr.jsx)("button",{onClick:u,className:"text-blue-600 hover:text-blue-800 text-sm underline",children:"Refresh"})]}),(0,vr.jsxs)("div",{className:"relative",children:[i.length>1&&(0,vr.jsx)("div",{className:"absolute left-6 top-8 w-0.5 bg-gradient-to-b from-blue-300 to-green-300",style:{height:120*(i.length-1)+"px"}}),(0,vr.jsx)("div",{className:"space-y-8",children:i.map((e,t)=>(0,vr.jsxs)("div",{className:"relative flex items-start",children:[(0,vr.jsx)("div",{className:`\n                relative z-10 flex items-center justify-center w-12 h-12 rounded-full \n                border-2 font-semibold text-sm\n                ${h(e.status)}\n                ${l===t?"ring-2 ring-blue-400":""}\n              `,children:(0,vr.jsx)("span",{className:"text-lg",children:d(e.type)})}),(0,vr.jsxs)("div",{className:`\n                  ml-4 flex-1 p-4 rounded-lg border cursor-pointer transition-all\n                  ${l===t?"border-blue-400 bg-blue-50 shadow-md":"border-gray-200 bg-gray-50 hover:border-gray-300"}\n                `,onClick:()=>c(l===t?null:t),children:[(0,vr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,vr.jsxs)("h4",{className:"font-medium text-gray-800",children:["Step ",e.step,": ",e.type]}),(0,vr.jsx)("span",{className:`\n                    px-2 py-1 rounded-full text-xs font-medium\n                    ${"confirmed"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}\n                  `,children:e.status})]}),(0,vr.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),(0,vr.jsx)("div",{className:"mt-2 text-xs text-gray-500",children:f(e.timestamp)}),l===t&&(0,vr.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200 space-y-2",children:[e.hash&&(0,vr.jsxs)("div",{className:"flex justify-between",children:[(0,vr.jsx)("span",{className:"font-medium",children:"Evidence Hash:"}),(0,vr.jsx)("span",{className:"font-mono text-sm",children:p(e.hash)})]}),e.txHash&&(0,vr.jsxs)("div",{className:"flex justify-between",children:[(0,vr.jsx)("span",{className:"font-medium",children:"Transaction:"}),(0,vr.jsx)("span",{className:"font-mono text-sm",children:p(e.txHash)})]}),e.blockNumber&&(0,vr.jsxs)("div",{className:"flex justify-between",children:[(0,vr.jsx)("span",{className:"font-medium",children:"Block Number:"}),(0,vr.jsxs)("span",{className:"font-mono text-sm",children:["#",e.blockNumber]})]})]})]})]},t))})]}),(0,vr.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[(0,vr.jsx)("h4",{className:"font-medium text-gray-800 mb-2",children:"Chain Summary"}),(0,vr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,vr.jsxs)("div",{children:[(0,vr.jsx)("span",{className:"text-gray-600",children:"Total Steps:"}),(0,vr.jsx)("div",{className:"font-semibold",children:i.length})]}),(0,vr.jsxs)("div",{children:[(0,vr.jsx)("span",{className:"text-gray-600",children:"Status:"}),(0,vr.jsx)("div",{className:"font-semibold",children:i.every(e=>"confirmed"===e.status)?(0,vr.jsx)("span",{className:"text-green-600",children:"\u2705 Verified"}):(0,vr.jsx)("span",{className:"text-yellow-600",children:"\u23f3 Processing"})})]}),(0,vr.jsxs)("div",{children:[(0,vr.jsx)("span",{className:"text-gray-600",children:"First Evidence:"}),(0,vr.jsx)("div",{className:"font-semibold",children:i.length>0?f(i[0].timestamp):"N/A"})]}),(0,vr.jsxs)("div",{children:[(0,vr.jsx)("span",{className:"text-gray-600",children:"Latest Update:"}),(0,vr.jsx)("div",{className:"font-semibold",children:i.length>0?f(i[i.length-1].timestamp):"N/A"})]})]})]})]}):(0,vr.jsxs)("div",{className:"text-center p-8 text-gray-500",children:[(0,vr.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udd17"}),(0,vr.jsx)("p",{children:"No evidence trail found for this case."}),t&&(0,vr.jsx)("button",{onClick:u,className:"mt-2 text-blue-600 hover:text-blue-800 underline",children:"Refresh"})]})};function Ts(e){if("string"===typeof e||"number"===typeof e)return""+e;let t="";if(Array.isArray(e))for(let n,r=0;r<e.length;r++)""!==(n=Ts(e[r]))&&(t+=(t&&" ")+n);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Ps=n(443);const Ls=e=>{let t;const n=new Set,r=(e,r)=>{const i="function"===typeof e?e(t):e;if(!Object.is(i,t)){const e=t;t=(null!=r?r:"object"!==typeof i||null===i)?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,o={setState:r,getState:i,getInitialState:()=>s,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},s=t=e(r,i,o);return o},Os=e=>e?Ls(e):Ls;const{useDebugValue:As}=r,{useSyncExternalStoreWithSelector:Ms}=Ps,Rs=e=>e;function Is(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rs,n=arguments.length>2?arguments[2]:void 0;const r=Ms(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return As(r),r}const zs=(e,t)=>{const n=Os(e),r=function(e){return Is(n,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:t)};return Object.assign(r,n),r};function Ds(e,t){if(Object.is(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,r]of e)if(!Object.is(r,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}var Bs={value:()=>{}};function $s(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new Us(r)}function Us(e){this._=e}function Fs(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function Hs(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Bs,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}Us.prototype=$s.prototype={constructor:Us,on:function(e,t){var n,r,i=this._,o=(r=i,(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),s=-1,a=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++s<a;)if(n=(e=o[s]).type)i[n]=Hs(i[n],e.name,t);else if(null==t)for(n in i)i[n]=Hs(i[n],e.name,null);return this}for(;++s<a;)if((n=(e=o[s]).type)&&(n=Fs(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Us(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};const Zs=$s;function Ws(){}function Vs(e){return null==e?Ws:function(){return this.querySelector(e)}}function qs(){return[]}function Ks(e){return null==e?qs:function(){return this.querySelectorAll(e)}}function Ys(e){return function(){return null==(t=e.apply(this,arguments))?[]:Array.isArray(t)?t:Array.from(t);var t}}function Gs(e){return function(){return this.matches(e)}}function Xs(e){return function(t){return t.matches(e)}}var Js=Array.prototype.find;function Qs(){return this.firstElementChild}var ea=Array.prototype.filter;function ta(){return Array.from(this.children)}function na(e){return new Array(e.length)}function ra(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function ia(e,t,n,r,i,o){for(var s,a=0,l=t.length,c=o.length;a<c;++a)(s=t[a])?(s.__data__=o[a],r[a]=s):n[a]=new ra(e,o[a]);for(;a<l;++a)(s=t[a])&&(i[a]=s)}function oa(e,t,n,r,i,o,s){var a,l,c,u=new Map,d=t.length,h=o.length,f=new Array(d);for(a=0;a<d;++a)(l=t[a])&&(f[a]=c=s.call(l,l.__data__,a,t)+"",u.has(c)?i[a]=l:u.set(c,l));for(a=0;a<h;++a)c=s.call(e,o[a],a,o)+"",(l=u.get(c))?(r[a]=l,l.__data__=o[a],u.delete(c)):n[a]=new ra(e,o[a]);for(a=0;a<d;++a)(l=t[a])&&u.get(f[a])===l&&(i[a]=l)}function sa(e){return e.__data__}function aa(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function la(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}ra.prototype={constructor:ra,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var ca="http://www.w3.org/1999/xhtml";const ua={svg:"http://www.w3.org/2000/svg",xhtml:ca,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function da(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),ua.hasOwnProperty(t)?{space:ua[t],local:e}:e}function ha(e){return function(){this.removeAttribute(e)}}function fa(e){return function(){this.removeAttributeNS(e.space,e.local)}}function pa(e,t){return function(){this.setAttribute(e,t)}}function ma(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ga(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function va(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ya(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function _a(e){return function(){this.style.removeProperty(e)}}function ba(e,t,n){return function(){this.style.setProperty(e,t,n)}}function xa(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function wa(e,t){return e.style.getPropertyValue(t)||ya(e).getComputedStyle(e,null).getPropertyValue(t)}function Sa(e){return function(){delete this[e]}}function ka(e,t){return function(){this[e]=t}}function Ea(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Na(e){return e.trim().split(/^|\s+/)}function ja(e){return e.classList||new Ca(e)}function Ca(e){this._node=e,this._names=Na(e.getAttribute("class")||"")}function Ta(e,t){for(var n=ja(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Pa(e,t){for(var n=ja(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function La(e){return function(){Ta(this,e)}}function Oa(e){return function(){Pa(this,e)}}function Aa(e,t){return function(){(t.apply(this,arguments)?Ta:Pa)(this,e)}}function Ma(){this.textContent=""}function Ra(e){return function(){this.textContent=e}}function Ia(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function za(){this.innerHTML=""}function Da(e){return function(){this.innerHTML=e}}function Ba(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function $a(){this.nextSibling&&this.parentNode.appendChild(this)}function Ua(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Fa(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ca&&t.documentElement.namespaceURI===ca?t.createElement(e):t.createElementNS(n,e)}}function Ha(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Za(e){var t=da(e);return(t.local?Ha:Fa)(t)}function Wa(){return null}function Va(){var e=this.parentNode;e&&e.removeChild(this)}function qa(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ka(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ya(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function Ga(e,t,n){return function(){var r,i=this.__on,o=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var s=0,a=i.length;s<a;++s)if((r=i[s]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=t);this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function Xa(e,t,n){var r=ya(e),i=r.CustomEvent;"function"===typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Ja(e,t){return function(){return Xa(this,e,t)}}function Qa(e,t){return function(){return Xa(this,e,t.apply(this,arguments))}}Ca.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var el=[null];function tl(e,t){this._groups=e,this._parents=t}function nl(){return new tl([[document.documentElement]],el)}tl.prototype=nl.prototype={constructor:tl,select:function(e){"function"!==typeof e&&(e=Vs(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,s,a=t[i],l=a.length,c=r[i]=new Array(l),u=0;u<l;++u)(o=a[u])&&(s=e.call(o,o.__data__,u,a))&&("__data__"in o&&(s.__data__=o.__data__),c[u]=s);return new tl(r,this._parents)},selectAll:function(e){e="function"===typeof e?Ys(e):Ks(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s,a=t[o],l=a.length,c=0;c<l;++c)(s=a[c])&&(r.push(e.call(s,s.__data__,c,a)),i.push(s));return new tl(r,i)},selectChild:function(e){return this.select(null==e?Qs:function(e){return function(){return Js.call(this.children,e)}}("function"===typeof e?e:Xs(e)))},selectChildren:function(e){return this.selectAll(null==e?ta:function(e){return function(){return ea.call(this.children,e)}}("function"===typeof e?e:Xs(e)))},filter:function(e){"function"!==typeof e&&(e=Gs(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,s=t[i],a=s.length,l=r[i]=[],c=0;c<a;++c)(o=s[c])&&e.call(o,o.__data__,c,s)&&l.push(o);return new tl(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,sa);var n,r=t?oa:ia,i=this._parents,o=this._groups;"function"!==typeof e&&(n=e,e=function(){return n});for(var s=o.length,a=new Array(s),l=new Array(s),c=new Array(s),u=0;u<s;++u){var d=i[u],h=o[u],f=h.length,p=aa(e.call(d,d&&d.__data__,u,i)),m=p.length,g=l[u]=new Array(m),v=a[u]=new Array(m);r(d,h,g,v,c[u]=new Array(f),p,t);for(var y,_,b=0,x=0;b<m;++b)if(y=g[b]){for(b>=x&&(x=b+1);!(_=v[x])&&++x<m;);y._next=_||null}}return(a=new tl(a,i))._enter=l,a._exit=c,a},enter:function(){return new tl(this._enter||this._groups.map(na),this._parents)},exit:function(){return new tl(this._exit||this._groups.map(na),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,o=this.exit();return"function"===typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(i=t(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),l=0;l<s;++l)for(var c,u=n[l],d=r[l],h=u.length,f=a[l]=new Array(h),p=0;p<h;++p)(c=u[p]||d[p])&&(f[p]=c);for(;l<i;++l)a[l]=n[l];return new tl(a,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,s=i[o];--o>=0;)(r=i[o])&&(s&&4^r.compareDocumentPosition(s)&&s.parentNode.insertBefore(r,s),s=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=la);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s,a=n[o],l=a.length,c=i[o]=new Array(l),u=0;u<l;++u)(s=a[u])&&(c[u]=s);c.sort(t)}return new tl(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],s=0,a=o.length;s<a;++s)(i=o[s])&&e.call(i,i.__data__,s,o);return this},attr:function(e,t){var n=da(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?fa:ha:"function"===typeof t?n.local?va:ga:n.local?ma:pa)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?_a:"function"===typeof t?xa:ba)(e,t,null==n?"":n)):wa(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?Sa:"function"===typeof t?Ea:ka)(e,t)):this.node()[e]},classed:function(e,t){var n=Na(e+"");if(arguments.length<2){for(var r=ja(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"===typeof t?Aa:t?La:Oa)(n,t))},text:function(e){return arguments.length?this.each(null==e?Ma:("function"===typeof e?Ia:Ra)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?za:("function"===typeof e?Ba:Da)(e)):this.node().innerHTML},raise:function(){return this.each($a)},lower:function(){return this.each(Ua)},append:function(e){var t="function"===typeof e?e:Za(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"===typeof e?e:Za(e),r=null==t?Wa:"function"===typeof t?t:Vs(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(Va)},clone:function(e){return this.select(e?Ka:qa)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=function(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}(e+""),s=o.length;if(!(arguments.length<2)){for(a=t?Ga:Ya,r=0;r<s;++r)this.each(a(o[r],t,n));return this}var a=this.node().__on;if(a)for(var l,c=0,u=a.length;c<u;++c)for(r=0,l=a[c];r<s;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"===typeof t?Qa:Ja)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,i=e[t],o=0,s=i.length;o<s;++o)(r=i[o])&&(yield r)}};const rl=nl;function il(e){return"string"===typeof e?new tl([[document.querySelector(e)]],[document.documentElement]):new tl([[e]],el)}const ol={passive:!1},sl={capture:!0,passive:!1};function al(e){e.stopImmediatePropagation()}function ll(e){e.preventDefault(),e.stopImmediatePropagation()}function cl(e){var t=e.document.documentElement,n=il(e).on("dragstart.drag",ll,sl);"onselectstart"in t?n.on("selectstart.drag",ll,sl):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ul(e,t){var n=e.document.documentElement,r=il(e).on("dragstart.drag",null);t&&(r.on("click.drag",ll,sl),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function dl(e){return((e=Math.exp(e))+1/e)/2}const hl=function e(t,n,r){function i(e,i){var o,s,a=e[0],l=e[1],c=e[2],u=i[0],d=i[1],h=i[2],f=u-a,p=d-l,m=f*f+p*p;if(m<1e-12)s=Math.log(h/c)/t,o=function(e){return[a+e*f,l+e*p,c*Math.exp(t*e*s)]};else{var g=Math.sqrt(m),v=(h*h-c*c+r*m)/(2*c*n*g),y=(h*h-c*c-r*m)/(2*h*n*g),_=Math.log(Math.sqrt(v*v+1)-v),b=Math.log(Math.sqrt(y*y+1)-y);s=(b-_)/t,o=function(e){var r,i=e*s,o=dl(_),u=c/(n*g)*(o*(r=t*i+_,((r=Math.exp(2*r))-1)/(r+1))-function(e){return((e=Math.exp(e))-1/e)/2}(_));return[a+u*f,l+u*p,c*o/dl(t*i+_)]}}return o.duration=1e3*s*t/Math.SQRT2,o}return i.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},i}(Math.SQRT2,2,4);function fl(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}var pl,ml,gl=0,vl=0,yl=0,_l=0,bl=0,xl=0,wl="object"===typeof performance&&performance.now?performance:Date,Sl="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function kl(){return bl||(Sl(El),bl=wl.now()+xl)}function El(){bl=0}function Nl(){this._call=this._time=this._next=null}function jl(e,t,n){var r=new Nl;return r.restart(e,t,n),r}function Cl(){bl=(_l=wl.now())+xl,gl=vl=0;try{!function(){kl(),++gl;for(var e,t=pl;t;)(e=bl-t._time)>=0&&t._call.call(void 0,e),t=t._next;--gl}()}finally{gl=0,function(){var e,t,n=pl,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:pl=t);ml=e,Pl(r)}(),bl=0}}function Tl(){var e=wl.now(),t=e-_l;t>1e3&&(xl-=t,_l=e)}function Pl(e){gl||(vl&&(vl=clearTimeout(vl)),e-bl>24?(e<1/0&&(vl=setTimeout(Cl,e-wl.now()-xl)),yl&&(yl=clearInterval(yl))):(yl||(_l=wl.now(),yl=setInterval(Tl,1e3)),gl=1,Sl(Cl)))}function Ll(e,t,n){var r=new Nl;return t=null==t?0:+t,r.restart(n=>{r.stop(),e(n+t)},t,n),r}Nl.prototype=jl.prototype={constructor:Nl,restart:function(e,t,n){if("function"!==typeof e)throw new TypeError("callback is not a function");n=(null==n?kl():+n)+(null==t?0:+t),this._next||ml===this||(ml?ml._next=this:pl=this,ml=this),this._call=e,this._time=n,Pl()},stop:function(){this._call&&(this._call=null,this._time=1/0,Pl())}};var Ol=Zs("start","end","cancel","interrupt"),Al=[];function Ml(e,t,n,r,i,o){var s=e.__transition;if(s){if(n in s)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function o(e){n.state=1,n.timer.restart(s,n.delay,n.time),n.delay<=e&&s(e-n.delay)}function s(o){var c,u,d,h;if(1!==n.state)return l();for(c in i)if((h=i[c]).name===n.name){if(3===h.state)return Ll(s);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete i[c]):+c<t&&(h.state=6,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete i[c])}if(Ll(function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(o))}),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(d=n.tween.length),c=0,u=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++u]=h);r.length=u+1}}function a(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=5,1),o=-1,s=r.length;++o<s;)r[o].call(e,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var r in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=jl(o,0,n.time)}(e,n,{name:t,index:r,group:i,on:Ol,tween:Al,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function Rl(e,t){var n=zl(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function Il(e,t){var n=zl(e,t);if(n.state>3)throw new Error("too late; already running");return n}function zl(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Dl(e,t){var n,r,i,o=e.__transition,s=!0;if(o){for(i in t=null==t?null:t+"",o)(n=o[i]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[i]):s=!1;s&&delete e.__transition}}function Bl(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var $l,Ul=180/Math.PI,Fl={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Hl(e,t,n,r,i,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*Ul,skewX:Math.atan(l)*Ul,scaleX:s,scaleY:a}}function Zl(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(o,s){var a=[],l=[];return o=e(o),s=e(s),function(e,r,i,o,s,a){if(e!==i||r!==o){var l=s.push("translate(",null,t,null,n);a.push({i:l-4,x:Bl(e,i)},{i:l-2,x:Bl(r,o)})}else(i||o)&&s.push("translate("+i+t+o+n)}(o.translateX,o.translateY,s.translateX,s.translateY,a,l),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Bl(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(o.rotate,s.rotate,a,l),function(e,t,n,o){e!==t?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Bl(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(o.skewX,s.skewX,a,l),function(e,t,n,r,o,s){if(e!==n||t!==r){var a=o.push(i(o)+"scale(",null,",",null,")");s.push({i:a-4,x:Bl(e,n)},{i:a-2,x:Bl(t,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,s.scaleX,s.scaleY,a,l),o=s=null,function(e){for(var t,n=-1,r=l.length;++n<r;)a[(t=l[n]).i]=t.x(e);return a.join("")}}}var Wl=Zl(function(e){const t=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Fl:Hl(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),Vl=Zl(function(e){return null==e?Fl:($l||($l=document.createElementNS("http://www.w3.org/2000/svg","g")),$l.setAttribute("transform",e),(e=$l.transform.baseVal.consolidate())?Hl((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Fl)},", ",")",")");function ql(e,t){var n,r;return function(){var i=Il(this,e),o=i.tween;if(o!==n)for(var s=0,a=(r=n=o).length;s<a;++s)if(r[s].name===t){(r=r.slice()).splice(s,1);break}i.tween=r}}function Kl(e,t,n){var r,i;if("function"!==typeof n)throw new Error;return function(){var o=Il(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=a;break}l===c&&i.push(a)}o.tween=i}}function Yl(e,t,n){var r=e._id;return e.each(function(){var e=Il(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return zl(e,r).value[t]}}function Gl(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Xl(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Jl(){}var Ql=.7,ec=1/Ql,tc="\\s*([+-]?\\d+)\\s*",nc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ic=/^#([0-9a-f]{3,8})$/,oc=new RegExp(`^rgb\\(${tc},${tc},${tc}\\)$`),sc=new RegExp(`^rgb\\(${rc},${rc},${rc}\\)$`),ac=new RegExp(`^rgba\\(${tc},${tc},${tc},${nc}\\)$`),lc=new RegExp(`^rgba\\(${rc},${rc},${rc},${nc}\\)$`),cc=new RegExp(`^hsl\\(${nc},${rc},${rc}\\)$`),uc=new RegExp(`^hsla\\(${nc},${rc},${rc},${nc}\\)$`),dc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function hc(){return this.rgb().formatHex()}function fc(){return this.rgb().formatRgb()}function pc(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ic.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?mc(t):3===n?new yc(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?gc(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?gc(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=oc.exec(e))?new yc(t[1],t[2],t[3],1):(t=sc.exec(e))?new yc(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=ac.exec(e))?gc(t[1],t[2],t[3],t[4]):(t=lc.exec(e))?gc(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=cc.exec(e))?kc(t[1],t[2]/100,t[3]/100,1):(t=uc.exec(e))?kc(t[1],t[2]/100,t[3]/100,t[4]):dc.hasOwnProperty(e)?mc(dc[e]):"transparent"===e?new yc(NaN,NaN,NaN,0):null}function mc(e){return new yc(e>>16&255,e>>8&255,255&e,1)}function gc(e,t,n,r){return r<=0&&(e=t=n=NaN),new yc(e,t,n,r)}function vc(e,t,n,r){return 1===arguments.length?((i=e)instanceof Jl||(i=pc(i)),i?new yc((i=i.rgb()).r,i.g,i.b,i.opacity):new yc):new yc(e,t,n,null==r?1:r);var i}function yc(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function _c(){return`#${Sc(this.r)}${Sc(this.g)}${Sc(this.b)}`}function bc(){const e=xc(this.opacity);return`${1===e?"rgb(":"rgba("}${wc(this.r)}, ${wc(this.g)}, ${wc(this.b)}${1===e?")":`, ${e})`}`}function xc(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function wc(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Sc(e){return((e=wc(e))<16?"0":"")+e.toString(16)}function kc(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Nc(e,t,n,r)}function Ec(e){if(e instanceof Nc)return new Nc(e.h,e.s,e.l,e.opacity);if(e instanceof Jl||(e=pc(e)),!e)return new Nc;if(e instanceof Nc)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(s=t===o?(n-r)/a+6*(n<r):n===o?(r-t)/a+2:(t-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new Nc(s,a,l,e.opacity)}function Nc(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function jc(e){return(e=(e||0)%360)<0?e+360:e}function Cc(e){return Math.max(0,Math.min(1,e||0))}function Tc(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Pc(e,t,n,r,i){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*n+(1+3*e+3*o-3*s)*r+s*i)/6}Gl(Jl,pc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:hc,formatHex:hc,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Ec(this).formatHsl()},formatRgb:fc,toString:fc}),Gl(yc,vc,Xl(Jl,{brighter(e){return e=null==e?ec:Math.pow(ec,e),new yc(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?Ql:Math.pow(Ql,e),new yc(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new yc(wc(this.r),wc(this.g),wc(this.b),xc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_c,formatHex:_c,formatHex8:function(){return`#${Sc(this.r)}${Sc(this.g)}${Sc(this.b)}${Sc(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:bc,toString:bc})),Gl(Nc,function(e,t,n,r){return 1===arguments.length?Ec(e):new Nc(e,t,n,null==r?1:r)},Xl(Jl,{brighter(e){return e=null==e?ec:Math.pow(ec,e),new Nc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?Ql:Math.pow(Ql,e),new Nc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new yc(Tc(e>=240?e-240:e+120,i,r),Tc(e,i,r),Tc(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Nc(jc(this.h),Cc(this.s),Cc(this.l),xc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=xc(this.opacity);return`${1===e?"hsl(":"hsla("}${jc(this.h)}, ${100*Cc(this.s)}%, ${100*Cc(this.l)}%${1===e?")":`, ${e})`}`}}));const Lc=e=>()=>e;function Oc(e,t){return function(n){return e+n*t}}function Ac(e){return 1===(e=+e)?Mc:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Lc(isNaN(t)?n:t)}}function Mc(e,t){var n=t-e;return n?Oc(e,n):Lc(isNaN(e)?t:e)}const Rc=function e(t){var n=Ac(t);function r(e,t){var r=n((e=vc(e)).r,(t=vc(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),s=Mc(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=s(t),e+""}}return r.gamma=e,r}(1);function Ic(e){return function(t){var n,r,i=t.length,o=new Array(i),s=new Array(i),a=new Array(i);for(n=0;n<i;++n)r=vc(t[n]),o[n]=r.r||0,s[n]=r.g||0,a[n]=r.b||0;return o=e(o),s=e(s),a=e(a),r.opacity=1,function(e){return r.r=o(e),r.g=s(e),r.b=a(e),r+""}}}Ic(function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],s=r>0?e[r-1]:2*i-o,a=r<t-1?e[r+2]:2*o-i;return Pc((n-r/t)*t,s,i,o,a)}}),Ic(function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],s=e[(r+1)%t],a=e[(r+2)%t];return Pc((n-r/t)*t,i,o,s,a)}});var zc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Dc=new RegExp(zc.source,"g");function Bc(e,t){var n,r,i,o=zc.lastIndex=Dc.lastIndex=0,s=-1,a=[],l=[];for(e+="",t+="";(n=zc.exec(e))&&(r=Dc.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),a[s]?a[s]+=i:a[++s]=i),(n=n[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:Bl(n,r)})),o=Dc.lastIndex;return o<t.length&&(i=t.slice(o),a[s]?a[s]+=i:a[++s]=i),a.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)a[(n=l[r]).i]=n.x(e);return a.join("")})}function $c(e,t){var n;return("number"===typeof t?Bl:t instanceof pc?Rc:(n=pc(t))?(t=n,Rc):Bc)(e,t)}function Uc(e){return function(){this.removeAttribute(e)}}function Fc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Hc(e,t,n){var r,i,o=n+"";return function(){var s=this.getAttribute(e);return s===o?null:s===r?i:i=t(r=s,n)}}function Zc(e,t,n){var r,i,o=n+"";return function(){var s=this.getAttributeNS(e.space,e.local);return s===o?null:s===r?i:i=t(r=s,n)}}function Wc(e,t,n){var r,i,o;return function(){var s,a,l=n(this);if(null!=l)return(s=this.getAttribute(e))===(a=l+"")?null:s===r&&a===i?o:(i=a,o=t(r=s,l));this.removeAttribute(e)}}function Vc(e,t,n){var r,i,o;return function(){var s,a,l=n(this);if(null!=l)return(s=this.getAttributeNS(e.space,e.local))===(a=l+"")?null:s===r&&a===i?o:(i=a,o=t(r=s,l));this.removeAttributeNS(e.space,e.local)}}function qc(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,i)),n}return i._value=t,i}function Kc(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,i)),n}return i._value=t,i}function Yc(e,t){return function(){Rl(this,e).delay=+t.apply(this,arguments)}}function Gc(e,t){return t=+t,function(){Rl(this,e).delay=t}}function Xc(e,t){return function(){Il(this,e).duration=+t.apply(this,arguments)}}function Jc(e,t){return t=+t,function(){Il(this,e).duration=t}}var Qc=rl.prototype.constructor;function eu(e){return function(){this.style.removeProperty(e)}}var tu=0;function nu(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function ru(){return++tu}var iu=rl.prototype;nu.prototype=function(e){return rl().transition(e)}.prototype={constructor:nu,select:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=Vs(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a,l,c=r[s],u=c.length,d=o[s]=new Array(u),h=0;h<u;++h)(a=c[h])&&(l=e.call(a,a.__data__,h,c))&&("__data__"in a&&(l.__data__=a.__data__),d[h]=l,Ml(d[h],t,n,h,d,zl(a,n)));return new nu(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!==typeof e&&(e=Ks(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var l,c=r[a],u=c.length,d=0;d<u;++d)if(l=c[d]){for(var h,f=e.call(l,l.__data__,d,c),p=zl(l,n),m=0,g=f.length;m<g;++m)(h=f[m])&&Ml(h,t,n,m,f,p);o.push(f),s.push(l)}return new nu(o,s,t,n)},selectChild:iu.selectChild,selectChildren:iu.selectChildren,filter:function(e){"function"!==typeof e&&(e=Gs(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,s=t[i],a=s.length,l=r[i]=[],c=0;c<a;++c)(o=s[c])&&e.call(o,o.__data__,c,s)&&l.push(o);return new nu(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var l,c=t[a],u=n[a],d=c.length,h=s[a]=new Array(d),f=0;f<d;++f)(l=c[f]||u[f])&&(h[f]=l);for(;a<r;++a)s[a]=t[a];return new nu(s,this._parents,this._name,this._id)},selection:function(){return new Qc(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=ru(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s,a=r[o],l=a.length,c=0;c<l;++c)if(s=a[c]){var u=zl(s,t);Ml(s,e,n,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new nu(r,this._parents,e,n)},call:iu.call,nodes:iu.nodes,node:iu.node,size:iu.size,empty:iu.empty,each:iu.each,on:function(e,t){var n=this._id;return arguments.length<2?zl(this.node(),n).on.on(e):this.each(function(e,t,n){var r,i,o=function(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}(t)?Rl:Il;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}(n,e,t))},attr:function(e,t){var n=da(e),r="transform"===n?Vl:$c;return this.attrTween(e,"function"===typeof t?(n.local?Vc:Wc)(n,r,Yl(this,"attr."+e,t)):null==t?(n.local?Fc:Uc)(n):(n.local?Zc:Hc)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!==typeof t)throw new Error;var r=da(e);return this.tween(n,(r.local?qc:Kc)(r,t))},style:function(e,t,n){var r="transform"===(e+="")?Wl:$c;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var o=wa(this,e),s=(this.style.removeProperty(e),wa(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}(e,r)).on("end.style."+e,eu(e)):"function"===typeof t?this.styleTween(e,function(e,t,n){var r,i,o;return function(){var s=wa(this,e),a=n(this),l=a+"";return null==a&&(this.style.removeProperty(e),l=a=wa(this,e)),s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a))}}(e,r,Yl(this,"style."+e,t))).each(function(e,t){var n,r,i,o,s="style."+t,a="end."+s;return function(){var l=Il(this,e),c=l.on,u=null==l.value[s]?o||(o=eu(t)):void 0;c===n&&i===u||(r=(n=c).copy()).on(a,i=u),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,o=n+"";return function(){var s=wa(this,e);return s===o?null:s===r?i:i=t(r=s,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!==typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,i;function o(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&function(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,o,n)),r}return o._value=t,o}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"===typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(Yl(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!==typeof e)throw new Error;return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){return function(t){this.textContent=e.call(this,t)}}(r)),t}return r._value=e,r}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=zl(this.node(),n).tween,o=0,s=i.length;o<s;++o)if((r=i[o]).name===e)return r.value;return null}return this.each((null==t?ql:Kl)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?Yc:Gc)(t,e)):zl(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?Xc:Jc)(t,e)):zl(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!==typeof t)throw new Error;return function(){Il(this,e).ease=t}}(t,e)):zl(this.node(),t).ease},easeVarying:function(e){if("function"!==typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!==typeof n)throw new Error;Il(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},l={value:function(){0===--i&&o()}};n.each(function(){var n=Il(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),n.on=t}),0===i&&o()})},[Symbol.iterator]:iu[Symbol.iterator]};var ou={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function su(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}rl.prototype.interrupt=function(e){return this.each(function(){Dl(this,e)})},rl.prototype.transition=function(e){var t,n;e instanceof nu?(t=e._id,e=e._name):(t=ru(),(n=ou).time=kl(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s,a=r[o],l=a.length,c=0;c<l;++c)(s=a[c])&&Ml(s,e,t,c,a,n||su(s,t));return new nu(r,this._parents,e,t)};const au=e=>()=>e;function lu(e,t){let{sourceEvent:n,target:r,transform:i,dispatch:o}=t;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function cu(e,t,n){this.k=e,this.x=t,this.y=n}cu.prototype={constructor:cu,scale:function(e){return 1===e?this:new cu(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new cu(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var uu=new cu(1,0,0);function du(e){e.stopImmediatePropagation()}function hu(e){e.preventDefault(),e.stopImmediatePropagation()}function fu(e){return(!e.ctrlKey||"wheel"===e.type)&&!e.button}function pu(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function mu(){return this.__zoom||uu}function gu(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function vu(){return navigator.maxTouchPoints||"ontouchstart"in this}function yu(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function _u(){var e,t,n,r=fu,i=pu,o=yu,s=gu,a=vu,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],u=250,d=hl,h=Zs("start","zoom","end"),f=0,p=10;function m(e){e.property("__zoom",mu).on("wheel.zoom",w,{passive:!1}).on("mousedown.zoom",S).on("dblclick.zoom",k).filter(a).on("touchstart.zoom",E).on("touchmove.zoom",N).on("touchend.zoom touchcancel.zoom",j).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new cu(t,e.x,e.y)}function v(e,t,n){var r=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return r===e.x&&i===e.y?e:new cu(e.k,r,i)}function y(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function _(e,t,n,r){e.on("start.zoom",function(){b(this,arguments).event(r).start()}).on("interrupt.zoom end.zoom",function(){b(this,arguments).event(r).end()}).tween("zoom",function(){var e=this,o=arguments,s=b(e,o).event(r),a=i.apply(e,o),l=null==n?y(a):"function"===typeof n?n.apply(e,o):n,c=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),u=e.__zoom,h="function"===typeof t?t.apply(e,o):t,f=d(u.invert(l).concat(c/u.k),h.invert(l).concat(c/h.k));return function(e){if(1===e)e=h;else{var t=f(e),n=c/t[2];e=new cu(n,l[0]-t[0]*n,l[1]-t[1]*n)}s.zoom(null,e)}})}function b(e,t,n){return!n&&e.__zooming||new x(e,t)}function x(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=i.apply(e,t),this.taps=0}function w(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(r.apply(this,arguments)){var a=b(this,n).event(e),u=this.__zoom,d=Math.max(l[0],Math.min(l[1],u.k*Math.pow(2,s.apply(this,arguments)))),h=fl(e);if(a.wheel)a.mouse[0][0]===h[0]&&a.mouse[0][1]===h[1]||(a.mouse[1]=u.invert(a.mouse[0]=h)),clearTimeout(a.wheel);else{if(u.k===d)return;a.mouse=[h,u.invert(h)],Dl(this),a.start()}hu(e),a.wheel=setTimeout(function(){a.wheel=null,a.end()},150),a.zoom("mouse",o(v(g(u,d),a.mouse[0],a.mouse[1]),a.extent,c))}}function S(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];if(!n&&r.apply(this,arguments)){var a=e.currentTarget,l=b(this,i,!0).event(e),u=il(e.view).on("mousemove.zoom",function(e){if(hu(e),!l.moved){var t=e.clientX-h,n=e.clientY-p;l.moved=t*t+n*n>f}l.event(e).zoom("mouse",o(v(l.that.__zoom,l.mouse[0]=fl(e,a),l.mouse[1]),l.extent,c))},!0).on("mouseup.zoom",function(e){u.on("mousemove.zoom mouseup.zoom",null),ul(e.view,l.moved),hu(e),l.event(e).end()},!0),d=fl(e,a),h=e.clientX,p=e.clientY;cl(e.view),du(e),l.mouse=[d,this.__zoom.invert(d)],Dl(this),l.start()}}function k(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];if(r.apply(this,arguments)){var a=this.__zoom,l=fl(e.changedTouches?e.changedTouches[0]:e,this),d=a.invert(l),h=a.k*(e.shiftKey?.5:2),f=o(v(g(a,h),l,d),i.apply(this,n),c);hu(e),u>0?il(this).transition().duration(u).call(_,f,l,e):il(this).call(m.transform,f,l,e)}}function E(n){for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];if(r.apply(this,arguments)){var a,l,c,u,d=n.touches,h=d.length,f=b(this,o,n.changedTouches.length===h).event(n);for(du(n),l=0;l<h;++l)u=[u=fl(c=d[l],this),this.__zoom.invert(u),c.identifier],f.touch0?f.touch1||f.touch0[2]===u[2]||(f.touch1=u,f.taps=0):(f.touch0=u,a=!0,f.taps=1+!!e);e&&(e=clearTimeout(e)),a&&(f.taps<2&&(t=u[0],e=setTimeout(function(){e=null},500)),Dl(this),f.start())}}function N(e){if(this.__zooming){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,a,l,u=b(this,n).event(e),d=e.changedTouches,h=d.length;for(hu(e),i=0;i<h;++i)a=fl(s=d[i],this),u.touch0&&u.touch0[2]===s.identifier?u.touch0[0]=a:u.touch1&&u.touch1[2]===s.identifier&&(u.touch1[0]=a);if(s=u.that.__zoom,u.touch1){var f=u.touch0[0],p=u.touch0[1],m=u.touch1[0],y=u.touch1[1],_=(_=m[0]-f[0])*_+(_=m[1]-f[1])*_,x=(x=y[0]-p[0])*x+(x=y[1]-p[1])*x;s=g(s,Math.sqrt(_/x)),a=[(f[0]+m[0])/2,(f[1]+m[1])/2],l=[(p[0]+y[0])/2,(p[1]+y[1])/2]}else{if(!u.touch0)return;a=u.touch0[0],l=u.touch0[1]}u.zoom("touch",o(v(s,a,l),u.extent,c))}}function j(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];if(this.__zooming){var s,a,l=b(this,i).event(e),c=e.changedTouches,u=c.length;for(du(e),n&&clearTimeout(n),n=setTimeout(function(){n=null},500),s=0;s<u;++s)a=c[s],l.touch0&&l.touch0[2]===a.identifier?delete l.touch0:l.touch1&&l.touch1[2]===a.identifier&&delete l.touch1;if(l.touch1&&!l.touch0&&(l.touch0=l.touch1,delete l.touch1),l.touch0)l.touch0[1]=this.__zoom.invert(l.touch0[0]);else if(l.end(),2===l.taps&&(a=fl(a,this),Math.hypot(t[0]-a[0],t[1]-a[1])<p)){var d=il(this).on("dblclick.zoom");d&&d.apply(this,arguments)}}}return m.transform=function(e,t,n,r){var i=e.selection?e.selection():e;i.property("__zoom",mu),e!==i?_(e,t,n,r):i.interrupt().each(function(){b(this,arguments).event(r).start().zoom(null,"function"===typeof t?t.apply(this,arguments):t).end()})},m.scaleBy=function(e,t,n,r){m.scaleTo(e,function(){return this.__zoom.k*("function"===typeof t?t.apply(this,arguments):t)},n,r)},m.scaleTo=function(e,t,n,r){m.transform(e,function(){var e=i.apply(this,arguments),r=this.__zoom,s=null==n?y(e):"function"===typeof n?n.apply(this,arguments):n,a=r.invert(s),l="function"===typeof t?t.apply(this,arguments):t;return o(v(g(r,l),s,a),e,c)},n,r)},m.translateBy=function(e,t,n,r){m.transform(e,function(){return o(this.__zoom.translate("function"===typeof t?t.apply(this,arguments):t,"function"===typeof n?n.apply(this,arguments):n),i.apply(this,arguments),c)},null,r)},m.translateTo=function(e,t,n,r,s){m.transform(e,function(){var e=i.apply(this,arguments),s=this.__zoom,a=null==r?y(e):"function"===typeof r?r.apply(this,arguments):r;return o(uu.translate(a[0],a[1]).scale(s.k).translate("function"===typeof t?-t.apply(this,arguments):-t,"function"===typeof n?-n.apply(this,arguments):-n),e,c)},r,s)},x.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=il(this.that).datum();h.call(e,this.that,new lu(e,{sourceEvent:this.sourceEvent,target:m,type:e,transform:this.that.__zoom,dispatch:h}),t)}},m.wheelDelta=function(e){return arguments.length?(s="function"===typeof e?e:au(+e),m):s},m.filter=function(e){return arguments.length?(r="function"===typeof e?e:au(!!e),m):r},m.touchable=function(e){return arguments.length?(a="function"===typeof e?e:au(!!e),m):a},m.extent=function(e){return arguments.length?(i="function"===typeof e?e:au([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),m):i},m.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],m):[l[0],l[1]]},m.translateExtent=function(e){return arguments.length?(c[0][0]=+e[0][0],c[1][0]=+e[1][0],c[0][1]=+e[0][1],c[1][1]=+e[1][1],m):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},m.constrain=function(e){return arguments.length?(o=e,m):o},m.duration=function(e){return arguments.length?(u=+e,m):u},m.interpolate=function(e){return arguments.length?(d=e,m):d},m.on=function(){var e=h.on.apply(h,arguments);return e===h?m:e},m.clickDistance=function(e){return arguments.length?(f=(e=+e)*e,m):Math.sqrt(f)},m.tapDistance=function(e){return arguments.length?(p=+e,m):p},m}cu.prototype;const bu=e=>()=>e;function xu(e,t){let{sourceEvent:n,subject:r,target:i,identifier:o,active:s,x:a,y:l,dx:c,dy:u,dispatch:d}=t;Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}function wu(e){return!e.ctrlKey&&!e.button}function Su(){return this.parentNode}function ku(e,t){return null==t?{x:e.x,y:e.y}:t}function Eu(){return navigator.maxTouchPoints||"ontouchstart"in this}xu.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};const Nu=(0,r.createContext)(null),ju=Nu.Provider,Cu=e=>`Node type "${e}" not found. Using fallback type "default".`,Tu=()=>"The React Flow parent container needs a width and a height to render the graph.",Pu=()=>"Only child nodes can use a parent extent.",Lu=()=>"Can't create edge. An edge needs a source and a target.",Ou=e=>`Marker type "${e}" doesn't exist.`,Au=(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,Mu=()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",Ru=e=>`Edge type "${e}" not found. Using fallback type "default".`,Iu=e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,zu=(()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001")();function Du(e,t){const n=(0,r.useContext)(Nu);if(null===n)throw new Error(zu);return Is(n,e,t)}const Bu=()=>{const e=(0,r.useContext)(Nu);if(null===e)throw new Error(zu);return(0,r.useMemo)(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},$u=e=>e.userSelectionActive?"none":"all";function Uu(e){let{position:t,children:n,className:i,style:o,...s}=e;const a=Du($u),l=`${t}`.split("-");return r.createElement("div",{className:Ts(["react-flow__panel",i,...l]),style:{...o,pointerEvents:a},...s},n)}function Fu(e){let{proOptions:t,position:n="bottom-right"}=e;return t?.hideAttribution?null:r.createElement(Uu,{position:n,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},r.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}var Hu=(0,r.memo)(e=>{let{x:t,y:n,label:i,labelStyle:o={},labelShowBg:s=!0,labelBgStyle:a={},labelBgPadding:l=[2,4],labelBgBorderRadius:c=2,children:u,className:d,...h}=e;const f=(0,r.useRef)(null),[p,m]=(0,r.useState)({x:0,y:0,width:0,height:0}),g=Ts(["react-flow__edge-textwrapper",d]);return(0,r.useEffect)(()=>{if(f.current){const e=f.current.getBBox();m({x:e.x,y:e.y,width:e.width,height:e.height})}},[i]),"undefined"!==typeof i&&i?r.createElement("g",{transform:`translate(${t-p.width/2} ${n-p.height/2})`,className:g,visibility:p.width?"visible":"hidden",...h},s&&r.createElement("rect",{width:p.width+2*l[0],x:-l[0],y:-l[1],height:p.height+2*l[1],className:"react-flow__edge-textbg",style:a,rx:c,ry:c}),r.createElement("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:f,style:o},i),u):null});const Zu=e=>({width:e.offsetWidth,height:e.offsetHeight}),Wu=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(e,t),n)},Vu=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},t=arguments.length>1?arguments[1]:void 0;return{x:Wu(e.x,t[0][0],t[1][0]),y:Wu(e.y,t[0][1],t[1][1])}},qu=(e,t,n)=>e<t?Wu(Math.abs(e-t),1,50)/50:e>n?-Wu(Math.abs(e-n),1,50)/50:0,Ku=(e,t)=>[20*qu(e.x,35,t.width-35),20*qu(e.y,35,t.height-35)],Yu=e=>e.getRootNode?.()||window?.document,Gu=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Xu=e=>{let{x:t,y:n,width:r,height:i}=e;return{x:t,y:n,x2:t+r,y2:n+i}},Ju=e=>{let{x:t,y:n,x2:r,y2:i}=e;return{x:t,y:n,width:r-t,height:i-n}},Qu=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),ed=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},td=e=>!isNaN(e)&&isFinite(e),nd=Symbol.for("internals"),rd=["Enter"," ","Escape"],id=(e,t)=>{0};function od(e){const t=(e=>"nativeEvent"in e)(e)?e.nativeEvent:e,n=t.composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const sd=e=>"clientX"in e,ad=(e,t)=>{const n=sd(e),r=n?e.clientX:e.touches?.[0].clientX,i=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:i-(t?.top??0)}},ld=()=>"undefined"!==typeof navigator&&navigator?.userAgent?.indexOf("Mac")>=0,cd=e=>{let{id:t,path:n,labelX:i,labelY:o,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:h,markerEnd:f,markerStart:p,interactionWidth:m=20}=e;return r.createElement(r.Fragment,null,r.createElement("path",{id:t,style:h,d:n,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:p}),m&&r.createElement("path",{d:n,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}),s&&td(i)&&td(o)?r.createElement(Hu,{x:i,y:o,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d}):null)};cd.displayName="BaseEdge";function ud(e,t,n){return void 0===n?n:r=>{const i=t().edges.find(t=>t.id===e);i&&n(r,{...i})}}function dd(e){let{sourceX:t,sourceY:n,targetX:r,targetY:i}=e;const o=Math.abs(r-t)/2,s=r<t?r+o:r-o,a=Math.abs(i-n)/2;return[s,i<n?i+a:i-a,o,a]}function hd(e){let{sourceX:t,sourceY:n,targetX:r,targetY:i,sourceControlX:o,sourceControlY:s,targetControlX:a,targetControlY:l}=e;const c=.125*t+.375*o+.375*a+.125*r,u=.125*n+.375*s+.375*l+.125*i;return[c,u,Math.abs(c-t),Math.abs(u-n)]}var fd,pd,md,gd,vd,yd;function _d(e){let{pos:t,x1:n,y1:r,x2:i,y2:o}=e;return t===yd.Left||t===yd.Right?[.5*(n+i),r]:[n,.5*(r+o)]}function bd(e){let{sourceX:t,sourceY:n,sourcePosition:r=yd.Bottom,targetX:i,targetY:o,targetPosition:s=yd.Top}=e;const[a,l]=_d({pos:r,x1:t,y1:n,x2:i,y2:o}),[c,u]=_d({pos:s,x1:i,y1:o,x2:t,y2:n}),[d,h,f,p]=hd({sourceX:t,sourceY:n,targetX:i,targetY:o,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${t},${n} C${a},${l} ${c},${u} ${i},${o}`,d,h,f,p]}!function(e){e.Strict="strict",e.Loose="loose"}(fd||(fd={})),function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(pd||(pd={})),function(e){e.Partial="partial",e.Full="full"}(md||(md={})),function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"}(gd||(gd={})),function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"}(vd||(vd={})),function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(yd||(yd={}));const xd=(0,r.memo)(e=>{let{sourceX:t,sourceY:n,targetX:i,targetY:o,sourcePosition:s=yd.Bottom,targetPosition:a=yd.Top,label:l,labelStyle:c,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:f,style:p,markerEnd:m,markerStart:g,interactionWidth:v}=e;const[y,_,b]=bd({sourceX:t,sourceY:n,sourcePosition:s,targetX:i,targetY:o,targetPosition:a});return r.createElement(cd,{path:y,labelX:_,labelY:b,label:l,labelStyle:c,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:f,style:p,markerEnd:m,markerStart:g,interactionWidth:v})});xd.displayName="SimpleBezierEdge";const wd={[yd.Left]:{x:-1,y:0},[yd.Right]:{x:1,y:0},[yd.Top]:{x:0,y:-1},[yd.Bottom]:{x:0,y:1}},Sd=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function kd(e){let{source:t,sourcePosition:n=yd.Bottom,target:r,targetPosition:i=yd.Top,center:o,offset:s}=e;const a=wd[n],l=wd[i],c={x:t.x+a.x*s,y:t.y+a.y*s},u={x:r.x+l.x*s,y:r.y+l.y*s},d=(e=>{let{source:t,sourcePosition:n=yd.Bottom,target:r}=e;return n===yd.Left||n===yd.Right?t.x<r.x?{x:1,y:0}:{x:-1,y:0}:t.y<r.y?{x:0,y:1}:{x:0,y:-1}})({source:c,sourcePosition:n,target:u}),h=0!==d.x?"x":"y",f=d[h];let p,m,g=[];const v={x:0,y:0},y={x:0,y:0},[_,b,x,w]=dd({sourceX:t.x,sourceY:t.y,targetX:r.x,targetY:r.y});if(a[h]*l[h]===-1){p=o.x??_,m=o.y??b;const e=[{x:p,y:c.y},{x:p,y:u.y}],t=[{x:c.x,y:m},{x:u.x,y:m}];g=a[h]===f?"x"===h?e:t:"x"===h?t:e}else{const e=[{x:c.x,y:u.y}],o=[{x:u.x,y:c.y}];if(g="x"===h?a.x===f?o:e:a.y===f?e:o,n===i){const e=Math.abs(t[h]-r[h]);if(e<=s){const n=Math.min(s-1,s-e);a[h]===f?v[h]=(c[h]>t[h]?-1:1)*n:y[h]=(u[h]>r[h]?-1:1)*n}}if(n!==i){const t="x"===h?"y":"x",n=a[h]===l[t],r=c[t]>u[t],i=c[t]<u[t];(1===a[h]&&(!n&&r||n&&i)||1!==a[h]&&(!n&&i||n&&r))&&(g="x"===h?e:o)}const d={x:c.x+v.x,y:c.y+v.y},_={x:u.x+y.x,y:u.y+y.y};Math.max(Math.abs(d.x-g[0].x),Math.abs(_.x-g[0].x))>=Math.max(Math.abs(d.y-g[0].y),Math.abs(_.y-g[0].y))?(p=(d.x+_.x)/2,m=g[0].y):(p=g[0].x,m=(d.y+_.y)/2)}return[[t,{x:c.x+v.x,y:c.y+v.y},...g,{x:u.x+y.x,y:u.y+y.y},r],p,m,x,w]}function Ed(e){let{sourceX:t,sourceY:n,sourcePosition:r=yd.Bottom,targetX:i,targetY:o,targetPosition:s=yd.Top,borderRadius:a=5,centerX:l,centerY:c,offset:u=20}=e;const[d,h,f,p,m]=kd({source:{x:t,y:n},sourcePosition:r,target:{x:i,y:o},targetPosition:s,center:{x:l,y:c},offset:u}),g=d.reduce((e,t,n)=>{let r="";return r=n>0&&n<d.length-1?function(e,t,n,r){const i=Math.min(Sd(e,t)/2,Sd(t,n)/2,r),{x:o,y:s}=t;if(e.x===o&&o===n.x||e.y===s&&s===n.y)return`L${o} ${s}`;if(e.y===s)return`L ${o+i*(e.x<n.x?-1:1)},${s}Q ${o},${s} ${o},${s+i*(e.y<n.y?1:-1)}`;const a=e.x<n.x?1:-1;return`L ${o},${s+i*(e.y<n.y?-1:1)}Q ${o},${s} ${o+i*a},${s}`}(d[n-1],t,d[n+1],a):`${0===n?"M":"L"}${t.x} ${t.y}`,e+=r},"");return[g,h,f,p,m]}const Nd=(0,r.memo)(e=>{let{sourceX:t,sourceY:n,targetX:i,targetY:o,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:h,sourcePosition:f=yd.Bottom,targetPosition:p=yd.Top,markerEnd:m,markerStart:g,pathOptions:v,interactionWidth:y}=e;const[_,b,x]=Ed({sourceX:t,sourceY:n,sourcePosition:f,targetX:i,targetY:o,targetPosition:p,borderRadius:v?.borderRadius,offset:v?.offset});return r.createElement(cd,{path:_,labelX:b,labelY:x,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:h,markerEnd:m,markerStart:g,interactionWidth:y})});Nd.displayName="SmoothStepEdge";const jd=(0,r.memo)(e=>r.createElement(Nd,{...e,pathOptions:(0,r.useMemo)(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));jd.displayName="StepEdge";const Cd=(0,r.memo)(e=>{let{sourceX:t,sourceY:n,targetX:i,targetY:o,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:h,markerEnd:f,markerStart:p,interactionWidth:m}=e;const[g,v,y]=function(e){let{sourceX:t,sourceY:n,targetX:r,targetY:i}=e;const[o,s,a,l]=dd({sourceX:t,sourceY:n,targetX:r,targetY:i});return[`M ${t},${n}L ${r},${i}`,o,s,a,l]}({sourceX:t,sourceY:n,targetX:i,targetY:o});return r.createElement(cd,{path:g,labelX:v,labelY:y,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:d,style:h,markerEnd:f,markerStart:p,interactionWidth:m})});function Td(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function Pd(e){let{pos:t,x1:n,y1:r,x2:i,y2:o,c:s}=e;switch(t){case yd.Left:return[n-Td(n-i,s),r];case yd.Right:return[n+Td(i-n,s),r];case yd.Top:return[n,r-Td(r-o,s)];case yd.Bottom:return[n,r+Td(o-r,s)]}}function Ld(e){let{sourceX:t,sourceY:n,sourcePosition:r=yd.Bottom,targetX:i,targetY:o,targetPosition:s=yd.Top,curvature:a=.25}=e;const[l,c]=Pd({pos:r,x1:t,y1:n,x2:i,y2:o,c:a}),[u,d]=Pd({pos:s,x1:i,y1:o,x2:t,y2:n,c:a}),[h,f,p,m]=hd({sourceX:t,sourceY:n,targetX:i,targetY:o,sourceControlX:l,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${t},${n} C${l},${c} ${u},${d} ${i},${o}`,h,f,p,m]}Cd.displayName="StraightEdge";const Od=(0,r.memo)(e=>{let{sourceX:t,sourceY:n,targetX:i,targetY:o,sourcePosition:s=yd.Bottom,targetPosition:a=yd.Top,label:l,labelStyle:c,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:f,style:p,markerEnd:m,markerStart:g,pathOptions:v,interactionWidth:y}=e;const[_,b,x]=Ld({sourceX:t,sourceY:n,sourcePosition:s,targetX:i,targetY:o,targetPosition:a,curvature:v?.curvature});return r.createElement(cd,{path:_,labelX:b,labelY:x,label:l,labelStyle:c,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:f,style:p,markerEnd:m,markerStart:g,interactionWidth:y})});Od.displayName="BezierEdge";const Ad=(0,r.createContext)(null),Md=Ad.Provider;Ad.Consumer;const Rd=e=>{let{source:t,sourceHandle:n,target:r,targetHandle:i}=e;return`reactflow__edge-${t}${n||""}-${r}${i||""}`},Id=(e,t)=>{if("undefined"===typeof e)return"";if("string"===typeof e)return e;return`${t?`${t}__`:""}${Object.keys(e).sort().map(t=>`${t}=${e[t]}`).join("&")}`},zd=(e,t)=>{if(!e.source||!e.target)return id(0,Lu()),t;let n;var r;return n="id"in(r=e)&&"source"in r&&"target"in r?{...e}:{...e,id:Rd(e)},((e,t)=>t.some(t=>t.source===e.source&&t.target===e.target&&(t.sourceHandle===e.sourceHandle||!t.sourceHandle&&!e.sourceHandle)&&(t.targetHandle===e.targetHandle||!t.targetHandle&&!e.targetHandle)))(n,t)?t:t.concat(n)},Dd=(e,t,n,r)=>{let{x:i,y:o}=e,[s,a,l]=t,[c,u]=r;const d={x:(i-s)/l,y:(o-a)/l};return n?{x:c*Math.round(d.x/c),y:u*Math.round(d.y/u)}:d},Bd=(e,t)=>{let{x:n,y:r}=e,[i,o,s]=t;return{x:n*s+i,y:r*s+o}},$d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],i={x:e.position.x-n,y:e.position.y-r};return{...i,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:i}},Ud=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];if(0===e.length)return{x:0,y:0,width:0,height:0};const n=e.reduce((e,n)=>{const{x:r,y:i}=$d(n,t).positionAbsolute;return Gu(e,Xu({x:r,y:i,width:n.width||0,height:n.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Ju(n)},Fd=function(e,t){let[n,r,i]=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,1],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[0,0];const l={x:(t.x-n)/i,y:(t.y-r)/i,width:t.width/i,height:t.height/i},c=[];return e.forEach(e=>{const{width:t,height:n,selectable:r=!0,hidden:i=!1}=e;if(s&&!r||i)return!1;const{positionAbsolute:u}=$d(e,a),d={x:u.x,y:u.y,width:t||0,height:n||0},h=ed(l,d);("undefined"===typeof t||"undefined"===typeof n||null===t||null===n||o&&h>0||h>=(t||0)*(n||0)||e.dragging)&&c.push(e)}),c},Hd=(e,t)=>{const n=e.map(e=>e.id);return t.filter(e=>n.includes(e.source)||n.includes(e.target))},Zd=function(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.1;const s=t/(e.width*(1+o)),a=n/(e.height*(1+o)),l=Math.min(s,a),c=Wu(l,r,i);return{x:t/2-(e.x+e.width/2)*c,y:n/2-(e.y+e.height/2)*c,zoom:c}},Wd=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.transition().duration(t)};function Vd(e,t,n,r){return(t[n]||[]).reduce((t,i)=>(`${e.id}-${i.id}-${n}`!==r&&t.push({id:i.id||null,type:n,nodeId:e.id,x:(e.positionAbsolute?.x??0)+i.x+i.width/2,y:(e.positionAbsolute?.y??0)+i.y+i.height/2}),t),[])}const qd={source:null,target:null,sourceHandle:null,targetHandle:null},Kd=()=>({handleDomNode:null,isValid:!1,connection:qd,endHandle:null});function Yd(e,t,n,r,i,o,s){const a="target"===i,l=s.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),c={...Kd(),handleDomNode:l};if(l){const e=Gd(void 0,l),i=l.getAttribute("data-nodeid"),s=l.getAttribute("data-handleid"),u=l.classList.contains("connectable"),d=l.classList.contains("connectableend"),h={source:a?i:n,sourceHandle:a?s:r,target:a?n:i,targetHandle:a?r:s};c.connection=h;u&&d&&(t===fd.Strict?a&&"source"===e||!a&&"target"===e:i!==n||s!==r)&&(c.endHandle={nodeId:i,handleId:s,type:e},c.isValid=o(h))}return c}function Gd(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function Xd(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function Jd(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Qd(e){let{event:t,handleId:n,nodeId:r,onConnect:i,isTarget:o,getState:s,setState:a,isValidConnection:l,edgeUpdaterType:c,onReconnectEnd:u}=e;const d=Yu(t.target),{connectionMode:h,domNode:f,autoPanOnConnect:p,connectionRadius:m,onConnectStart:g,panBy:v,getNodes:y,cancelConnection:_}=s();let b,x=0;const{x:w,y:S}=ad(t),k=d?.elementFromPoint(w,S),E=Gd(c,k),N=f?.getBoundingClientRect();if(!N||!E)return;let j,C=ad(t,N),T=!1,P=null,L=!1,O=null;const A=function(e){let{nodes:t,nodeId:n,handleId:r,handleType:i}=e;return t.reduce((e,t)=>{if(t[nd]){const{handleBounds:o}=t[nd];let s=[],a=[];o&&(s=Vd(t,o,"source",`${n}-${r}-${i}`),a=Vd(t,o,"target",`${n}-${r}-${i}`)),e.push(...s,...a)}return e},[])}({nodes:y(),nodeId:r,handleId:n,handleType:E}),M=()=>{if(!p)return;const[e,t]=Ku(C,N);v({x:e,y:t}),x=requestAnimationFrame(M)};function R(e){const{transform:t}=s();C=ad(e,N);const{handle:i,validHandleResult:c}=function(e,t,n,r,i,o){const{x:s,y:a}=ad(e),l=t.elementsFromPoint(s,a).find(e=>e.classList.contains("react-flow__handle"));if(l){const e=l.getAttribute("data-nodeid");if(e){const t=Gd(void 0,l),r=l.getAttribute("data-handleid"),s=o({nodeId:e,id:r,type:t});if(s){const o=i.find(n=>n.nodeId===e&&n.type===t&&n.id===r);return{handle:{id:r,type:t,nodeId:e,x:o?.x||n.x,y:o?.y||n.y},validHandleResult:s}}}}let c=[],u=1/0;if(i.forEach(e=>{const t=Math.sqrt((e.x-n.x)**2+(e.y-n.y)**2);if(t<=r){const n=o(e);t<=u&&(t<u?c=[{handle:e,validHandleResult:n}]:t===u&&c.push({handle:e,validHandleResult:n}),u=t)}}),!c.length)return{handle:null,validHandleResult:Kd()};if(1===c.length)return c[0];const d=c.some(e=>{let{validHandleResult:t}=e;return t.isValid}),h=c.some(e=>{let{handle:t}=e;return"target"===t.type});return c.find(e=>{let{handle:t,validHandleResult:n}=e;return h?"target"===t.type:!d||n.isValid})||c[0]}(e,d,Dd(C,t,!1,[1,1]),m,A,e=>Yd(e,h,r,n,o?"target":"source",l,d));if(b=i,T||(M(),T=!0),O=c.handleDomNode,P=c.connection,L=c.isValid,a({connectionPosition:b&&L?Bd({x:b.x,y:b.y},t):C,connectionStatus:Jd(!!b,L),connectionEndHandle:c.endHandle}),!b&&!L&&!O)return Xd(j);P.source!==P.target&&O&&(Xd(j),j=O,O.classList.add("connecting","react-flow__handle-connecting"),O.classList.toggle("valid",L),O.classList.toggle("react-flow__handle-valid",L))}function I(e){(b||O)&&P&&L&&i?.(P),s().onConnectEnd?.(e),c&&u?.(e),Xd(j),_(),cancelAnimationFrame(x),T=!1,L=!1,P=null,O=null,d.removeEventListener("mousemove",R),d.removeEventListener("mouseup",I),d.removeEventListener("touchmove",R),d.removeEventListener("touchend",I)}a({connectionPosition:C,connectionStatus:null,connectionNodeId:r,connectionHandleId:n,connectionHandleType:E,connectionStartHandle:{nodeId:r,handleId:n,type:E},connectionEndHandle:null}),g?.(t,{nodeId:r,handleId:n,handleType:E}),d.addEventListener("mousemove",R),d.addEventListener("mouseup",I),d.addEventListener("touchmove",R),d.addEventListener("touchend",I)}const eh=()=>!0,th=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),nh=(0,r.forwardRef)((e,t)=>{let{type:n="source",position:i=yd.Top,isValidConnection:o,isConnectable:s=!0,isConnectableStart:a=!0,isConnectableEnd:l=!0,id:c,onConnect:u,children:d,className:h,onMouseDown:f,onTouchStart:p,...m}=e;const g=c||null,v="target"===n,y=Bu(),_=(0,r.useContext)(Ad),{connectOnClick:b,noPanClassName:x}=Du(th,Ds),{connecting:w,clickConnecting:S}=Du(((e,t,n)=>r=>{const{connectionStartHandle:i,connectionEndHandle:o,connectionClickStartHandle:s}=r;return{connecting:i?.nodeId===e&&i?.handleId===t&&i?.type===n||o?.nodeId===e&&o?.handleId===t&&o?.type===n,clickConnecting:s?.nodeId===e&&s?.handleId===t&&s?.type===n}})(_,g,n),Ds);_||y.getState().onError?.("010",Mu());const k=e=>{const{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:r}=y.getState(),i={...t,...e};if(r){const{edges:e,setEdges:t}=y.getState();t(zd(i,e))}n?.(i),u?.(i)},E=e=>{if(!_)return;const t=sd(e);a&&(t&&0===e.button||!t)&&Qd({event:e,handleId:g,nodeId:_,onConnect:k,isTarget:v,getState:y.getState,setState:y.setState,isValidConnection:o||y.getState().isValidConnection||eh}),t?f?.(e):p?.(e)};return r.createElement("div",{"data-handleid":g,"data-nodeid":_,"data-handlepos":i,"data-id":`${_}-${g}-${n}`,className:Ts(["react-flow__handle",`react-flow__handle-${i}`,"nodrag",x,h,{source:!v,target:v,connectable:s,connectablestart:a,connectableend:l,connecting:S,connectionindicator:s&&(a&&!w||l&&w)}]),onMouseDown:E,onTouchStart:E,onClick:b?e=>{const{onClickConnectStart:t,onClickConnectEnd:r,connectionClickStartHandle:i,connectionMode:s,isValidConnection:l}=y.getState();if(!_||!i&&!a)return;if(!i)return t?.(e,{nodeId:_,handleId:g,handleType:n}),void y.setState({connectionClickStartHandle:{nodeId:_,type:n,handleId:g}});const c=Yu(e.target),u=o||l||eh,{connection:d,isValid:h}=Yd({nodeId:_,id:g,type:n},s,i.nodeId,i.handleId||null,i.type,u,c);h&&k(d),r?.(e),y.setState({connectionClickStartHandle:null})}:void 0,ref:t,...m},d)});nh.displayName="Handle";var rh=(0,r.memo)(nh);const ih=e=>{let{data:t,isConnectable:n,targetPosition:i=yd.Top,sourcePosition:o=yd.Bottom}=e;return r.createElement(r.Fragment,null,r.createElement(rh,{type:"target",position:i,isConnectable:n}),t?.label,r.createElement(rh,{type:"source",position:o,isConnectable:n}))};ih.displayName="DefaultNode";var oh=(0,r.memo)(ih);const sh=e=>{let{data:t,isConnectable:n,sourcePosition:i=yd.Bottom}=e;return r.createElement(r.Fragment,null,t?.label,r.createElement(rh,{type:"source",position:i,isConnectable:n}))};sh.displayName="InputNode";var ah=(0,r.memo)(sh);const lh=e=>{let{data:t,isConnectable:n,targetPosition:i=yd.Top}=e;return r.createElement(r.Fragment,null,r.createElement(rh,{type:"target",position:i,isConnectable:n}),t?.label)};lh.displayName="OutputNode";var ch=(0,r.memo)(lh);const uh=()=>null;uh.displayName="GroupNode";const dh=e=>({selectedNodes:e.getNodes().filter(e=>e.selected),selectedEdges:e.edges.filter(e=>e.selected).map(e=>({...e}))}),hh=e=>e.id;function fh(e,t){return Ds(e.selectedNodes.map(hh),t.selectedNodes.map(hh))&&Ds(e.selectedEdges.map(hh),t.selectedEdges.map(hh))}const ph=(0,r.memo)(e=>{let{onSelectionChange:t}=e;const n=Bu(),{selectedNodes:i,selectedEdges:o}=Du(dh,fh);return(0,r.useEffect)(()=>{const e={nodes:i,edges:o};t?.(e),n.getState().onSelectionChange.forEach(t=>t(e))},[i,o,t]),null});ph.displayName="SelectionListener";const mh=e=>!!e.onSelectionChange;function gh(e){let{onSelectionChange:t}=e;const n=Du(mh);return t||n?r.createElement(ph,{onSelectionChange:t}):null}const vh=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function yh(e,t){(0,r.useEffect)(()=>{"undefined"!==typeof e&&t(e)},[e])}function _h(e,t,n){(0,r.useEffect)(()=>{"undefined"!==typeof t&&n({[e]:t})},[t])}const bh=e=>{let{nodes:t,edges:n,defaultNodes:i,defaultEdges:o,onConnect:s,onConnectStart:a,onConnectEnd:l,onClickConnectStart:c,onClickConnectEnd:u,nodesDraggable:d,nodesConnectable:h,nodesFocusable:f,edgesFocusable:p,edgesUpdatable:m,elevateNodesOnSelect:g,minZoom:v,maxZoom:y,nodeExtent:_,onNodesChange:b,onEdgesChange:x,elementsSelectable:w,connectionMode:S,snapGrid:k,snapToGrid:E,translateExtent:N,connectOnClick:j,defaultEdgeOptions:C,fitView:T,fitViewOptions:P,onNodesDelete:L,onEdgesDelete:O,onNodeDrag:A,onNodeDragStart:M,onNodeDragStop:R,onSelectionDrag:I,onSelectionDragStart:z,onSelectionDragStop:D,noPanClassName:B,nodeOrigin:$,rfId:U,autoPanOnConnect:F,autoPanOnNodeDrag:H,onError:Z,connectionRadius:W,isValidConnection:V,nodeDragThreshold:q}=e;const{setNodes:K,setEdges:Y,setDefaultNodesAndEdges:G,setMinZoom:X,setMaxZoom:J,setTranslateExtent:Q,setNodeExtent:ee,reset:te}=Du(vh,Ds),ne=Bu();return(0,r.useEffect)(()=>{const e=o?.map(e=>({...e,...C}));return G(i,e),()=>{te()}},[]),_h("defaultEdgeOptions",C,ne.setState),_h("connectionMode",S,ne.setState),_h("onConnect",s,ne.setState),_h("onConnectStart",a,ne.setState),_h("onConnectEnd",l,ne.setState),_h("onClickConnectStart",c,ne.setState),_h("onClickConnectEnd",u,ne.setState),_h("nodesDraggable",d,ne.setState),_h("nodesConnectable",h,ne.setState),_h("nodesFocusable",f,ne.setState),_h("edgesFocusable",p,ne.setState),_h("edgesUpdatable",m,ne.setState),_h("elementsSelectable",w,ne.setState),_h("elevateNodesOnSelect",g,ne.setState),_h("snapToGrid",E,ne.setState),_h("snapGrid",k,ne.setState),_h("onNodesChange",b,ne.setState),_h("onEdgesChange",x,ne.setState),_h("connectOnClick",j,ne.setState),_h("fitViewOnInit",T,ne.setState),_h("fitViewOnInitOptions",P,ne.setState),_h("onNodesDelete",L,ne.setState),_h("onEdgesDelete",O,ne.setState),_h("onNodeDrag",A,ne.setState),_h("onNodeDragStart",M,ne.setState),_h("onNodeDragStop",R,ne.setState),_h("onSelectionDrag",I,ne.setState),_h("onSelectionDragStart",z,ne.setState),_h("onSelectionDragStop",D,ne.setState),_h("noPanClassName",B,ne.setState),_h("nodeOrigin",$,ne.setState),_h("rfId",U,ne.setState),_h("autoPanOnConnect",F,ne.setState),_h("autoPanOnNodeDrag",H,ne.setState),_h("onError",Z,ne.setState),_h("connectionRadius",W,ne.setState),_h("isValidConnection",V,ne.setState),_h("nodeDragThreshold",q,ne.setState),yh(t,K),yh(n,Y),yh(v,X),yh(y,J),yh(N,Q),yh(_,ee),null},xh={display:"none"},wh={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Sh="react-flow__node-desc",kh="react-flow__edge-desc",Eh=e=>e.ariaLiveMessage;function Nh(e){let{rfId:t}=e;const n=Du(Eh);return r.createElement("div",{id:`react-flow__aria-live-${t}`,"aria-live":"assertive","aria-atomic":"true",style:wh},n)}function jh(e){let{rfId:t,disableKeyboardA11y:n}=e;return r.createElement(r.Fragment,null,r.createElement("div",{id:`${Sh}-${t}`,style:xh},"Press enter or space to select a node.",!n&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),r.createElement("div",{id:`${kh}-${t}`,style:xh},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!n&&r.createElement(Nh,{rfId:t}))}var Ch=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{actInsideInputWithModifier:!0};const[n,i]=(0,r.useState)(!1),o=(0,r.useRef)(!1),s=(0,r.useRef)(new Set([])),[a,l]=(0,r.useMemo)(()=>{if(null!==e){const t=(Array.isArray(e)?e:[e]).filter(e=>"string"===typeof e).map(e=>e.split("+")),n=t.reduce((e,t)=>e.concat(...t),[]);return[t,n]}return[[],[]]},[e]);return(0,r.useEffect)(()=>{const n="undefined"!==typeof document?document:null,r=t?.target||n;if(null!==e){const e=e=>{o.current=e.ctrlKey||e.metaKey||e.shiftKey;if((!o.current||o.current&&!t.actInsideInputWithModifier)&&od(e))return!1;const n=Ph(e.code,l);s.current.add(e[n]),Th(a,s.current,!1)&&(e.preventDefault(),i(!0))},n=e=>{if((!o.current||o.current&&!t.actInsideInputWithModifier)&&od(e))return!1;const n=Ph(e.code,l);Th(a,s.current,!0)?(i(!1),s.current.clear()):s.current.delete(e[n]),"Meta"===e.key&&s.current.clear(),o.current=!1},c=()=>{s.current.clear(),i(!1)};return r?.addEventListener("keydown",e),r?.addEventListener("keyup",n),window.addEventListener("blur",c),()=>{r?.removeEventListener("keydown",e),r?.removeEventListener("keyup",n),window.removeEventListener("blur",c)}}},[e,i]),n};function Th(e,t,n){return e.filter(e=>n||e.length===t.size).some(e=>e.every(e=>t.has(e)))}function Ph(e,t){return t.includes(e)?"code":"key"}function Lh(e,t,n,r){const i=e.parentNode||e.parentId;if(!i)return n;const o=t.get(i),s=$d(o,r);return Lh(o,t,{x:(n.x??0)+s.x,y:(n.y??0)+s.y,z:(o[nd]?.z??0)>(n.z??0)?o[nd]?.z??0:n.z??0},r)}function Oh(e,t,n){e.forEach(r=>{const i=r.parentNode||r.parentId;if(i&&!e.has(i))throw new Error(`Parent node ${i} not found`);if(i||n?.[r.id]){const{x:i,y:o,z:s}=Lh(r,e,{...r.position,z:r[nd]?.z??0},t);r.positionAbsolute={x:i,y:o},r[nd].z=s,n?.[r.id]&&(r[nd].isParent=!0)}})}function Ah(e,t,n,r){const i=new Map,o={},s=r?1e3:0;return e.forEach(e=>{const n=(td(e.zIndex)?e.zIndex:0)+(e.selected?s:0),r=t.get(e.id),a={...e,positionAbsolute:{x:e.position.x,y:e.position.y}},l=e.parentNode||e.parentId;l&&(o[l]=!0);const c=r?.type&&r?.type!==e.type;Object.defineProperty(a,nd,{enumerable:!1,value:{handleBounds:c?void 0:r?.[nd]?.handleBounds,z:n}}),i.set(e.id,a)}),Oh(i,n,o),i}function Mh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{getNodes:n,width:r,height:i,minZoom:o,maxZoom:s,d3Zoom:a,d3Selection:l,fitViewOnInitDone:c,fitViewOnInit:u,nodeOrigin:d}=e(),h=t.initial&&!c&&u;if(a&&l&&(h||!t.initial)){const e=n().filter(e=>{const n=t.includeHiddenNodes?e.width&&e.height:!e.hidden;return t.nodes?.length?n&&t.nodes.some(t=>t.id===e.id):n}),c=e.every(e=>e.width&&e.height);if(e.length>0&&c){const n=Ud(e,d),{x:c,y:u,zoom:h}=Zd(n,r,i,t.minZoom??o,t.maxZoom??s,t.padding??.1),f=uu.translate(c,u).scale(h);return"number"===typeof t.duration&&t.duration>0?a.transform(Wd(l,t.duration),f):a.transform(l,f),!0}}return!1}function Rh(e,t){return e.forEach(e=>{const n=t.get(e.id);n&&t.set(n.id,{...n,[nd]:n[nd],selected:e.selected})}),new Map(t)}function Ih(e,t){return t.map(t=>{const n=e.find(e=>e.id===t.id);return n&&(t.selected=n.selected),t})}function zh(e){let{changedNodes:t,changedEdges:n,get:r,set:i}=e;const{nodeInternals:o,edges:s,onNodesChange:a,onEdgesChange:l,hasDefaultNodes:c,hasDefaultEdges:u}=r();t?.length&&(c&&i({nodeInternals:Rh(t,o)}),a?.(t)),n?.length&&(u&&i({edges:Ih(n,s)}),l?.(n))}const Dh=()=>{},Bh={zoomIn:Dh,zoomOut:Dh,zoomTo:Dh,getZoom:()=>1,setViewport:Dh,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Dh,fitBounds:Dh,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},$h=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection});function Uh(){const e=(()=>{const e=Bu(),{d3Zoom:t,d3Selection:n}=Du($h,Ds),i=(0,r.useMemo)(()=>n&&t?{zoomIn:e=>t.scaleBy(Wd(n,e?.duration),1.2),zoomOut:e=>t.scaleBy(Wd(n,e?.duration),1/1.2),zoomTo:(e,r)=>t.scaleTo(Wd(n,r?.duration),e),getZoom:()=>e.getState().transform[2],setViewport:(r,i)=>{const[o,s,a]=e.getState().transform,l=uu.translate(r.x??o,r.y??s).scale(r.zoom??a);t.transform(Wd(n,i?.duration),l)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},fitView:t=>Mh(e.getState,t),setCenter:(r,i,o)=>{const{width:s,height:a,maxZoom:l}=e.getState(),c="undefined"!==typeof o?.zoom?o.zoom:l,u=s/2-r*c,d=a/2-i*c,h=uu.translate(u,d).scale(c);t.transform(Wd(n,o?.duration),h)},fitBounds:(r,i)=>{const{width:o,height:s,minZoom:a,maxZoom:l}=e.getState(),{x:c,y:u,zoom:d}=Zd(r,o,s,a,l,i?.padding??.1),h=uu.translate(c,u).scale(d);t.transform(Wd(n,i?.duration),h)},project:t=>{const{transform:n,snapToGrid:r,snapGrid:i}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Dd(t,n,r,i)},screenToFlowPosition:t=>{const{transform:n,snapToGrid:r,snapGrid:i,domNode:o}=e.getState();if(!o)return t;const{x:s,y:a}=o.getBoundingClientRect(),l={x:t.x-s,y:t.y-a};return Dd(l,n,r,i)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:i,y:o}=r.getBoundingClientRect(),s=Bd(t,n);return{x:s.x+i,y:s.y+o}},viewportInitialized:!0}:Bh,[t,n]);return i})(),t=Bu(),n=(0,r.useCallback)(()=>t.getState().getNodes().map(e=>({...e})),[]),i=(0,r.useCallback)(e=>t.getState().nodeInternals.get(e),[]),o=(0,r.useCallback)(()=>{const{edges:e=[]}=t.getState();return e.map(e=>({...e}))},[]),s=(0,r.useCallback)(e=>{const{edges:n=[]}=t.getState();return n.find(t=>t.id===e)},[]),a=(0,r.useCallback)(e=>{const{getNodes:n,setNodes:r,hasDefaultNodes:i,onNodesChange:o}=t.getState(),s=n(),a="function"===typeof e?e(s):e;if(i)r(a);else if(o){const e=0===a.length?s.map(e=>({type:"remove",id:e.id})):a.map(e=>({item:e,type:"reset"}));o(e)}},[]),l=(0,r.useCallback)(e=>{const{edges:n=[],setEdges:r,hasDefaultEdges:i,onEdgesChange:o}=t.getState(),s="function"===typeof e?e(n):e;if(i)r(s);else if(o){o(0===s.length?n.map(e=>({type:"remove",id:e.id})):s.map(e=>({item:e,type:"reset"})))}},[]),c=(0,r.useCallback)(e=>{const n=Array.isArray(e)?e:[e],{getNodes:r,setNodes:i,hasDefaultNodes:o,onNodesChange:s}=t.getState();if(o){i([...r(),...n])}else if(s){const e=n.map(e=>({item:e,type:"add"}));s(e)}},[]),u=(0,r.useCallback)(e=>{const n=Array.isArray(e)?e:[e],{edges:r=[],setEdges:i,hasDefaultEdges:o,onEdgesChange:s}=t.getState();if(o)i([...r,...n]);else if(s){s(n.map(e=>({item:e,type:"add"})))}},[]),d=(0,r.useCallback)(()=>{const{getNodes:e,edges:n=[],transform:r}=t.getState(),[i,o,s]=r;return{nodes:e().map(e=>({...e})),edges:n.map(e=>({...e})),viewport:{x:i,y:o,zoom:s}}},[]),h=(0,r.useCallback)(e=>{let{nodes:n,edges:r}=e;const{nodeInternals:i,getNodes:o,edges:s,hasDefaultNodes:a,hasDefaultEdges:l,onNodesDelete:c,onEdgesDelete:u,onNodesChange:d,onEdgesChange:h}=t.getState(),f=(n||[]).map(e=>e.id),p=(r||[]).map(e=>e.id),m=o().reduce((e,t)=>{const n=t.parentNode||t.parentId,r=!f.includes(t.id)&&n&&e.find(e=>e.id===n);return("boolean"!==typeof t.deletable||t.deletable)&&(f.includes(t.id)||r)&&e.push(t),e},[]),g=s.filter(e=>"boolean"!==typeof e.deletable||e.deletable),v=g.filter(e=>p.includes(e.id));if(m||v){const e=Hd(m,g),n=[...v,...e],r=n.reduce((e,t)=>(e.includes(t.id)||e.push(t.id),e),[]);if((l||a)&&(l&&t.setState({edges:s.filter(e=>!r.includes(e.id))}),a&&(m.forEach(e=>{i.delete(e.id)}),t.setState({nodeInternals:new Map(i)}))),r.length>0&&(u?.(n),h&&h(r.map(e=>({id:e,type:"remove"})))),m.length>0&&(c?.(m),d)){d(m.map(e=>({id:e.id,type:"remove"})))}}},[]),f=(0,r.useCallback)(e=>{const n=td((r=e).width)&&td(r.height)&&td(r.x)&&td(r.y);var r;const i=n?null:t.getState().nodeInternals.get(e.id);if(!n&&!i)return[null,null,n];return[n?e:Qu(i),i,n]},[]),p=(0,r.useCallback)(function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0;const[i,o,s]=f(e);return i?(r||t.getState().getNodes()).filter(e=>{if(!s&&(e.id===o.id||!e.positionAbsolute))return!1;const t=Qu(e),r=ed(t,i);return n&&r>0||r>=i.width*i.height}):[]},[]),m=(0,r.useCallback)(function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const[r]=f(e);if(!r)return!1;const i=ed(r,t);return n&&i>0||i>=r.width*r.height},[]);return(0,r.useMemo)(()=>({...e,getNodes:n,getNode:i,getEdges:o,getEdge:s,setNodes:a,setEdges:l,addNodes:c,addEdges:u,toObject:d,deleteElements:h,getIntersectingNodes:p,isNodeIntersecting:m}),[e,n,i,o,s,a,l,c,u,d,h,p,m])}const Fh={actInsideInputWithModifier:!1};const Hh={position:"absolute",width:"100%",height:"100%",top:0,left:0},Zh=e=>({x:e.x,y:e.y,zoom:e.k}),Wh=(e,t)=>e.target.closest(`.${t}`),Vh=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),qh=e=>{const t=e.ctrlKey&&ld()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t},Kh=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),Yh=e=>{let{onMove:t,onMoveStart:n,onMoveEnd:i,onPaneContextMenu:o,zoomOnScroll:s=!0,zoomOnPinch:a=!0,panOnScroll:l=!1,panOnScrollSpeed:c=.5,panOnScrollMode:u=pd.Free,zoomOnDoubleClick:d=!0,elementsSelectable:h,panOnDrag:f=!0,defaultViewport:p,translateExtent:m,minZoom:g,maxZoom:v,zoomActivationKeyCode:y,preventScrolling:_=!0,children:b,noWheelClassName:x,noPanClassName:w}=e;const S=(0,r.useRef)(),k=Bu(),E=(0,r.useRef)(!1),N=(0,r.useRef)(!1),j=(0,r.useRef)(null),C=(0,r.useRef)({x:0,y:0,zoom:0}),{d3Zoom:T,d3Selection:P,d3ZoomHandler:L,userSelectionActive:O}=Du(Kh,Ds),A=Ch(y),M=(0,r.useRef)(0),R=(0,r.useRef)(!1),I=(0,r.useRef)();return function(e){const t=Bu();(0,r.useEffect)(()=>{let n;const r=()=>{if(!e.current)return;const n=Zu(e.current);0!==n.height&&0!==n.width||t.getState().onError?.("004",Tu()),t.setState({width:n.width||500,height:n.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}(j),(0,r.useEffect)(()=>{if(j.current){const e=j.current.getBoundingClientRect(),t=_u().scaleExtent([g,v]).translateExtent(m),n=il(j.current).call(t),r=uu.translate(p.x,p.y).scale(Wu(p.zoom,g,v)),i=[[0,0],[e.width,e.height]],o=t.constrain()(r,i,m);t.transform(n,o),t.wheelDelta(qh),k.setState({d3Zoom:t,d3Selection:n,d3ZoomHandler:n.on("wheel.zoom"),transform:[o.x,o.y,o.k],domNode:j.current.closest(".react-flow")})}},[]),(0,r.useEffect)(()=>{P&&T&&(!l||A||O?"undefined"!==typeof L&&P.on("wheel.zoom",function(e,t){if(!_&&"wheel"===e.type&&!e.ctrlKey||Wh(e,x))return null;e.preventDefault(),L.call(this,e,t)},{passive:!1}):P.on("wheel.zoom",e=>{if(Wh(e,x))return!1;e.preventDefault(),e.stopImmediatePropagation();const r=P.property("__zoom").k||1;if(e.ctrlKey&&a){const t=fl(e),n=qh(e),i=r*Math.pow(2,n);return void T.scaleTo(P,i,t,e)}const o=1===e.deltaMode?20:1;let s=u===pd.Vertical?0:e.deltaX*o,l=u===pd.Horizontal?0:e.deltaY*o;!ld()&&e.shiftKey&&u!==pd.Vertical&&(s=e.deltaY*o,l=0),T.translateBy(P,-s/r*c,-l/r*c,{internal:!0});const d=Zh(P.property("__zoom")),{onViewportChangeStart:h,onViewportChange:f,onViewportChangeEnd:p}=k.getState();clearTimeout(I.current),R.current||(R.current=!0,n?.(e,d),h?.(d)),R.current&&(t?.(e,d),f?.(d),I.current=setTimeout(()=>{i?.(e,d),p?.(d),R.current=!1},150))},{passive:!1}))},[O,l,u,P,T,L,A,a,_,x,n,t,i]),(0,r.useEffect)(()=>{T&&T.on("start",e=>{if(!e.sourceEvent||e.sourceEvent.internal)return null;M.current=e.sourceEvent?.button;const{onViewportChangeStart:t}=k.getState(),r=Zh(e.transform);E.current=!0,C.current=r,"mousedown"===e.sourceEvent?.type&&k.setState({paneDragging:!0}),t?.(r),n?.(e.sourceEvent,r)})},[T,n]),(0,r.useEffect)(()=>{T&&(O&&!E.current?T.on("zoom",null):O||T.on("zoom",e=>{const{onViewportChange:n}=k.getState();if(k.setState({transform:[e.transform.x,e.transform.y,e.transform.k]}),N.current=!(!o||!Vh(f,M.current??0)),(t||n)&&!e.sourceEvent?.internal){const r=Zh(e.transform);n?.(r),t?.(e.sourceEvent,r)}}))},[O,T,t,f,o]),(0,r.useEffect)(()=>{T&&T.on("end",e=>{if(!e.sourceEvent||e.sourceEvent.internal)return null;const{onViewportChangeEnd:t}=k.getState();if(E.current=!1,k.setState({paneDragging:!1}),o&&Vh(f,M.current??0)&&!N.current&&o(e.sourceEvent),N.current=!1,(i||t)&&(n=C.current,r=e.transform,n.x!==r.x||n.y!==r.y||n.zoom!==r.k)){const n=Zh(e.transform);C.current=n,clearTimeout(S.current),S.current=setTimeout(()=>{t?.(n),i?.(e.sourceEvent,n)},l?150:0)}var n,r})},[T,l,f,i,o]),(0,r.useEffect)(()=>{T&&T.filter(e=>{const t=A||s,n=a&&e.ctrlKey;if((!0===f||Array.isArray(f)&&f.includes(1))&&1===e.button&&"mousedown"===e.type&&(Wh(e,"react-flow__node")||Wh(e,"react-flow__edge")))return!0;if(!f&&!t&&!l&&!d&&!a)return!1;if(O)return!1;if(!d&&"dblclick"===e.type)return!1;if(Wh(e,x)&&"wheel"===e.type)return!1;if(Wh(e,w)&&("wheel"!==e.type||l&&"wheel"===e.type&&!A))return!1;if(!a&&e.ctrlKey&&"wheel"===e.type)return!1;if(!t&&!l&&!n&&"wheel"===e.type)return!1;if(!f&&("mousedown"===e.type||"touchstart"===e.type))return!1;if(Array.isArray(f)&&!f.includes(e.button)&&"mousedown"===e.type)return!1;const r=Array.isArray(f)&&f.includes(e.button)||!e.button||e.button<=1;return(!e.ctrlKey||"wheel"===e.type)&&r})},[O,T,s,a,l,d,f,h,A]),r.createElement("div",{className:"react-flow__renderer",ref:j,style:Hh},b)},Gh=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Xh(){const{userSelectionActive:e,userSelectionRect:t}=Du(Gh,Ds);return e&&t?r.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Jh(e,t){const n=t.parentNode||t.parentId,r=e.find(e=>e.id===n);if(r){const e=t.position.x+t.width-r.width,n=t.position.y+t.height-r.height;if(e>0||n>0||t.position.x<0||t.position.y<0){if(r.style={...r.style}||{},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,e>0&&(r.style.width+=e),n>0&&(r.style.height+=n),t.position.x<0){const e=Math.abs(t.position.x);r.position.x=r.position.x-e,r.style.width+=e,t.position.x=0}if(t.position.y<0){const e=Math.abs(t.position.y);r.position.y=r.position.y-e,r.style.height+=e,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function Qh(e,t){if(e.some(e=>"reset"===e.type))return e.filter(e=>"reset"===e.type).map(e=>e.item);const n=e.filter(e=>"add"===e.type).map(e=>e.item);return t.reduce((t,n)=>{const r=e.filter(e=>e.id===n.id);if(0===r.length)return t.push(n),t;const i={...n};for(const e of r)if(e)switch(e.type){case"select":i.selected=e.selected;break;case"position":"undefined"!==typeof e.position&&(i.position=e.position),"undefined"!==typeof e.positionAbsolute&&(i.positionAbsolute=e.positionAbsolute),"undefined"!==typeof e.dragging&&(i.dragging=e.dragging),i.expandParent&&Jh(t,i);break;case"dimensions":"undefined"!==typeof e.dimensions&&(i.width=e.dimensions.width,i.height=e.dimensions.height),"undefined"!==typeof e.updateStyle&&(i.style={...i.style||{},...e.dimensions}),"boolean"===typeof e.resizing&&(i.resizing=e.resizing),i.expandParent&&Jh(t,i);break;case"remove":return t}return t.push(i),t},n)}function ef(e,t){return Qh(e,t)}const tf=(e,t)=>({id:e,type:"select",selected:t});function nf(e,t){return e.reduce((e,n)=>{const r=t.includes(n.id);return!n.selected&&r?(n.selected=!0,e.push(tf(n.id,!0))):n.selected&&!r&&(n.selected=!1,e.push(tf(n.id,!1))),e},[])}const rf=(e,t)=>n=>{n.target===t.current&&e?.(n)},of=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),sf=(0,r.memo)(e=>{let{isSelecting:t,selectionMode:n=md.Full,panOnDrag:i,onSelectionStart:o,onSelectionEnd:s,onPaneClick:a,onPaneContextMenu:l,onPaneScroll:c,onPaneMouseEnter:u,onPaneMouseMove:d,onPaneMouseLeave:h,children:f}=e;const p=(0,r.useRef)(null),m=Bu(),g=(0,r.useRef)(0),v=(0,r.useRef)(0),y=(0,r.useRef)(),{userSelectionActive:_,elementsSelectable:b,dragging:x}=Du(of,Ds),w=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),g.current=0,v.current=0},S=e=>{a?.(e),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},k=c?e=>c(e):void 0,E=b&&(t||_);return r.createElement("div",{className:Ts(["react-flow__pane",{dragging:x,selection:t}]),onClick:E?void 0:rf(S,p),onContextMenu:rf(e=>{Array.isArray(i)&&i?.includes(2)?e.preventDefault():l?.(e)},p),onWheel:rf(k,p),onMouseEnter:E?void 0:u,onMouseDown:E?e=>{const{resetSelectedElements:n,domNode:r}=m.getState();if(y.current=r?.getBoundingClientRect(),!b||!t||0!==e.button||e.target!==p.current||!y.current)return;const{x:i,y:s}=ad(e,y.current);n(),m.setState({userSelectionRect:{width:0,height:0,startX:i,startY:s,x:i,y:s}}),o?.(e)}:void 0,onMouseMove:E?e=>{const{userSelectionRect:r,nodeInternals:i,edges:o,transform:s,onNodesChange:a,onEdgesChange:l,nodeOrigin:c,getNodes:u}=m.getState();if(!t||!y.current||!r)return;m.setState({userSelectionActive:!0,nodesSelectionActive:!1});const d=ad(e,y.current),h=r.startX??0,f=r.startY??0,p={...r,x:d.x<h?d.x:h,y:d.y<f?d.y:f,width:Math.abs(d.x-h),height:Math.abs(d.y-f)},_=u(),b=Fd(i,p,s,n===md.Partial,!0,c),x=Hd(b,o).map(e=>e.id),w=b.map(e=>e.id);if(g.current!==w.length){g.current=w.length;const e=nf(_,w);e.length&&a?.(e)}if(v.current!==x.length){v.current=x.length;const e=nf(o,x);e.length&&l?.(e)}m.setState({userSelectionRect:p})}:d,onMouseUp:E?e=>{if(0!==e.button)return;const{userSelectionRect:t}=m.getState();!_&&t&&e.target===p.current&&S?.(e),m.setState({nodesSelectionActive:g.current>0}),w(),s?.(e)}:void 0,onMouseLeave:E?e=>{_&&(m.setState({nodesSelectionActive:g.current>0}),s?.(e)),w()}:h,ref:p,style:Hh},f,r.createElement(Xh,null))});function af(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const r=t.get(n);return!!r&&(!!r.selected||af(r,t))}function lf(e,t,n){let r=e;do{if(r?.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function cf(e,t,n,r){return Array.from(e.values()).filter(n=>(n.selected||n.id===r)&&(!n.parentNode||n.parentId||!af(n,e))&&(n.draggable||t&&"undefined"===typeof n.draggable)).map(e=>({id:e.id,position:e.position||{x:0,y:0},positionAbsolute:e.positionAbsolute||{x:0,y:0},distance:{x:n.x-(e.positionAbsolute?.x??0),y:n.y-(e.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:e.extent,parentNode:e.parentNode||e.parentId,parentId:e.parentNode||e.parentId,width:e.width,height:e.height,expandParent:e.expandParent}))}function uf(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0],o=arguments.length>5?arguments[5]:void 0;const s=function(e,t){return t&&"parent"!==t?[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]:t}(e,e.extent||r);let a=s;const l=e.parentNode||e.parentId;if("parent"!==e.extent||e.expandParent){if(e.extent&&l&&"parent"!==e.extent){const t=n.get(l),{x:r,y:o}=$d(t,i).positionAbsolute;a=[[e.extent[0][0]+r,e.extent[0][1]+o],[e.extent[1][0]+r,e.extent[1][1]+o]]}}else if(l&&e.width&&e.height){const t=n.get(l),{x:r,y:o}=$d(t,i).positionAbsolute;a=t&&td(r)&&td(o)&&td(t.width)&&td(t.height)?[[r+e.width*i[0],o+e.height*i[1]],[r+t.width-e.width+e.width*i[0],o+t.height-e.height+e.height*i[1]]]:a}else o?.("005",Pu()),a=s;let c={x:0,y:0};if(l){const e=n.get(l);c=$d(e,i).positionAbsolute}const u=a&&"parent"!==a?Vu(t,a):t;return{position:{x:u.x-c.x,y:u.y-c.y},positionAbsolute:u}}function df(e){let{nodeId:t,dragItems:n,nodeInternals:r}=e;const i=n.map(e=>({...r.get(e.id),position:e.position,positionAbsolute:e.positionAbsolute}));return[t?i.find(e=>e.id===t):i[0],i]}sf.displayName="Pane";const hf=(e,t,n,r)=>{const i=t.querySelectorAll(e);if(!i||!i.length)return null;const o=Array.from(i),s=t.getBoundingClientRect(),a=s.width*r[0],l=s.height*r[1];return o.map(e=>{const t=e.getBoundingClientRect();return{id:e.getAttribute("data-handleid"),position:e.getAttribute("data-handlepos"),x:(t.left-s.left-a)/n,y:(t.top-s.top-l)/n,...Zu(e)}})};function ff(e,t,n){return void 0===n?n:r=>{const i=t().nodeInternals.get(e);i&&n(r,{...i})}}function pf(e){let{id:t,store:n,unselect:r=!1,nodeRef:i}=e;const{addSelectedNodes:o,unselectNodesAndEdges:s,multiSelectionActive:a,nodeInternals:l,onError:c}=n.getState(),u=l.get(t);u?(n.setState({nodesSelectionActive:!1}),u.selected?(r||u.selected&&a)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>i?.current?.blur())):o([t])):c?.("012",Iu(t))}function mf(e){return(t,n,r)=>e?.(t,r)}function gf(e){let{nodeRef:t,disabled:n=!1,noDragClassName:i,handleSelector:o,nodeId:s,isSelectable:a,selectNodesOnDrag:l}=e;const c=Bu(),[u,d]=(0,r.useState)(!1),h=(0,r.useRef)([]),f=(0,r.useRef)({x:null,y:null}),p=(0,r.useRef)(0),m=(0,r.useRef)(null),g=(0,r.useRef)({x:0,y:0}),v=(0,r.useRef)(null),y=(0,r.useRef)(!1),_=(0,r.useRef)(!1),b=(0,r.useRef)(!1),x=function(){const e=Bu(),t=(0,r.useCallback)(t=>{let{sourceEvent:n}=t;const{transform:r,snapGrid:i,snapToGrid:o}=e.getState(),s=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,l={x:(s-r[0])/r[2],y:(a-r[1])/r[2]};return{xSnapped:o?i[0]*Math.round(l.x/i[0]):l.x,ySnapped:o?i[1]*Math.round(l.y/i[1]):l.y,...l}},[]);return t}();return(0,r.useEffect)(()=>{if(t?.current){const e=il(t.current),r=e=>{let{x:t,y:n}=e;const{nodeInternals:r,onNodeDrag:i,onSelectionDrag:o,updateNodePositions:a,nodeExtent:l,snapGrid:u,snapToGrid:p,nodeOrigin:m,onError:g}=c.getState();f.current={x:t,y:n};let y=!1,_={x:0,y:0,x2:0,y2:0};if(h.current.length>1&&l){const e=Ud(h.current,m);_=Xu(e)}if(h.current=h.current.map(e=>{const i={x:t-e.distance.x,y:n-e.distance.y};p&&(i.x=u[0]*Math.round(i.x/u[0]),i.y=u[1]*Math.round(i.y/u[1]));const o=[[l[0][0],l[0][1]],[l[1][0],l[1][1]]];h.current.length>1&&l&&!e.extent&&(o[0][0]=e.positionAbsolute.x-_.x+l[0][0],o[1][0]=e.positionAbsolute.x+(e.width??0)-_.x2+l[1][0],o[0][1]=e.positionAbsolute.y-_.y+l[0][1],o[1][1]=e.positionAbsolute.y+(e.height??0)-_.y2+l[1][1]);const s=uf(e,i,r,o,m,g);return y=y||e.position.x!==s.position.x||e.position.y!==s.position.y,e.position=s.position,e.positionAbsolute=s.positionAbsolute,e}),!y)return;a(h.current,!0,!0),d(!0);const b=s?i:mf(o);if(b&&v.current){const[e,t]=df({nodeId:s,dragItems:h.current,nodeInternals:r});b(v.current,e,t)}},u=()=>{if(!m.current)return;const[e,t]=Ku(g.current,m.current);if(0!==e||0!==t){const{transform:n,panBy:i}=c.getState();f.current.x=(f.current.x??0)-e/n[2],f.current.y=(f.current.y??0)-t/n[2],i({x:e,y:t})&&r(f.current)}p.current=requestAnimationFrame(u)},w=e=>{const{nodeInternals:n,multiSelectionActive:r,nodesDraggable:i,unselectNodesAndEdges:o,onNodeDragStart:u,onSelectionDragStart:d}=c.getState();_.current=!0;const p=s?u:mf(d);l&&a||r||!s||n.get(s)?.selected||o(),s&&a&&l&&pf({id:s,store:c,nodeRef:t});const m=x(e);if(f.current=m,h.current=cf(n,i,m,s),p&&h.current){const[t,r]=df({nodeId:s,dragItems:h.current,nodeInternals:n});p(e.sourceEvent,t,r)}};if(!n){const n=function(){var e,t,n,r,i=wu,o=Su,s=ku,a=Eu,l={},c=Zs("start","drag","end"),u=0,d=0;function h(e){e.on("mousedown.drag",f).filter(a).on("touchstart.drag",g).on("touchmove.drag",v,ol).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(s,a){if(!r&&i.call(this,s,a)){var l=_(this,o.call(this,s,a),s,a,"mouse");l&&(il(s.view).on("mousemove.drag",p,sl).on("mouseup.drag",m,sl),cl(s.view),al(s),n=!1,e=s.clientX,t=s.clientY,l("start",s))}}function p(r){if(ll(r),!n){var i=r.clientX-e,o=r.clientY-t;n=i*i+o*o>d}l.mouse("drag",r)}function m(e){il(e.view).on("mousemove.drag mouseup.drag",null),ul(e.view,n),ll(e),l.mouse("end",e)}function g(e,t){if(i.call(this,e,t)){var n,r,s=e.changedTouches,a=o.call(this,e,t),l=s.length;for(n=0;n<l;++n)(r=_(this,a,e,t,s[n].identifier,s[n]))&&(al(e),r("start",e,s[n]))}}function v(e){var t,n,r=e.changedTouches,i=r.length;for(t=0;t<i;++t)(n=l[r[t].identifier])&&(ll(e),n("drag",e,r[t]))}function y(e){var t,n,i=e.changedTouches,o=i.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),t=0;t<o;++t)(n=l[i[t].identifier])&&(al(e),n("end",e,i[t]))}function _(e,t,n,r,i,o){var a,d,f,p=c.copy(),m=fl(o||n,t);if(null!=(f=s.call(e,new xu("beforestart",{sourceEvent:n,target:h,identifier:i,active:u,x:m[0],y:m[1],dx:0,dy:0,dispatch:p}),r)))return a=f.x-m[0]||0,d=f.y-m[1]||0,function n(o,s,c){var g,v=m;switch(o){case"start":l[i]=n,g=u++;break;case"end":delete l[i],--u;case"drag":m=fl(c||s,t),g=u}p.call(o,e,new xu(o,{sourceEvent:s,subject:f,target:h,identifier:i,active:g,x:m[0]+a,y:m[1]+d,dx:m[0]-v[0],dy:m[1]-v[1],dispatch:p}),r)}}return h.filter=function(e){return arguments.length?(i="function"===typeof e?e:bu(!!e),h):i},h.container=function(e){return arguments.length?(o="function"===typeof e?e:bu(e),h):o},h.subject=function(e){return arguments.length?(s="function"===typeof e?e:bu(e),h):s},h.touchable=function(e){return arguments.length?(a="function"===typeof e?e:bu(!!e),h):a},h.on=function(){var e=c.on.apply(c,arguments);return e===c?h:e},h.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,h):Math.sqrt(d)},h}().on("start",e=>{const{domNode:t,nodeDragThreshold:n}=c.getState();0===n&&w(e),b.current=!1;const r=x(e);f.current=r,m.current=t?.getBoundingClientRect()||null,g.current=ad(e.sourceEvent,m.current)}).on("drag",e=>{const t=x(e),{autoPanOnNodeDrag:n,nodeDragThreshold:i}=c.getState();if("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1&&(b.current=!0),!b.current){if(!y.current&&_.current&&n&&(y.current=!0,u()),!_.current){const n=t.xSnapped-(f?.current?.x??0),r=t.ySnapped-(f?.current?.y??0);Math.sqrt(n*n+r*r)>i&&w(e)}(f.current.x!==t.xSnapped||f.current.y!==t.ySnapped)&&h.current&&_.current&&(v.current=e.sourceEvent,g.current=ad(e.sourceEvent,m.current),r(t))}}).on("end",e=>{if(_.current&&!b.current&&(d(!1),y.current=!1,_.current=!1,cancelAnimationFrame(p.current),h.current)){const{updateNodePositions:t,nodeInternals:n,onNodeDragStop:r,onSelectionDragStop:i}=c.getState(),o=s?r:mf(i);if(t(h.current,!1,!1),o){const[t,r]=df({nodeId:s,dragItems:h.current,nodeInternals:n});o(e.sourceEvent,t,r)}}}).filter(e=>{const n=e.target;return!e.button&&(!i||!lf(n,`.${i}`,t))&&(!o||lf(n,o,t))});return e.call(n),()=>{e.on(".drag",null)}}e.on(".drag",null)}},[t,n,i,o,a,c,s,l,x]),u}function vf(){const e=Bu();return(0,r.useCallback)(t=>{const{nodeInternals:n,nodeExtent:r,updateNodePositions:i,getNodes:o,snapToGrid:s,snapGrid:a,onError:l,nodesDraggable:c}=e.getState(),u=o().filter(e=>e.selected&&(e.draggable||c&&"undefined"===typeof e.draggable)),d=s?a[0]:5,h=s?a[1]:5,f=t.isShiftPressed?4:1,p=t.x*d*f,m=t.y*h*f;i(u.map(e=>{if(e.positionAbsolute){const t={x:e.positionAbsolute.x+p,y:e.positionAbsolute.y+m};s&&(t.x=a[0]*Math.round(t.x/a[0]),t.y=a[1]*Math.round(t.y/a[1]));const{positionAbsolute:i,position:o}=uf(e,t,n,r,void 0,l);e.position=o,e.positionAbsolute=i}return e}),!0,!1)},[])}const yf={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var _f=e=>{const t=t=>{let{id:n,type:i,data:o,xPos:s,yPos:a,xPosOrigin:l,yPosOrigin:c,selected:u,onClick:d,onMouseEnter:h,onMouseMove:f,onMouseLeave:p,onContextMenu:m,onDoubleClick:g,style:v,className:y,isDraggable:_,isSelectable:b,isConnectable:x,isFocusable:w,selectNodesOnDrag:S,sourcePosition:k,targetPosition:E,hidden:N,resizeObserver:j,dragHandle:C,zIndex:T,isParent:P,noDragClassName:L,noPanClassName:O,initialized:A,disableKeyboardA11y:M,ariaLabel:R,rfId:I,hasHandleBounds:z}=t;const D=Bu(),B=(0,r.useRef)(null),$=(0,r.useRef)(null),U=(0,r.useRef)(k),F=(0,r.useRef)(E),H=(0,r.useRef)(i),Z=b||_||d||h||f||p,W=vf(),V=ff(n,D.getState,h),q=ff(n,D.getState,f),K=ff(n,D.getState,p),Y=ff(n,D.getState,m),G=ff(n,D.getState,g);(0,r.useEffect)(()=>()=>{$.current&&(j?.unobserve($.current),$.current=null)},[]),(0,r.useEffect)(()=>{if(B.current&&!N){const e=B.current;A&&z&&$.current===e||($.current&&j?.unobserve($.current),j?.observe(e),$.current=e)}},[N,A,z]),(0,r.useEffect)(()=>{const e=H.current!==i,t=U.current!==k,r=F.current!==E;B.current&&(e||t||r)&&(e&&(H.current=i),t&&(U.current=k),r&&(F.current=E),D.getState().updateNodeDimensions([{id:n,nodeElement:B.current,forceUpdate:!0}]))},[n,i,k,E]);const X=gf({nodeRef:B,disabled:N||!_,noDragClassName:L,handleSelector:C,nodeId:n,isSelectable:b,selectNodesOnDrag:S});return N?null:r.createElement("div",{className:Ts(["react-flow__node",`react-flow__node-${i}`,{[O]:_},y,{selected:u,selectable:b,parent:P,dragging:X}]),ref:B,style:{zIndex:T,transform:`translate(${l}px,${c}px)`,pointerEvents:Z?"all":"none",visibility:A?"visible":"hidden",...v},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:V,onMouseMove:q,onMouseLeave:K,onContextMenu:Y,onClick:e=>{const{nodeDragThreshold:t}=D.getState();if(b&&(!S||!_||t>0)&&pf({id:n,store:D,nodeRef:B}),d){const t=D.getState().nodeInternals.get(n);t&&d(e,{...t})}},onDoubleClick:G,onKeyDown:w?e=>{if(!od(e)&&!M)if(rd.includes(e.key)&&b){const t="Escape"===e.key;pf({id:n,store:D,unselect:t,nodeRef:B})}else _&&u&&Object.prototype.hasOwnProperty.call(yf,e.key)&&(D.setState({ariaLiveMessage:`Moved selected node ${e.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~a}`}),W({x:yf[e.key].x,y:yf[e.key].y,isShiftPressed:e.shiftKey}))}:void 0,tabIndex:w?0:void 0,role:w?"button":void 0,"aria-describedby":M?void 0:`${Sh}-${I}`,"aria-label":R},r.createElement(Md,{value:n},r.createElement(e,{id:n,data:o,type:i,xPos:s,yPos:a,selected:u,isConnectable:x,sourcePosition:k,targetPosition:E,dragging:X,dragHandle:C,zIndex:T})))};return t.displayName="NodeWrapper",(0,r.memo)(t)};const bf=e=>{const t=e.getNodes().filter(e=>e.selected);return{...Ud(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};var xf=(0,r.memo)(function(e){let{onSelectionContextMenu:t,noPanClassName:n,disableKeyboardA11y:i}=e;const o=Bu(),{width:s,height:a,x:l,y:c,transformString:u,userSelectionActive:d}=Du(bf,Ds),h=vf(),f=(0,r.useRef)(null);if((0,r.useEffect)(()=>{i||f.current?.focus({preventScroll:!0})},[i]),gf({nodeRef:f}),d||!s||!a)return null;const p=t?e=>{const n=o.getState().getNodes().filter(e=>e.selected);t(e,n)}:void 0;return r.createElement("div",{className:Ts(["react-flow__nodesselection","react-flow__container",n]),style:{transform:u}},r.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:i?void 0:-1,onKeyDown:i?void 0:e=>{Object.prototype.hasOwnProperty.call(yf,e.key)&&h({x:yf[e.key].x,y:yf[e.key].y,isShiftPressed:e.shiftKey})},style:{width:s,height:a,top:c,left:l}}))});const wf=e=>e.nodesSelectionActive,Sf=e=>{let{children:t,onPaneClick:n,onPaneMouseEnter:i,onPaneMouseMove:o,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:l,deleteKeyCode:c,onMove:u,onMoveStart:d,onMoveEnd:h,selectionKeyCode:f,selectionOnDrag:p,selectionMode:m,onSelectionStart:g,onSelectionEnd:v,multiSelectionKeyCode:y,panActivationKeyCode:_,zoomActivationKeyCode:b,elementsSelectable:x,zoomOnScroll:w,zoomOnPinch:S,panOnScroll:k,panOnScrollSpeed:E,panOnScrollMode:N,zoomOnDoubleClick:j,panOnDrag:C,defaultViewport:T,translateExtent:P,minZoom:L,maxZoom:O,preventScrolling:A,onSelectionContextMenu:M,noWheelClassName:R,noPanClassName:I,disableKeyboardA11y:z}=e;const D=Du(wf),B=Ch(f),$=Ch(_),U=$||C,F=$||k,H=B||p&&!0!==U;return(e=>{let{deleteKeyCode:t,multiSelectionKeyCode:n}=e;const i=Bu(),{deleteElements:o}=Uh(),s=Ch(t,Fh),a=Ch(n);(0,r.useEffect)(()=>{if(s){const{edges:e,getNodes:t}=i.getState(),n=t().filter(e=>e.selected),r=e.filter(e=>e.selected);o({nodes:n,edges:r}),i.setState({nodesSelectionActive:!1})}},[s]),(0,r.useEffect)(()=>{i.setState({multiSelectionActive:a})},[a])})({deleteKeyCode:c,multiSelectionKeyCode:y}),r.createElement(Yh,{onMove:u,onMoveStart:d,onMoveEnd:h,onPaneContextMenu:a,elementsSelectable:x,zoomOnScroll:w,zoomOnPinch:S,panOnScroll:F,panOnScrollSpeed:E,panOnScrollMode:N,zoomOnDoubleClick:j,panOnDrag:!B&&U,defaultViewport:T,translateExtent:P,minZoom:L,maxZoom:O,zoomActivationKeyCode:b,preventScrolling:A,noWheelClassName:R,noPanClassName:I},r.createElement(sf,{onSelectionStart:g,onSelectionEnd:v,onPaneClick:n,onPaneMouseEnter:i,onPaneMouseMove:o,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:l,panOnDrag:U,isSelecting:!!H,selectionMode:m},t,D&&r.createElement(xf,{onSelectionContextMenu:M,noPanClassName:I,disableKeyboardA11y:z})))};Sf.displayName="FlowRenderer";var kf=(0,r.memo)(Sf);function Ef(e){const t={input:_f(e.input||ah),default:_f(e.default||oh),output:_f(e.output||ch),group:_f(e.group||uh)},n=Object.keys(e).filter(e=>!["input","default","output","group"].includes(e)).reduce((t,n)=>(t[n]=_f(e[n]||oh),t),{});return{...t,...n}}const Nf=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),jf=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:i,elementsSelectable:o,updateNodeDimensions:s,onError:a}=Du(Nf,Ds),l=(c=e.onlyRenderVisibleElements,Du((0,r.useCallback)(e=>c?Fd(e.nodeInternals,{x:0,y:0,width:e.width,height:e.height},e.transform,!0):e.getNodes(),[c])));var c;const u=(0,r.useRef)(),d=(0,r.useMemo)(()=>{if("undefined"===typeof ResizeObserver)return null;const e=new ResizeObserver(e=>{const t=e.map(e=>({id:e.target.getAttribute("data-id"),nodeElement:e.target,forceUpdate:!0}));s(t)});return u.current=e,e},[]);return(0,r.useEffect)(()=>()=>{u?.current?.disconnect()},[]),r.createElement("div",{className:"react-flow__nodes",style:Hh},l.map(s=>{let l=s.type||"default";e.nodeTypes[l]||(a?.("003",Cu(l)),l="default");const c=e.nodeTypes[l]||e.nodeTypes.default,u=!!(s.draggable||t&&"undefined"===typeof s.draggable),h=!!(s.selectable||o&&"undefined"===typeof s.selectable),f=!!(s.connectable||n&&"undefined"===typeof s.connectable),p=!!(s.focusable||i&&"undefined"===typeof s.focusable),m=e.nodeExtent?Vu(s.positionAbsolute,e.nodeExtent):s.positionAbsolute,g=m?.x??0,v=m?.y??0,y=(e=>{let{x:t,y:n,width:r,height:i,origin:o}=e;return r&&i?o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:t,y:n}:{x:t-r*o[0],y:n-i*o[1]}:{x:t,y:n}})({x:g,y:v,width:s.width??0,height:s.height??0,origin:e.nodeOrigin});return r.createElement(c,{key:s.id,id:s.id,className:s.className,style:s.style,type:l,data:s.data,sourcePosition:s.sourcePosition||yd.Bottom,targetPosition:s.targetPosition||yd.Top,hidden:s.hidden,xPos:g,yPos:v,xPosOrigin:y.x,yPosOrigin:y.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!s.selected,isDraggable:u,isSelectable:h,isConnectable:f,isFocusable:p,resizeObserver:d,dragHandle:s.dragHandle,zIndex:s[nd]?.z??0,isParent:!!s[nd]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!s.width&&!!s.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:s.ariaLabel,hasHandleBounds:!!s[nd]?.handleBounds})}))};jf.displayName="NodeRenderer";var Cf=(0,r.memo)(jf);const Tf=(e,t,n)=>n===yd.Left?e-t:n===yd.Right?e+t:e,Pf=(e,t,n)=>n===yd.Top?e-t:n===yd.Bottom?e+t:e,Lf="react-flow__edgeupdater",Of=e=>{let{position:t,centerX:n,centerY:i,radius:o=10,onMouseDown:s,onMouseEnter:a,onMouseOut:l,type:c}=e;return r.createElement("circle",{onMouseDown:s,onMouseEnter:a,onMouseOut:l,className:Ts([Lf,`${Lf}-${c}`]),cx:Tf(n,o,t),cy:Pf(i,o,t),r:o,stroke:"transparent",fill:"transparent"})},Af=()=>!0;var Mf=e=>{const t=t=>{let{id:n,className:i,type:o,data:s,onClick:a,onEdgeDoubleClick:l,selected:c,animated:u,label:d,labelStyle:h,labelShowBg:f,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:g,style:v,source:y,target:_,sourceX:b,sourceY:x,targetX:w,targetY:S,sourcePosition:k,targetPosition:E,elementsSelectable:N,hidden:j,sourceHandleId:C,targetHandleId:T,onContextMenu:P,onMouseEnter:L,onMouseMove:O,onMouseLeave:A,reconnectRadius:M,onReconnect:R,onReconnectStart:I,onReconnectEnd:z,markerEnd:D,markerStart:B,rfId:$,ariaLabel:U,isFocusable:F,isReconnectable:H,pathOptions:Z,interactionWidth:W,disableKeyboardA11y:V}=t;const q=(0,r.useRef)(null),[K,Y]=(0,r.useState)(!1),[G,X]=(0,r.useState)(!1),J=Bu(),Q=(0,r.useMemo)(()=>`url('#${Id(B,$)}')`,[B,$]),ee=(0,r.useMemo)(()=>`url('#${Id(D,$)}')`,[D,$]);if(j)return null;const te=ud(n,J.getState,l),ne=ud(n,J.getState,P),re=ud(n,J.getState,L),ie=ud(n,J.getState,O),oe=ud(n,J.getState,A),se=(e,t)=>{if(0!==e.button)return;const{edges:r,isValidConnection:i}=J.getState(),o=t?_:y,s=(t?T:C)||null,a=t?"target":"source",l=i||Af,c=t,u=r.find(e=>e.id===n);X(!0),I?.(e,u,a);Qd({event:e,handleId:s,nodeId:o,onConnect:e=>R?.(u,e),isTarget:c,getState:J.getState,setState:J.setState,isValidConnection:l,edgeUpdaterType:a,onReconnectEnd:e=>{X(!1),z?.(e,u,a)}})},ae=()=>Y(!0),le=()=>Y(!1),ce=!N&&!a;return r.createElement("g",{className:Ts(["react-flow__edge",`react-flow__edge-${o}`,i,{selected:c,animated:u,inactive:ce,updating:K}]),onClick:e=>{const{edges:t,addSelectedEdges:r,unselectNodesAndEdges:i,multiSelectionActive:o}=J.getState(),s=t.find(e=>e.id===n);s&&(N&&(J.setState({nodesSelectionActive:!1}),s.selected&&o?(i({nodes:[],edges:[s]}),q.current?.blur()):r([n])),a&&a(e,s))},onDoubleClick:te,onContextMenu:ne,onMouseEnter:re,onMouseMove:ie,onMouseLeave:oe,onKeyDown:F?e=>{if(!V&&rd.includes(e.key)&&N){const{unselectNodesAndEdges:t,addSelectedEdges:r,edges:i}=J.getState();"Escape"===e.key?(q.current?.blur(),t({edges:[i.find(e=>e.id===n)]})):r([n])}}:void 0,tabIndex:F?0:void 0,role:F?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":null===U?void 0:U||`Edge from ${y} to ${_}`,"aria-describedby":F?`${kh}-${$}`:void 0,ref:q},!G&&r.createElement(e,{id:n,source:y,target:_,selected:c,animated:u,label:d,labelStyle:h,labelShowBg:f,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:g,data:s,style:v,sourceX:b,sourceY:x,targetX:w,targetY:S,sourcePosition:k,targetPosition:E,sourceHandleId:C,targetHandleId:T,markerStart:Q,markerEnd:ee,pathOptions:Z,interactionWidth:W}),H&&r.createElement(r.Fragment,null,("source"===H||!0===H)&&r.createElement(Of,{position:k,centerX:b,centerY:x,radius:M,onMouseDown:e=>se(e,!0),onMouseEnter:ae,onMouseOut:le,type:"source"}),("target"===H||!0===H)&&r.createElement(Of,{position:E,centerX:w,centerY:S,radius:M,onMouseDown:e=>se(e,!1),onMouseEnter:ae,onMouseOut:le,type:"target"})))};return t.displayName="EdgeWrapper",(0,r.memo)(t)};function Rf(e){const t={default:Mf(e.default||Od),straight:Mf(e.bezier||Cd),step:Mf(e.step||jd),smoothstep:Mf(e.step||Nd),simplebezier:Mf(e.simplebezier||xd)},n=Object.keys(e).filter(e=>!["default","bezier"].includes(e)).reduce((t,n)=>(t[n]=Mf(e[n]||Od),t),{});return{...t,...n}}function If(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=(n?.x||0)+t.x,i=(n?.y||0)+t.y,o=n?.width||t.width,s=n?.height||t.height;switch(e){case yd.Top:return{x:r+o/2,y:i};case yd.Right:return{x:r+o,y:i+s/2};case yd.Bottom:return{x:r+o/2,y:i+s};case yd.Left:return{x:r,y:i+s/2}}}function zf(e,t){return e?1!==e.length&&t?t&&e.find(e=>e.id===t)||null:e[0]:null}function Df(e){const t=e?.[nd]?.handleBounds||null,n=t&&e?.width&&e?.height&&"undefined"!==typeof e?.positionAbsolute?.x&&"undefined"!==typeof e?.positionAbsolute?.y;return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!n]}const Bf=[{level:0,isMaxLevel:!0,edges:[]}];function $f(e,t,n){const i=Du((0,r.useCallback)(n=>e?n.edges.filter(e=>{const r=t.get(e.source),i=t.get(e.target);return r?.width&&r?.height&&i?.width&&i?.height&&function(e){let{sourcePos:t,targetPos:n,sourceWidth:r,sourceHeight:i,targetWidth:o,targetHeight:s,width:a,height:l,transform:c}=e;const u={x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x+r,n.x+o),y2:Math.max(t.y+i,n.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=Xu({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:a/c[2],height:l/c[2]}),h=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),f=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(h*f)>0}({sourcePos:r.positionAbsolute||{x:0,y:0},targetPos:i.positionAbsolute||{x:0,y:0},sourceWidth:r.width,sourceHeight:r.height,targetWidth:i.width,targetHeight:i.height,width:n.width,height:n.height,transform:n.transform})}):n.edges,[e,t]));return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=-1;const i=e.reduce((e,i)=>{const o=td(i.zIndex);let s=o?i.zIndex:0;if(n){const e=t.get(i.target),n=t.get(i.source),r=i.selected||e?.selected||n?.selected,a=Math.max(n?.[nd]?.z||0,e?.[nd]?.z||0,1e3);s=(o?i.zIndex:0)+(r?a:0)}return e[s]?e[s].push(i):e[s]=[i],r=s>r?s:r,e},{}),o=Object.entries(i).map(e=>{let[t,n]=e;const i=+t;return{edges:n,level:i,isMaxLevel:i===r}});return 0===o.length?Bf:o}(i,t,n)}const Uf={[vd.Arrow]:e=>{let{color:t="none",strokeWidth:n=1}=e;return r.createElement("polyline",{style:{stroke:t,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"})},[vd.ArrowClosed]:e=>{let{color:t="none",strokeWidth:n=1}=e;return r.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})}};const Ff=e=>{let{id:t,type:n,color:i,width:o=12.5,height:s=12.5,markerUnits:a="strokeWidth",strokeWidth:l,orient:c="auto-start-reverse"}=e;const u=function(e){const t=Bu();return(0,r.useMemo)(()=>Object.prototype.hasOwnProperty.call(Uf,e)?Uf[e]:(t.getState().onError?.("009",Ou(e)),null),[e])}(n);return u?r.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${o}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:c,refX:"0",refY:"0"},r.createElement(u,{color:i,strokeWidth:l})):null},Hf=e=>{let{defaultColor:t,rfId:n}=e;const i=Du((0,r.useCallback)((e=>{let{defaultColor:t,rfId:n}=e;return e=>{const r=[];return e.edges.reduce((e,i)=>([i.markerStart,i.markerEnd].forEach(i=>{if(i&&"object"===typeof i){const o=Id(i,n);r.includes(o)||(e.push({id:o,color:i.color||t,...i}),r.push(o))}}),e),[]).sort((e,t)=>e.id.localeCompare(t.id))}})({defaultColor:t,rfId:n}),[t,n]),(e,t)=>!(e.length!==t.length||e.some((e,n)=>e.id!==t[n].id)));return r.createElement("defs",null,i.map(e=>r.createElement(Ff,{id:e.id,key:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient})))};Hf.displayName="MarkerDefinitions";var Zf=(0,r.memo)(Hf);const Wf=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Vf=e=>{let{defaultMarkerColor:t,onlyRenderVisibleElements:n,elevateEdgesOnSelect:i,rfId:o,edgeTypes:s,noPanClassName:a,onEdgeContextMenu:l,onEdgeMouseEnter:c,onEdgeMouseMove:u,onEdgeMouseLeave:d,onEdgeClick:h,onEdgeDoubleClick:f,onReconnect:p,onReconnectStart:m,onReconnectEnd:g,reconnectRadius:v,children:y,disableKeyboardA11y:_}=e;const{edgesFocusable:b,edgesUpdatable:x,elementsSelectable:w,width:S,height:k,connectionMode:E,nodeInternals:N,onError:j}=Du(Wf,Ds),C=$f(n,N,i);return S?r.createElement(r.Fragment,null,C.map(e=>{let{level:n,edges:i,isMaxLevel:y}=e;return r.createElement("svg",{key:n,style:{zIndex:n},width:S,height:k,className:"react-flow__edges react-flow__container"},y&&r.createElement(Zf,{defaultColor:t,rfId:o}),r.createElement("g",null,i.map(e=>{const[t,n,i]=Df(N.get(e.source)),[y,S,k]=Df(N.get(e.target));if(!i||!k)return null;let C=e.type||"default";s[C]||(j?.("011",Ru(C)),C="default");const T=s[C]||s.default,P=E===fd.Strict?S.target:(S.target??[]).concat(S.source??[]),L=zf(n.source,e.sourceHandle),O=zf(P,e.targetHandle),A=L?.position||yd.Bottom,M=O?.position||yd.Top,R=!!(e.focusable||b&&"undefined"===typeof e.focusable),I=e.reconnectable||e.updatable,z="undefined"!==typeof p&&(I||x&&"undefined"===typeof I);if(!L||!O)return j?.("008",Au(L,e)),null;const{sourceX:D,sourceY:B,targetX:$,targetY:U}=((e,t,n,r,i,o)=>{const s=If(n,e,t),a=If(o,r,i);return{sourceX:s.x,sourceY:s.y,targetX:a.x,targetY:a.y}})(t,L,A,y,O,M);return r.createElement(T,{key:e.id,id:e.id,className:Ts([e.className,a]),type:C,data:e.data,selected:!!e.selected,animated:!!e.animated,hidden:!!e.hidden,label:e.label,labelStyle:e.labelStyle,labelShowBg:e.labelShowBg,labelBgStyle:e.labelBgStyle,labelBgPadding:e.labelBgPadding,labelBgBorderRadius:e.labelBgBorderRadius,style:e.style,source:e.source,target:e.target,sourceHandleId:e.sourceHandle,targetHandleId:e.targetHandle,markerEnd:e.markerEnd,markerStart:e.markerStart,sourceX:D,sourceY:B,targetX:$,targetY:U,sourcePosition:A,targetPosition:M,elementsSelectable:w,onContextMenu:l,onMouseEnter:c,onMouseMove:u,onMouseLeave:d,onClick:h,onEdgeDoubleClick:f,onReconnect:p,onReconnectStart:m,onReconnectEnd:g,reconnectRadius:v,rfId:o,ariaLabel:e.ariaLabel,isFocusable:R,isReconnectable:z,pathOptions:"pathOptions"in e?e.pathOptions:void 0,interactionWidth:e.interactionWidth,disableKeyboardA11y:_})})))}),y):null};Vf.displayName="EdgeRenderer";var qf=(0,r.memo)(Vf);const Kf=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Yf(e){let{children:t}=e;const n=Du(Kf);return r.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:n}},t)}const Gf={[yd.Left]:yd.Right,[yd.Right]:yd.Left,[yd.Top]:yd.Bottom,[yd.Bottom]:yd.Top},Xf=e=>{let{nodeId:t,handleType:n,style:i,type:o=gd.Bezier,CustomComponent:s,connectionStatus:a}=e;const{fromNode:l,handleId:c,toX:u,toY:d,connectionMode:h}=Du((0,r.useCallback)(e=>({fromNode:e.nodeInternals.get(t),handleId:e.connectionHandleId,toX:(e.connectionPosition.x-e.transform[0])/e.transform[2],toY:(e.connectionPosition.y-e.transform[1])/e.transform[2],connectionMode:e.connectionMode}),[t]),Ds),f=l?.[nd]?.handleBounds;let p=f?.[n];if(h===fd.Loose&&(p=p||f?.["source"===n?"target":"source"]),!l||!p)return null;const m=c?p.find(e=>e.id===c):p[0],g=m?m.x+m.width/2:(l.width??0)/2,v=m?m.y+m.height/2:l.height??0,y=(l.positionAbsolute?.x??0)+g,_=(l.positionAbsolute?.y??0)+v,b=m?.position,x=b?Gf[b]:null;if(!b||!x)return null;if(s)return r.createElement(s,{connectionLineType:o,connectionLineStyle:i,fromNode:l,fromHandle:m,fromX:y,fromY:_,toX:u,toY:d,fromPosition:b,toPosition:x,connectionStatus:a});let w="";const S={sourceX:y,sourceY:_,sourcePosition:b,targetX:u,targetY:d,targetPosition:x};return o===gd.Bezier?[w]=Ld(S):o===gd.Step?[w]=Ed({...S,borderRadius:0}):o===gd.SmoothStep?[w]=Ed(S):o===gd.SimpleBezier?[w]=bd(S):w=`M${y},${_} ${u},${d}`,r.createElement("path",{d:w,fill:"none",className:"react-flow__connection-path",style:i})};Xf.displayName="ConnectionLine";const Jf=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function Qf(e){let{containerStyle:t,style:n,type:i,component:o}=e;const{nodeId:s,handleType:a,nodesConnectable:l,width:c,height:u,connectionStatus:d}=Du(Jf,Ds);return!!(s&&a&&c&&l)?r.createElement("svg",{style:t,width:c,height:u,className:"react-flow__edges react-flow__connectionline react-flow__container"},r.createElement("g",{className:Ts(["react-flow__connection",d])},r.createElement(Xf,{nodeId:s,handleType:a,style:n,type:i,CustomComponent:o,connectionStatus:d}))):null}function ep(e,t){(0,r.useRef)(null),Bu();return(0,r.useMemo)(()=>t(e),[e])}const tp=e=>{let{nodeTypes:t,edgeTypes:n,onMove:i,onMoveStart:o,onMoveEnd:s,onInit:a,onNodeClick:l,onEdgeClick:c,onNodeDoubleClick:u,onEdgeDoubleClick:d,onNodeMouseEnter:h,onNodeMouseMove:f,onNodeMouseLeave:p,onNodeContextMenu:m,onSelectionContextMenu:g,onSelectionStart:v,onSelectionEnd:y,connectionLineType:_,connectionLineStyle:b,connectionLineComponent:x,connectionLineContainerStyle:w,selectionKeyCode:S,selectionOnDrag:k,selectionMode:E,multiSelectionKeyCode:N,panActivationKeyCode:j,zoomActivationKeyCode:C,deleteKeyCode:T,onlyRenderVisibleElements:P,elementsSelectable:L,selectNodesOnDrag:O,defaultViewport:A,translateExtent:M,minZoom:R,maxZoom:I,preventScrolling:z,defaultMarkerColor:D,zoomOnScroll:B,zoomOnPinch:$,panOnScroll:U,panOnScrollSpeed:F,panOnScrollMode:H,zoomOnDoubleClick:Z,panOnDrag:W,onPaneClick:V,onPaneMouseEnter:q,onPaneMouseMove:K,onPaneMouseLeave:Y,onPaneScroll:G,onPaneContextMenu:X,onEdgeContextMenu:J,onEdgeMouseEnter:Q,onEdgeMouseMove:ee,onEdgeMouseLeave:te,onReconnect:ne,onReconnectStart:re,onReconnectEnd:ie,reconnectRadius:oe,noDragClassName:se,noWheelClassName:ae,noPanClassName:le,elevateEdgesOnSelect:ce,disableKeyboardA11y:ue,nodeOrigin:de,nodeExtent:he,rfId:fe}=e;const pe=ep(t,Ef),me=ep(n,Rf);return function(e){const t=Uh(),n=(0,r.useRef)(!1);(0,r.useEffect)(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}(a),r.createElement(kf,{onPaneClick:V,onPaneMouseEnter:q,onPaneMouseMove:K,onPaneMouseLeave:Y,onPaneContextMenu:X,onPaneScroll:G,deleteKeyCode:T,selectionKeyCode:S,selectionOnDrag:k,selectionMode:E,onSelectionStart:v,onSelectionEnd:y,multiSelectionKeyCode:N,panActivationKeyCode:j,zoomActivationKeyCode:C,elementsSelectable:L,onMove:i,onMoveStart:o,onMoveEnd:s,zoomOnScroll:B,zoomOnPinch:$,zoomOnDoubleClick:Z,panOnScroll:U,panOnScrollSpeed:F,panOnScrollMode:H,panOnDrag:W,defaultViewport:A,translateExtent:M,minZoom:R,maxZoom:I,onSelectionContextMenu:g,preventScrolling:z,noDragClassName:se,noWheelClassName:ae,noPanClassName:le,disableKeyboardA11y:ue},r.createElement(Yf,null,r.createElement(qf,{edgeTypes:me,onEdgeClick:c,onEdgeDoubleClick:d,onlyRenderVisibleElements:P,onEdgeContextMenu:J,onEdgeMouseEnter:Q,onEdgeMouseMove:ee,onEdgeMouseLeave:te,onReconnect:ne,onReconnectStart:re,onReconnectEnd:ie,reconnectRadius:oe,defaultMarkerColor:D,noPanClassName:le,elevateEdgesOnSelect:!!ce,disableKeyboardA11y:ue,rfId:fe},r.createElement(Qf,{style:b,type:_,component:x,containerStyle:w})),r.createElement("div",{className:"react-flow__edgelabel-renderer"}),r.createElement(Cf,{nodeTypes:pe,onNodeClick:l,onNodeDoubleClick:u,onNodeMouseEnter:h,onNodeMouseMove:f,onNodeMouseLeave:p,onNodeContextMenu:m,selectNodesOnDrag:O,onlyRenderVisibleElements:P,noPanClassName:le,noDragClassName:se,disableKeyboardA11y:ue,nodeOrigin:de,nodeExtent:he,rfId:fe})))};tp.displayName="GraphView";var np=(0,r.memo)(tp);const rp=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],ip={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:rp,nodeExtent:rp,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:fd.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:id,isValidConnection:void 0},op=()=>{return e=(e,t)=>({...ip,setNodes:n=>{const{nodeInternals:r,nodeOrigin:i,elevateNodesOnSelect:o}=t();e({nodeInternals:Ah(n,r,i,o)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(e=>({...r,...e}))})},setDefaultNodesAndEdges:(n,r)=>{const i="undefined"!==typeof n,o="undefined"!==typeof r,s=i?Ah(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:s,edges:o?r:[],hasDefaultNodes:i,hasDefaultEdges:o})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:i,fitViewOnInit:o,fitViewOnInitDone:s,fitViewOnInitOptions:a,domNode:l,nodeOrigin:c}=t(),u=l?.querySelector(".react-flow__viewport");if(!u)return;const d=window.getComputedStyle(u),{m22:h}=new window.DOMMatrixReadOnly(d.transform),f=n.reduce((e,t)=>{const n=i.get(t.id);if(n?.hidden)i.set(n.id,{...n,[nd]:{...n[nd],handleBounds:void 0}});else if(n){const r=Zu(t.nodeElement);r.width&&r.height&&(n.width!==r.width||n.height!==r.height||t.forceUpdate)&&(i.set(n.id,{...n,[nd]:{...n[nd],handleBounds:{source:hf(".source",t.nodeElement,h,c),target:hf(".target",t.nodeElement,h,c)}},...r}),e.push({id:n.id,type:"dimensions",dimensions:r}))}return e},[]);Oh(i,c);const p=s||o&&!s&&Mh(t,{initial:!0,...a});e({nodeInternals:new Map(i),fitViewOnInitDone:p}),f?.length>0&&r?.(f)},updateNodePositions:function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{triggerNodeChanges:i}=t(),o=e.map(e=>{const t={id:e.id,type:"position",dragging:r};return n&&(t.positionAbsolute=e.positionAbsolute,t.position=e.position),t});i(o)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:i,hasDefaultNodes:o,nodeOrigin:s,getNodes:a,elevateNodesOnSelect:l}=t();if(n?.length){if(o){const t=Ah(ef(n,a()),i,s,l);e({nodeInternals:t})}r?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:i,getNodes:o}=t();let s,a=null;r?s=n.map(e=>tf(e,!0)):(s=nf(o(),n),a=nf(i,[])),zh({changedNodes:s,changedEdges:a,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:i,getNodes:o}=t();let s,a=null;r?s=n.map(e=>tf(e,!0)):(s=nf(i,n),a=nf(o(),[])),zh({changedNodes:a,changedEdges:s,get:t,set:e})},unselectNodesAndEdges:function(){let{nodes:n,edges:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{edges:i,getNodes:o}=t(),s=r||i;zh({changedNodes:(n||o()).map(e=>(e.selected=!1,tf(e.id,!1))),changedEdges:s.map(e=>tf(e.id,!1)),get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:i}=t();r?.scaleExtent([n,i]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:i}=t();r?.scaleExtent([i,n]),e({maxZoom:n})},setTranslateExtent:n=>{t().d3Zoom?.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t();zh({changedNodes:r().filter(e=>e.selected).map(e=>tf(e.id,!1)),changedEdges:n.filter(e=>e.selected).map(e=>tf(e.id,!1)),get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(e=>{e.positionAbsolute=Vu(e.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:e=>{const{transform:n,width:r,height:i,d3Zoom:o,d3Selection:s,translateExtent:a}=t();if(!o||!s||!e.x&&!e.y)return!1;const l=uu.translate(n[0]+e.x,n[1]+e.y).scale(n[2]),c=[[0,0],[r,i]],u=o?.constrain()(l,c,a);return o.transform(s,u),n[0]!==u.x||n[1]!==u.y||n[2]!==u.k},cancelConnection:()=>e({connectionNodeId:ip.connectionNodeId,connectionHandleId:ip.connectionHandleId,connectionHandleType:ip.connectionHandleType,connectionStatus:ip.connectionStatus,connectionStartHandle:ip.connectionStartHandle,connectionEndHandle:ip.connectionEndHandle}),reset:()=>e({...ip})}),t=Object.is,e?zs(e,t):zs;var e,t},sp=e=>{let{children:t}=e;const n=(0,r.useRef)(null);return n.current||(n.current=op()),r.createElement(ju,{value:n.current},t)};sp.displayName="ReactFlowProvider";const ap=e=>{let{children:t}=e;return(0,r.useContext)(Nu)?r.createElement(r.Fragment,null,t):r.createElement(sp,null,t)};ap.displayName="ReactFlowWrapper";const lp={input:ah,default:oh,output:ch,group:uh},cp={default:Od,straight:Cd,step:jd,smoothstep:Nd,simplebezier:xd},up=[0,0],dp=[15,15],hp={x:0,y:0,zoom:1},fp={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},pp=(0,r.forwardRef)((e,t)=>{let{nodes:n,edges:i,defaultNodes:o,defaultEdges:s,className:a,nodeTypes:l=lp,edgeTypes:c=cp,onNodeClick:u,onEdgeClick:d,onInit:h,onMove:f,onMoveStart:p,onMoveEnd:m,onConnect:g,onConnectStart:v,onConnectEnd:y,onClickConnectStart:_,onClickConnectEnd:b,onNodeMouseEnter:x,onNodeMouseMove:w,onNodeMouseLeave:S,onNodeContextMenu:k,onNodeDoubleClick:E,onNodeDragStart:N,onNodeDrag:j,onNodeDragStop:C,onNodesDelete:T,onEdgesDelete:P,onSelectionChange:L,onSelectionDragStart:O,onSelectionDrag:A,onSelectionDragStop:M,onSelectionContextMenu:R,onSelectionStart:I,onSelectionEnd:z,connectionMode:D=fd.Strict,connectionLineType:B=gd.Bezier,connectionLineStyle:$,connectionLineComponent:U,connectionLineContainerStyle:F,deleteKeyCode:H="Backspace",selectionKeyCode:Z="Shift",selectionOnDrag:W=!1,selectionMode:V=md.Full,panActivationKeyCode:q="Space",multiSelectionKeyCode:K=(ld()?"Meta":"Control"),zoomActivationKeyCode:Y=(ld()?"Meta":"Control"),snapToGrid:G=!1,snapGrid:X=dp,onlyRenderVisibleElements:J=!1,selectNodesOnDrag:Q=!0,nodesDraggable:ee,nodesConnectable:te,nodesFocusable:ne,nodeOrigin:re=up,edgesFocusable:ie,edgesUpdatable:oe,elementsSelectable:se,defaultViewport:ae=hp,minZoom:le=.5,maxZoom:ce=2,translateExtent:ue=rp,preventScrolling:de=!0,nodeExtent:he,defaultMarkerColor:fe="#b1b1b7",zoomOnScroll:pe=!0,zoomOnPinch:me=!0,panOnScroll:ge=!1,panOnScrollSpeed:ve=.5,panOnScrollMode:ye=pd.Free,zoomOnDoubleClick:_e=!0,panOnDrag:be=!0,onPaneClick:xe,onPaneMouseEnter:we,onPaneMouseMove:Se,onPaneMouseLeave:ke,onPaneScroll:Ee,onPaneContextMenu:Ne,children:je,onEdgeContextMenu:Ce,onEdgeDoubleClick:Te,onEdgeMouseEnter:Pe,onEdgeMouseMove:Le,onEdgeMouseLeave:Oe,onEdgeUpdate:Ae,onEdgeUpdateStart:Me,onEdgeUpdateEnd:Re,onReconnect:Ie,onReconnectStart:ze,onReconnectEnd:De,reconnectRadius:Be=10,edgeUpdaterRadius:$e=10,onNodesChange:Ue,onEdgesChange:Fe,noDragClassName:He="nodrag",noWheelClassName:Ze="nowheel",noPanClassName:We="nopan",fitView:Ve=!1,fitViewOptions:qe,connectOnClick:Ke=!0,attributionPosition:Ye,proOptions:Ge,defaultEdgeOptions:Xe,elevateNodesOnSelect:Je=!0,elevateEdgesOnSelect:Qe=!1,disableKeyboardA11y:et=!1,autoPanOnConnect:tt=!0,autoPanOnNodeDrag:nt=!0,connectionRadius:rt=20,isValidConnection:it,onError:ot,style:st,id:at,nodeDragThreshold:lt,...ct}=e;const ut=at||"1";return r.createElement("div",{...ct,style:{...st,...fp},ref:t,className:Ts(["react-flow",a]),"data-testid":"rf__wrapper",id:at},r.createElement(ap,null,r.createElement(np,{onInit:h,onMove:f,onMoveStart:p,onMoveEnd:m,onNodeClick:u,onEdgeClick:d,onNodeMouseEnter:x,onNodeMouseMove:w,onNodeMouseLeave:S,onNodeContextMenu:k,onNodeDoubleClick:E,nodeTypes:l,edgeTypes:c,connectionLineType:B,connectionLineStyle:$,connectionLineComponent:U,connectionLineContainerStyle:F,selectionKeyCode:Z,selectionOnDrag:W,selectionMode:V,deleteKeyCode:H,multiSelectionKeyCode:K,panActivationKeyCode:q,zoomActivationKeyCode:Y,onlyRenderVisibleElements:J,selectNodesOnDrag:Q,defaultViewport:ae,translateExtent:ue,minZoom:le,maxZoom:ce,preventScrolling:de,zoomOnScroll:pe,zoomOnPinch:me,zoomOnDoubleClick:_e,panOnScroll:ge,panOnScrollSpeed:ve,panOnScrollMode:ye,panOnDrag:be,onPaneClick:xe,onPaneMouseEnter:we,onPaneMouseMove:Se,onPaneMouseLeave:ke,onPaneScroll:Ee,onPaneContextMenu:Ne,onSelectionContextMenu:R,onSelectionStart:I,onSelectionEnd:z,onEdgeContextMenu:Ce,onEdgeDoubleClick:Te,onEdgeMouseEnter:Pe,onEdgeMouseMove:Le,onEdgeMouseLeave:Oe,onReconnect:Ie??Ae,onReconnectStart:ze??Me,onReconnectEnd:De??Re,reconnectRadius:Be??$e,defaultMarkerColor:fe,noDragClassName:He,noWheelClassName:Ze,noPanClassName:We,elevateEdgesOnSelect:Qe,rfId:ut,disableKeyboardA11y:et,nodeOrigin:re,nodeExtent:he}),r.createElement(bh,{nodes:n,edges:i,defaultNodes:o,defaultEdges:s,onConnect:g,onConnectStart:v,onConnectEnd:y,onClickConnectStart:_,onClickConnectEnd:b,nodesDraggable:ee,nodesConnectable:te,nodesFocusable:ne,edgesFocusable:ie,edgesUpdatable:oe,elementsSelectable:se,elevateNodesOnSelect:Je,minZoom:le,maxZoom:ce,nodeExtent:he,onNodesChange:Ue,onEdgesChange:Fe,snapToGrid:G,snapGrid:X,connectionMode:D,translateExtent:ue,connectOnClick:Ke,defaultEdgeOptions:Xe,fitView:Ve,fitViewOptions:qe,onNodesDelete:T,onEdgesDelete:P,onNodeDragStart:N,onNodeDrag:j,onNodeDragStop:C,onSelectionDrag:A,onSelectionDragStart:O,onSelectionDragStop:M,noPanClassName:We,nodeOrigin:re,rfId:ut,autoPanOnConnect:tt,autoPanOnNodeDrag:nt,onError:ot,connectionRadius:rt,isValidConnection:it,nodeDragThreshold:lt}),r.createElement(gh,{onSelectionChange:L}),je,r.createElement(Fu,{proOptions:Ge,position:Ye}),r.createElement(jh,{rfId:ut,disableKeyboardA11y:et})))});pp.displayName="ReactFlow";function mp(e){return t=>{const[n,i]=(0,r.useState)(t),o=(0,r.useCallback)(t=>i(n=>e(t,n)),[]);return[n,i,o]}}const gp=mp(ef),vp=mp(function(e,t){return Qh(e,t)});function yp(){return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},r.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function _p(){return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},r.createElement("path",{d:"M0 0h32v4.2H0z"}))}function bp(){return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},r.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function xp(){return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},r.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function wp(){return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},r.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Sp=e=>{let{children:t,className:n,...i}=e;return r.createElement("button",{type:"button",className:Ts(["react-flow__controls-button",n]),...i},t)};Sp.displayName="ControlButton";const kp=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),Ep=e=>{let{style:t,showZoom:n=!0,showFitView:i=!0,showInteractive:o=!0,fitViewOptions:s,onZoomIn:a,onZoomOut:l,onFitView:c,onInteractiveChange:u,className:d,children:h,position:f="bottom-left"}=e;const p=Bu(),[m,g]=(0,r.useState)(!1),{isInteractive:v,minZoomReached:y,maxZoomReached:_}=Du(kp,Ds),{zoomIn:b,zoomOut:x,fitView:w}=Uh();if((0,r.useEffect)(()=>{g(!0)},[]),!m)return null;return r.createElement(Uu,{className:Ts(["react-flow__controls",d]),position:f,style:t,"data-testid":"rf__controls"},n&&r.createElement(r.Fragment,null,r.createElement(Sp,{onClick:()=>{b(),a?.()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:_},r.createElement(yp,null)),r.createElement(Sp,{onClick:()=>{x(),l?.()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:y},r.createElement(_p,null))),i&&r.createElement(Sp,{className:"react-flow__controls-fitview",onClick:()=>{w(s),c?.()},title:"fit view","aria-label":"fit view"},r.createElement(bp,null)),o&&r.createElement(Sp,{className:"react-flow__controls-interactive",onClick:()=>{p.setState({nodesDraggable:!v,nodesConnectable:!v,elementsSelectable:!v}),u?.(!v)},title:"toggle interactivity","aria-label":"toggle interactivity"},v?r.createElement(wp,null):r.createElement(xp,null)),h)};Ep.displayName="Controls";var Np=(0,r.memo)(Ep);const jp=e=>{let{id:t,x:n,y:i,width:o,height:s,style:a,color:l,strokeColor:c,strokeWidth:u,className:d,borderRadius:h,shapeRendering:f,onClick:p,selected:m}=e;const{background:g,backgroundColor:v}=a||{},y=l||g||v;return r.createElement("rect",{className:Ts(["react-flow__minimap-node",{selected:m},d]),x:n,y:i,rx:h,ry:h,width:o,height:s,fill:y,stroke:c,strokeWidth:u,shapeRendering:f,onClick:p?e=>p(e,t):void 0})};jp.displayName="MiniMapNode";var Cp=(0,r.memo)(jp);const Tp=e=>e.nodeOrigin,Pp=e=>e.getNodes().filter(e=>!e.hidden&&e.width&&e.height),Lp=e=>e instanceof Function?e:()=>e;var Op=(0,r.memo)(function(e){let{nodeStrokeColor:t="transparent",nodeColor:n="#e2e2e2",nodeClassName:i="",nodeBorderRadius:o=5,nodeStrokeWidth:s=2,nodeComponent:a=Cp,onClick:l}=e;const c=Du(Pp,Ds),u=Du(Tp),d=Lp(n),h=Lp(t),f=Lp(i),p="undefined"===typeof window||window.chrome?"crispEdges":"geometricPrecision";return r.createElement(r.Fragment,null,c.map(e=>{const{x:t,y:n}=$d(e,u).positionAbsolute;return r.createElement(a,{key:e.id,x:t,y:n,width:e.width,height:e.height,style:e.style,selected:e.selected,className:f(e),color:d(e),borderRadius:o,strokeColor:h(e),strokeWidth:s,shapeRendering:p,onClick:l,id:e.id})}))});const Ap=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?(r=Ud(t,e.nodeOrigin),i=n,Ju(Gu(Xu(r),Xu(i)))):n,rfId:e.rfId};var r,i};function Mp(e){let{style:t,className:n,nodeStrokeColor:i="transparent",nodeColor:o="#e2e2e2",nodeClassName:s="",nodeBorderRadius:a=5,nodeStrokeWidth:l=2,nodeComponent:c,maskColor:u="rgb(240, 240, 240, 0.6)",maskStrokeColor:d="none",maskStrokeWidth:h=1,position:f="bottom-right",onClick:p,onNodeClick:m,pannable:g=!1,zoomable:v=!1,ariaLabel:y="React Flow mini map",inversePan:_=!1,zoomStep:b=10,offsetScale:x=5}=e;const w=Bu(),S=(0,r.useRef)(null),{boundingRect:k,viewBB:E,rfId:N}=Du(Ap,Ds),j=t?.width??200,C=t?.height??150,T=k.width/j,P=k.height/C,L=Math.max(T,P),O=L*j,A=L*C,M=x*L,R=k.x-(O-k.width)/2-M,I=k.y-(A-k.height)/2-M,z=O+2*M,D=A+2*M,B=`react-flow__minimap-desc-${N}`,$=(0,r.useRef)(0);$.current=L,(0,r.useEffect)(()=>{if(S.current){const e=il(S.current),t=e=>{const{transform:t,d3Selection:n,d3Zoom:r}=w.getState();if("wheel"!==e.sourceEvent.type||!n||!r)return;const i=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*b,o=t[2]*Math.pow(2,i);r.scaleTo(n,o)},n=e=>{const{transform:t,d3Selection:n,d3Zoom:r,translateExtent:i,width:o,height:s}=w.getState();if("mousemove"!==e.sourceEvent.type||!n||!r)return;const a=$.current*Math.max(1,t[2])*(_?-1:1),l={x:t[0]-e.sourceEvent.movementX*a,y:t[1]-e.sourceEvent.movementY*a},c=[[0,0],[o,s]],u=uu.translate(l.x,l.y).scale(t[2]),d=r.constrain()(u,c,i);r.transform(n,d)},r=_u().on("zoom",g?n:null).on("zoom.wheel",v?t:null);return e.call(r),()=>{e.on("zoom",null)}}},[g,v,_,b]);const U=p?e=>{const t=fl(e);p(e,{x:t[0],y:t[1]})}:void 0,F=m?(e,t)=>{const n=w.getState().nodeInternals.get(t);m(e,n)}:void 0;return r.createElement(Uu,{position:f,style:t,className:Ts(["react-flow__minimap",n]),"data-testid":"rf__minimap"},r.createElement("svg",{width:j,height:C,viewBox:`${R} ${I} ${z} ${D}`,role:"img","aria-labelledby":B,ref:S,onClick:U},y&&r.createElement("title",{id:B},y),r.createElement(Op,{onClick:F,nodeColor:o,nodeStrokeColor:i,nodeBorderRadius:a,nodeClassName:s,nodeStrokeWidth:l,nodeComponent:c}),r.createElement("path",{className:"react-flow__minimap-mask",d:`M${R-M},${I-M}h${z+2*M}v${D+2*M}h${-z-2*M}z\n        M${E.x},${E.y}h${E.width}v${E.height}h${-E.width}z`,fill:u,fillRule:"evenodd",stroke:d,strokeWidth:h,pointerEvents:"none"})))}Mp.displayName="MiniMap";var Rp,Ip=(0,r.memo)(Mp);function zp(e){let{color:t,dimensions:n,lineWidth:i}=e;return r.createElement("path",{stroke:t,strokeWidth:i,d:`M${n[0]/2} 0 V${n[1]} M0 ${n[1]/2} H${n[0]}`})}function Dp(e){let{color:t,radius:n}=e;return r.createElement("circle",{cx:n,cy:n,r:n,fill:t})}!function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"}(Rp||(Rp={}));const Bp={[Rp.Dots]:"#91919a",[Rp.Lines]:"#eee",[Rp.Cross]:"#e2e2e2"},$p={[Rp.Dots]:1,[Rp.Lines]:1,[Rp.Cross]:6},Up=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Fp(e){let{id:t,variant:n=Rp.Dots,gap:i=20,size:o,lineWidth:s=1,offset:a=2,color:l,style:c,className:u}=e;const d=(0,r.useRef)(null),{transform:h,patternId:f}=Du(Up,Ds),p=l||Bp[n],m=o||$p[n],g=n===Rp.Dots,v=n===Rp.Cross,y=Array.isArray(i)?i:[i,i],_=[y[0]*h[2]||1,y[1]*h[2]||1],b=m*h[2],x=v?[b,b]:_,w=g?[b/a,b/a]:[x[0]/a,x[1]/a];return r.createElement("svg",{className:Ts(["react-flow__background",u]),style:{...c,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:d,"data-testid":"rf__background"},r.createElement("pattern",{id:f+t,x:h[0]%_[0],y:h[1]%_[1],width:_[0],height:_[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${w[0]},-${w[1]})`},g?r.createElement(Dp,{color:p,radius:b/a}):r.createElement(zp,{dimensions:x,color:p,lineWidth:s})),r.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+t})`}))}Fp.displayName="Background";var Hp=(0,r.memo)(Fp);const Zp=e=>{var t,n;let{caseId:i,onClose:o}=e;const[s,a,l]=gp([]),[c,u,d]=vp([]),[h,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)(null),g=async()=>{if(i){f(!0);try{const e=(void 0).VITE_BACKEND_URL,t=localStorage.getItem("authToken"),n=await Do.get(`${e}/api/investigations/${i}/correlation-data`,{headers:{Authorization:`Bearer ${t}`}});n.data&&(m(n.data),v(n.data))}catch(e){console.error("Error fetching case correlations:",e),js.error("\u274c Failed to fetch case correlations")}finally{f(!1)}}},v=e=>{var t,n,r;if(!e)return;const i=[],o=[],s={},l={id:`case-${e._id}`,type:"input",data:{label:`\ud83d\udccb Case ${e.investigationId||e._id}`,type:"case",details:{title:e.title,status:e.status,priority:e.priority,riskScore:(null===(t=e.riskAssessment)||void 0===t?void 0:t.overallRisk)||0}},position:{x:0,y:0},style:{background:"#6366f1",color:"white",border:"2px solid #4f46e5",width:150}};i.push(l),s[`case-${e._id}`]={x:0,y:0},null===(n=e.entities)||void 0===n||n.forEach((t,n)=>{const r=`entity-${t.value}`,a=n%3*300-300,l=200*Math.floor(n/3)+100,c={id:r,data:{label:`${y(t.type)} ${t.value.substring(0,12)}${t.value.length>12?"...":""}`,type:"entity",details:{type:t.type,value:t.value,verified:t.verified}},position:{x:a,y:l},style:{background:_(t.type),color:"white",border:"2px solid #4b5563",width:180}};i.push(c),s[r]={x:a,y:l},o.push({id:`e-case-${e._id}-entity-${t.value}`,source:`case-${e._id}`,target:r,animated:!0,style:{stroke:"#94a3b8",strokeWidth:2},label:"contains",labelStyle:{fill:"#64748b",fontWeight:500}})}),null===(r=e.connections)||void 0===r||r.forEach((e,t)=>{const n=`entity-${e.entity1.value}`,r=`entity-${e.entity2.value}`;s[n]&&s[r]&&o.push({id:`e-${n}-${r}-${t}`,source:n,target:r,animated:e.strength>.7,style:{stroke:b(e.type),strokeWidth:Math.max(1,3*e.strength)},label:x(e.type),labelStyle:{fill:"#64748b",fontWeight:500},labelBgStyle:{fill:"#f1f5f9"}})}),e.relatedEvidenceDetails&&e.relatedEvidenceDetails.length>0&&e.relatedEvidenceDetails.forEach((t,n)=>{var r,a;const l=`evidence-${t._id}`,c=null===(r=e.entities)||void 0===r?void 0:r[n%e.entities.length],u=c?s[`entity-${c.value}`]:{x:0,y:0},d={id:l,data:{label:`\ud83d\udcce ${(null===(a=t.filename)||void 0===a?void 0:a.substring(0,15))||"Evidence"}`,type:"evidence",details:{id:t._id,filename:t.filename,fileType:t.fileType,fileSize:t.fileSize,riskLevel:t.riskLevel,uploadedAt:t.uploadedAt}},position:{x:u.x+200+n%2*200,y:u.y+150+100*Math.floor(n/2)},style:{background:w(t.riskLevel),color:"white",border:"2px solid #92400e",width:150}};i.push(d),c&&o.push({id:`e-entity-${c.value}-evidence-${t._id}`,source:`entity-${c.value}`,target:l,style:{stroke:"#f59e0b",strokeWidth:1.5},label:"has evidence",labelStyle:{fill:"#92400e",fontWeight:500}})}),a(i),u(o)},y=e=>{switch(e){case"wallet_address":return"\ud83d\udcbc";case"ip_address":return"\ud83c\udf10";case"domain":case"transaction_hash":return"\ud83d\udd17";case"email":return"\ud83d\udce7";case"phone":case"device_id":return"\ud83d\udcf1";default:return"\u2753"}},_=e=>{switch(e){case"wallet_address":return"#10b981";case"ip_address":return"#3b82f6";case"domain":return"#8b5cf6";case"email":return"#ec4899";case"phone":return"#f59e0b";case"device_id":return"#ef4444";case"transaction_hash":return"#06b6d4";default:return"#64748b"}},b=e=>{switch(e){case"direct_link":return"#10b981";case"temporal_correlation":return"#f59e0b";case"geographic_proximity":return"#3b82f6";case"behavioral_similarity":return"#8b5cf6";case"evidence_link":return"#ec4899";default:return"#94a3b8"}},x=e=>{switch(e){case"direct_link":return"\ud83d\udd17 Direct";case"temporal_correlation":return"\ud83d\udd50 Temporal";case"geographic_proximity":return"\ud83d\udccd Geo";case"behavioral_similarity":return"\ud83e\udde0 Behavioral";case"evidence_link":return"\ud83d\udcce Evidence";default:return"\ud83d\udd17 Connected"}},w=e=>{switch(e){case"high":return"#ef4444";case"medium":return"#f59e0b";case"low":return"#10b981";default:return"#64748b"}};return(0,r.useEffect)(()=>{g()},[i]),h?(0,vr.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,vr.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,vr.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading case correlations..."})]}):(0,vr.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm h-full flex flex-col",children:[(0,vr.jsxs)("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[(0,vr.jsxs)("div",{children:[(0,vr.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"\ud83c\udf10 Case Correlation Visualization"}),p&&(0,vr.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Case: ",p.investigationId||p._id," \u2022 Risk: ",(100*(null===(t=p.riskAssessment)||void 0===t?void 0:t.overallRisk)).toFixed(0),"% \u2022 Entities: ",(null===(n=p.entities)||void 0===n?void 0:n.length)||0]})]}),(0,vr.jsxs)("div",{className:"flex gap-2",children:[(0,vr.jsx)("button",{onClick:g,className:"text-blue-600 hover:text-blue-800 text-sm underline",children:"Refresh"}),(0,vr.jsx)("button",{onClick:o,className:"text-gray-500 hover:text-gray-700",children:"\u2715"})]})]}),(0,vr.jsx)("div",{className:"flex-1 relative",children:s.length>0?(0,vr.jsxs)(pp,{nodes:s,edges:c,onNodesChange:l,onEdgesChange:d,onConnect:e=>u(t=>zd(e,t)),fitView:!0,attributionPosition:"bottom-left",children:[(0,vr.jsx)(Np,{}),(0,vr.jsx)(Ip,{}),(0,vr.jsx)(Hp,{variant:"dots",gap:12,size:1})]}):(0,vr.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:(0,vr.jsxs)("div",{className:"text-center",children:[(0,vr.jsx)("div",{className:"text-4xl mb-2",children:"\ud83c\udf10"}),(0,vr.jsx)("p",{children:"No correlation data available for this case."}),(0,vr.jsx)("button",{onClick:g,className:"mt-2 text-blue-600 hover:text-blue-800 underline",children:"Refresh"})]})})}),(0,vr.jsxs)("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:[(0,vr.jsx)("h4",{className:"font-medium text-gray-800 mb-2",children:"Legend"}),(0,vr.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm",children:[(0,vr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,vr.jsx)("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"#6366f1"}}),(0,vr.jsx)("span",{children:"Case"})]}),(0,vr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,vr.jsx)("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"#10b981"}}),(0,vr.jsx)("span",{children:"Wallet"})]}),(0,vr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,vr.jsx)("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"#3b82f6"}}),(0,vr.jsx)("span",{children:"IP Address"})]}),(0,vr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,vr.jsx)("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"#8b5cf6"}}),(0,vr.jsx)("span",{children:"Domain"})]}),(0,vr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,vr.jsx)("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"#ec4899"}}),(0,vr.jsx)("span",{children:"Email"})]}),(0,vr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,vr.jsx)("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"#ef4444"}}),(0,vr.jsx)("span",{children:"High Risk Evidence"})]}),(0,vr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,vr.jsx)("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"#f59e0b"}}),(0,vr.jsx)("span",{children:"Medium Risk Evidence"})]})]})]})]})},Wp=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!1),[o,s]=(0,r.useState)(""),[a,l]=(0,r.useState)("uploadedAt"),[c,u]=(0,r.useState)("desc"),[d,h]=(0,r.useState)(""),[f,p]=(0,r.useState)(""),[m,g]=(0,r.useState)(!1),[v,y]=(0,r.useState)(""),[_,b]=(0,r.useState)(1),[x,w]=(0,r.useState)(1),[S,k]=(0,r.useState)(""),[E,N]=(0,r.useState)(!0),[j,C]=(0,r.useState)(!1),[T,P]=(0,r.useState)(null),[L,O]=(0,r.useState)(!1),[A,M]=(0,r.useState)(""),R=async()=>{try{const e=localStorage.getItem("authToken");if(!e)return N(!1),k(""),!1;const t=(void 0).VITE_BACKEND_URL||"http://localhost:5050",n=await Do.get(`${t}/api/auth/verify`,{headers:{Authorization:`Bearer ${e}`}});if(n.data&&n.data.role){const e=n.data.role;k(e);const t=["admin","investigator"].includes(e);return N(t),t||"public"!==e?t||js.error("\u274c Access denied: Evidence Library requires investigator or admin privileges"):js.info("\u2139\ufe0f Public users have access to the risk dashboard only. Evidence library requires investigator or admin privileges."),t}return N(!1),k(""),!1}catch(e){return console.error("Error checking user access:",e),N(!1),k(""),!1}},I=async()=>{if(await R()){i(!0);try{const n=(void 0).VITE_BACKEND_URL||"http://localhost:5050",r=localStorage.getItem("authToken"),i=await Do.get(`${n}/api/evidence?page=${_}&limit=20&sort=${a}&order=${c}`,{headers:{Authorization:`Bearer ${r}`}});var e;if(i.data.success)t(i.data.evidence),w((null===(e=i.data.pagination)||void 0===e?void 0:e.pages)||1)}catch(r){var n;console.error("Error fetching evidence:",r),403===(null===(n=r.response)||void 0===n?void 0:n.status)?(js.error("\u274c Access denied: Insufficient permissions to view evidence library"),N(!1)):js.error("\u274c Failed to fetch evidence")}finally{i(!1)}}};(0,r.useEffect)(()=>{R().then(e=>{e&&I()})},[_,a,c]);const z=async e=>{if(S&&["admin","investigator"].includes(S))try{const t=(void 0).VITE_BACKEND_URL||"http://localhost:5050",n=localStorage.getItem("authToken"),r=await Do.post(`${t}/api/reports/case/${e}`,{format:"pdf",includeEvidence:!0,includeRiskEvolution:!0,includeEscalations:!0,includeTimeline:!0,watermark:!0},{headers:{Authorization:`Bearer ${n}`},responseType:"blob"}),i=window.URL.createObjectURL(new Blob([r.data])),o=document.createElement("a");o.href=i,o.setAttribute("download",`case-report-${e}-${Date.now()}.pdf`),document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(i),js.success("\u2705 PDF report generated and downloaded!")}catch(n){var t;console.error("Error generating case report:",n),403===(null===(t=n.response)||void 0===t?void 0:t.status)?js.error("\u274c Access denied: Insufficient permissions to generate reports"):js.error("\u274c Failed to generate case report")}else js.error("\u274c Access denied: Report generation requires investigator or admin role")},D=e.filter(e=>{const t=!o||e.caseId.toLowerCase().includes(o.toLowerCase())||e.entity.toLowerCase().includes(o.toLowerCase())||e.originalFilename.toLowerCase().includes(o.toLowerCase()),n=!d||e.verificationStatus===d,r=!f||e.riskLevel===f;return t&&n&&r}),B=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},$=e=>{switch(e){case"verified":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},U=e=>{switch(e){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};if(!E){const e="public"===S,t=!S;return(0,vr.jsxs)("div",{className:(e?"bg-blue-50 border-blue-200":"bg-red-50 border-red-200")+" border rounded-lg shadow-sm p-8 text-center",children:[(0,vr.jsx)("div",{className:"mb-4",children:(0,vr.jsx)("svg",{className:"mx-auto h-16 w-16 "+(e?"text-blue-400":"text-red-400"),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,vr.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e?(0,vr.jsxs)(vr.Fragment,{children:[(0,vr.jsx)("h2",{className:"text-xl font-semibold text-blue-800 mb-2",children:"\ud83c\udf10 Public User Access"}),(0,vr.jsx)("p",{className:"text-blue-600 mb-4",children:"Evidence Library is restricted to investigators and administrators."}),(0,vr.jsxs)("div",{className:"bg-blue-100 rounded-lg p-4 text-sm text-blue-700 mb-4",children:[(0,vr.jsx)("p",{children:(0,vr.jsx)("strong",{children:"Available for Public Users:"})}),(0,vr.jsx)("p",{className:"mt-2",children:"\u2022 Risk Dashboard & Map"}),(0,vr.jsx)("p",{children:"\u2022 Public fraud awareness information"}),(0,vr.jsx)("p",{children:"\u2022 Basic wallet risk lookup"})]}),(0,vr.jsxs)("div",{className:"space-y-2",children:[(0,vr.jsx)("a",{href:"/public",className:"inline-block bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"\ud83c\udf10 Go to Public Dashboard"}),(0,vr.jsx)("br",{}),(0,vr.jsx)("a",{href:"/login",className:"inline-block text-blue-600 hover:text-blue-800 text-sm",children:"Login as Investigator/Admin for Evidence Access"})]})]}):(0,vr.jsxs)(vr.Fragment,{children:[(0,vr.jsx)("h2",{className:"text-xl font-semibold text-red-800 mb-2",children:"\ud83d\udeab Access Denied"}),(0,vr.jsx)("p",{className:"text-red-600 mb-4",children:t?"Please login to access the Evidence Library.":`Your role (${S}) does not have access to the Evidence Library.`}),(0,vr.jsxs)("div",{className:"bg-red-100 rounded-lg p-4 text-sm text-red-700 mb-4",children:[(0,vr.jsx)("p",{children:(0,vr.jsx)("strong",{children:"Required Access Level:"})}),(0,vr.jsx)("p",{className:"mt-2",children:"\u2022 Investigator: View, share, export evidence"}),(0,vr.jsx)("p",{children:"\u2022 Admin: Full access including delete and user management"}),S&&"public"!==S&&(0,vr.jsxs)("p",{className:"mt-2",children:["Your current role: ",(0,vr.jsx)("span",{className:"font-medium",children:S})]})]}),(0,vr.jsxs)("div",{className:"space-y-2",children:[(0,vr.jsx)("a",{href:"/login",className:"inline-block bg-red-600 text-white px-6 py-2 rounded-md hover:bg-red-700 transition-colors",children:"\ud83d\udd10 Login with Required Credentials"}),(0,vr.jsx)("br",{}),(0,vr.jsx)("a",{href:"/public",className:"inline-block text-red-600 hover:text-red-800 text-sm",children:"Access Public Dashboard Instead"})]})]})]})}return(0,vr.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm",children:[(0,vr.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,vr.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,vr.jsxs)("div",{children:[(0,vr.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"\ud83d\udcc1 Evidence Library"}),(0,vr.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["\ud83d\udd10 Role: ",(0,vr.jsx)("span",{className:"font-medium capitalize",children:S})," ","admin"===S?"(Full Access)":"(Limited Access)"]})]}),(0,vr.jsxs)("div",{className:"flex gap-2",children:[(0,vr.jsx)("button",{onClick:()=>{if(e.length>0){const t=e[0].caseId;M(t),O(!0)}else js.error("\u274c No evidence available for correlation analysis")},className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200 flex items-center gap-2",title:"View case correlation analysis",children:"\ud83c\udf10 Case Correlation"}),(0,vr.jsx)("button",{onClick:()=>{const t=[...new Set(e.map(e=>e.caseId))];t.length>0?z(t[0]):js.error("\u274c No evidence available for report generation")},className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200 flex items-center gap-2",title:"Generate comprehensive case report",children:"\ud83d\udcc4 Generate Report"}),"admin"===S&&(0,vr.jsxs)(vr.Fragment,{children:[(0,vr.jsx)("button",{onClick:()=>{if("admin"!==S&&"investigator"!==S)return void js.error("\u274c Access denied: Evidence creation requires admin or investigator privileges");const e=document.createElement("input");e.type="file",e.accept=".pdf,.jpg,.jpeg,.png,.doc,.docx,.txt,.zip",e.onchange=async e=>{const t=e.target.files[0];if(!t)return;const n=prompt("Enter Case ID:"),r=prompt("Enter Entity (wallet address/IP):"),i=prompt("Enter description (optional):")||"",o=prompt("Enter tags (comma separated, optional):")||"",s=prompt("Enter risk level (low/medium/high):","medium");if(!n||!r)return void js.error("\u274c Case ID and Entity are required");const a=new FormData;a.append("evidenceFile",t),a.append("caseId",n),a.append("entity",r),a.append("description",i),a.append("tags",o),a.append("riskLevel",s);try{const e=(void 0).VITE_BACKEND_URL||"http://localhost:5050",t=localStorage.getItem("authToken");(await Do.post(`${e}/api/evidence/upload`,a,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"multipart/form-data"}})).data.message&&(js.success("\u2705 Evidence uploaded and added to blockchain successfully!"),I())}catch(l){console.error("Error uploading evidence:",l),js.error("\u274c Failed to upload evidence")}},e.click()},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200 flex items-center gap-2",title:"Upload new evidence to blockchain",children:"\ud83d\udce4 Create Evidence"}),(0,vr.jsx)("button",{onClick:()=>{"admin"===S?window.location.href="/admin":js.error("\u274c Access denied: User management requires admin privileges")},className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200 flex items-center gap-2",title:"Access admin dashboard for user management",children:"\ud83d\udc65 User Management"})]})]})]}),(0,vr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,vr.jsx)("div",{className:"md:col-span-2",children:(0,vr.jsx)("input",{type:"text",placeholder:"Search by case ID, entity, or filename...",value:o,onChange:e=>s(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md text-sm"})}),(0,vr.jsxs)("select",{value:d,onChange:e=>h(e.target.value),className:"p-2 border border-gray-300 rounded-md text-sm",children:[(0,vr.jsx)("option",{value:"",children:"All Status"}),(0,vr.jsx)("option",{value:"verified",children:"Verified"}),(0,vr.jsx)("option",{value:"pending",children:"Pending"}),(0,vr.jsx)("option",{value:"failed",children:"Failed"})]}),(0,vr.jsxs)("select",{value:f,onChange:e=>p(e.target.value),className:"p-2 border border-gray-300 rounded-md text-sm",children:[(0,vr.jsx)("option",{value:"",children:"All Risk Levels"}),(0,vr.jsx)("option",{value:"high",children:"High"}),(0,vr.jsx)("option",{value:"medium",children:"Medium"}),(0,vr.jsx)("option",{value:"low",children:"Low"})]}),(0,vr.jsxs)("select",{value:`${a}-${c}`,onChange:e=>{const[t,n]=e.target.value.split("-");l(t),u(n)},className:"p-2 border border-gray-300 rounded-md text-sm",children:[(0,vr.jsx)("option",{value:"uploadedAt-desc",children:"Latest First"}),(0,vr.jsx)("option",{value:"uploadedAt-asc",children:"Oldest First"}),(0,vr.jsx)("option",{value:"caseId-asc",children:"Case ID A-Z"}),(0,vr.jsx)("option",{value:"caseId-desc",children:"Case ID Z-A"}),(0,vr.jsx)("option",{value:"riskLevel-desc",children:"High Risk First"})]})]})]}),(0,vr.jsx)("div",{className:"overflow-x-auto",children:n?(0,vr.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,vr.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,vr.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading evidence..."})]}):(0,vr.jsxs)("table",{className:"min-w-full",children:[(0,vr.jsx)("thead",{className:"bg-gray-50",children:(0,vr.jsxs)("tr",{children:[(0,vr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Case / Entity"}),(0,vr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"File Info"}),(0,vr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Blockchain"}),(0,vr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,vr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Uploaded"}),(0,vr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,vr.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:D.map(e=>{return(0,vr.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,vr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,vr.jsxs)("div",{children:[(0,vr.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.caseId}),(0,vr.jsx)("div",{className:"text-sm text-gray-500",children:e.entity})]})}),(0,vr.jsx)("td",{className:"px-6 py-4",children:(0,vr.jsxs)("div",{children:[(0,vr.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.originalFilename}),(0,vr.jsxs)("div",{className:"text-sm text-gray-500",children:[B(e.fileSize)," \u2022 ",e.fileType]}),e.tags&&e.tags.length>0&&(0,vr.jsxs)("div",{className:"flex flex-wrap gap-1 mt-1",children:[e.tags.slice(0,2).map((e,t)=>(0,vr.jsx)("span",{className:"inline-block px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded",children:e},t)),e.tags.length>2&&(0,vr.jsxs)("span",{className:"text-xs text-gray-500",children:["+",e.tags.length-2]})]})]})}),(0,vr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,vr.jsxs)("div",{className:"text-sm text-gray-900",children:[(0,vr.jsxs)("div",{children:["Hash: ",(t=e.fileHash,t?`${t.substring(0,8)}...${t.substring(t.length-8)}`:"N/A")]}),(0,vr.jsxs)("div",{children:["Block: #",e.blockNumber]})]})}),(0,vr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,vr.jsxs)("div",{className:"space-y-1",children:[(0,vr.jsx)("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${$(e.verificationStatus)}`,children:e.verificationStatus}),(0,vr.jsxs)("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${U(e.riskLevel)}`,children:[e.riskLevel," risk"]})]})}),(0,vr.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[(0,vr.jsx)("div",{children:new Date(e.uploadedAt).toLocaleDateString()}),(0,vr.jsx)("div",{children:e.uploadedBy})]}),(0,vr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-y-1",children:(0,vr.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,vr.jsx)("button",{onClick:()=>(async(e,t)=>{if(S&&["admin","investigator"].includes(S))try{const n=(void 0).VITE_BACKEND_URL||"http://localhost:5050",r=localStorage.getItem("authToken"),i=await Do.get(`${n}/api/evidence/download/${e}`,{headers:{Authorization:`Bearer ${r}`},responseType:"blob"}),o=window.URL.createObjectURL(new Blob([i.data])),s=document.createElement("a");s.href=o,s.setAttribute("download",t),document.body.appendChild(s),s.click(),s.remove(),window.URL.revokeObjectURL(o),js.success("\u2705 Evidence downloaded successfully!")}catch(r){var n;console.error("Error downloading evidence:",r),403===(null===(n=r.response)||void 0===n?void 0:n.status)?js.error("\u274c Access denied: Insufficient permissions to download evidence"):js.error("\u274c Failed to download evidence")}else js.error("\u274c Access denied: Download permission requires investigator or admin role")})(e._id,e.originalFilename),className:"text-blue-600 hover:text-blue-900 text-xs",children:"\ud83d\udce5 Download"}),(0,vr.jsx)("button",{onClick:()=>(async e=>{try{const t=(void 0).VITE_BACKEND_URL||"http://localhost:5050",n=localStorage.getItem("authToken"),r=await Do.post(`${t}/api/evidence/verify/${e}`,{},{headers:{Authorization:`Bearer ${n}`}});r.data.success&&js.success(`\u2705 Verification: ${r.data.verification.overallStatus.toUpperCase()}`)}catch(t){console.error("Error verifying evidence:",t),js.error("\u274c Failed to verify evidence")}})(e._id),className:"text-green-600 hover:text-green-900 text-xs",children:"\u2705 Verify"}),(0,vr.jsx)("button",{onClick:()=>{y(e.caseId),g(!0)},className:"text-purple-600 hover:text-purple-900 text-xs",children:"\ud83d\udd17 View Chain"}),(0,vr.jsx)("button",{onClick:()=>z(e.caseId),className:"text-indigo-600 hover:text-indigo-900 text-xs font-medium",title:"Generate styled PDF report with case summary, evidence hashes, risk evolution, and escalation trail",children:"\ud83d\udcc4 Generate Report"}),(0,vr.jsx)("button",{onClick:()=>(async e=>{if(S&&["admin","investigator"].includes(S))try{const t=(void 0).VITE_BACKEND_URL||"http://localhost:5050",n=localStorage.getItem("authToken"),r=await Do.post(`${t}/api/reports/entity/${e}`,{format:"pdf",includeEvidence:!0,includeTimeline:!0,watermark:!0},{headers:{Authorization:`Bearer ${n}`},responseType:"blob"}),i=window.URL.createObjectURL(new Blob([r.data])),o=document.createElement("a");o.href=i,o.setAttribute("download",`entity-report-${e}-${Date.now()}.pdf`),document.body.appendChild(o),o.click(),o.remove(),window.URL.revokeObjectURL(i),js.success("\u2705 PDF report generated and downloaded!")}catch(n){var t;console.error("Error generating entity report:",n),403===(null===(t=n.response)||void 0===t?void 0:t.status)?js.error("\u274c Access denied: Insufficient permissions to generate entity reports"):js.error("\u274c Failed to generate entity report")}else js.error("\u274c Access denied: Entity report generation requires investigator or admin role")})(e.entity),className:"text-orange-600 hover:text-orange-900 text-xs",title:"Generate entity-specific PDF report",children:"\ud83d\udc64 Entity Report"}),(0,vr.jsx)("button",{onClick:()=>(e=>{S&&["admin","investigator"].includes(S)?(P(e),C(!0)):js.error("\u274c Access denied: Evidence sharing requires investigator or admin role")})(e),className:"text-teal-600 hover:text-teal-900 text-xs font-medium",title:"Share evidence with other investigators",children:"\ud83d\udce4 Share"}),(0,vr.jsx)("button",{onClick:()=>{M(e.caseId),O(!0)},className:"text-purple-600 hover:text-purple-900 text-xs font-medium",title:"View case correlation visualization",children:"\ud83c\udf10 Correlation"}),"admin"===S&&(0,vr.jsxs)(vr.Fragment,{children:[(0,vr.jsx)("button",{onClick:()=>(e=>{var t;if("admin"!==S&&"investigator"!==S)return void js.error("\u274c Access denied: Evidence modification requires admin or investigator privileges");const n=prompt("Enter new description:",e.description||""),r=prompt("Enter new tags (comma separated):",(null===(t=e.tags)||void 0===t?void 0:t.join(", "))||""),i=prompt("Enter new risk level (low/medium/high):",e.riskLevel);if(null!==n&&null!==r&&null!==i){const e={description:n,tags:r.split(",").map(e=>e.trim()).filter(e=>e.length>0),riskLevel:i};js.info("\ud83d\udd04 Evidence metadata update functionality requires backend implementation"),console.log("Would update evidence with:",e)}})(e),className:"text-yellow-600 hover:text-yellow-900 text-xs font-medium",title:"Modify evidence metadata (Admin only)",children:"\u270f\ufe0f Modify"}),(0,vr.jsx)("button",{onClick:()=>{window.confirm("\u26a0\ufe0f Are you sure you want to delete this evidence? This action cannot be undone and will be logged in the audit trail.")&&(async(e,t)=>{if("admin"===S)try{const n=(void 0).VITE_BACKEND_URL||"http://localhost:5050",r=localStorage.getItem("authToken");(await Do.delete(`${n}/api/evidence/admin/${e}`,{headers:{Authorization:`Bearer ${r}`}})).data.success&&(js.success(`\u2705 Evidence "${t}" deleted successfully`),I())}catch(r){var n;console.error("Error deleting evidence:",r),403===(null===(n=r.response)||void 0===n?void 0:n.status)?js.error("\u274c Access denied: Insufficient permissions to delete evidence"):js.error("\u274c Failed to delete evidence")}else js.error("\u274c Access denied: Evidence deletion requires admin role")})(e._id,e.originalFilename)},className:"text-red-600 hover:text-red-900 text-xs font-medium",title:"Delete evidence (Admin only - audit logged)",children:"\ud83d\uddd1\ufe0f Delete"}),(0,vr.jsx)("button",{onClick:()=>(e=>{if("admin"!==S)return void js.error("\u274c Access denied: External escalation requires admin privileges");const t=prompt("Escalate to which authority? (CERT/Police/Regulatory):","CERT");t&&(z(e.caseId),js.success(`\u2705 Case escalated to ${t}. Report generated for external sharing.`))})(e),className:"text-orange-600 hover:text-orange-900 text-xs font-medium",title:"Escalate to external authorities (Admin only)",children:"\ud83d\ude91 Escalate"})]})]})})]},e._id);var t})})]})}),x>1&&(0,vr.jsxs)("div",{className:"px-6 py-3 border-t border-gray-200 flex items-center justify-between",children:[(0,vr.jsxs)("div",{className:"text-sm text-gray-500",children:["Page ",_," of ",x]}),(0,vr.jsxs)("div",{className:"flex space-x-2",children:[(0,vr.jsx)("button",{onClick:()=>b(_-1),disabled:1===_,className:"px-3 py-1 text-sm border rounded disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,vr.jsx)("button",{onClick:()=>b(_+1),disabled:_===x,className:"px-3 py-1 text-sm border rounded disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]}),j&&T&&(0,vr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,vr.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full m-4",children:[(0,vr.jsxs)("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[(0,vr.jsx)("h3",{className:"text-lg font-semibold",children:"\ud83d\udce4 Share Evidence"}),(0,vr.jsx)("button",{onClick:()=>{C(!1),P(null)},className:"text-gray-500 hover:text-gray-700",children:"\u2715"})]}),(0,vr.jsxs)("div",{className:"p-4",children:[(0,vr.jsxs)("div",{className:"mb-4",children:[(0,vr.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Sharing:"}),(0,vr.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[(0,vr.jsx)("div",{className:"font-medium",children:T.originalFilename}),(0,vr.jsxs)("div",{className:"text-sm text-gray-500",children:["Case: ",T.caseId]}),(0,vr.jsxs)("div",{className:"text-sm text-gray-500",children:["Entity: ",T.entity]})]})]}),(0,vr.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=new FormData(e.target),n={shareWithEmails:t.get("emails").split(",").map(e=>e.trim()),message:t.get("message"),expiryHours:parseInt(t.get("expiry"))};(async(e,t)=>{if(S&&["admin","investigator"].includes(S))try{const n=(void 0).VITE_BACKEND_URL||"http://localhost:5050",r=localStorage.getItem("authToken");(await Do.post(`${n}/api/evidence/share/${e}`,t,{headers:{Authorization:`Bearer ${r}`}})).data.success&&(js.success("\u2705 Evidence shared successfully!"),C(!1),P(null))}catch(r){var n;console.error("Error sharing evidence:",r),403===(null===(n=r.response)||void 0===n?void 0:n.status)?js.error("\u274c Access denied: Insufficient permissions to share evidence"):js.error("\u274c Failed to share evidence")}else js.error("\u274c Access denied: Evidence sharing requires investigator or admin role")})(T._id,n)},children:[(0,vr.jsxs)("div",{className:"mb-4",children:[(0,vr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Share with (email addresses, comma separated)"}),(0,vr.jsx)("input",{type:"text",name:"emails",required:!0,className:"w-full p-2 border border-gray-300 rounded-md text-sm",placeholder:"user1@example.com, user2@example.com"})]}),(0,vr.jsxs)("div",{className:"mb-4",children:[(0,vr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Message (optional)"}),(0,vr.jsx)("textarea",{name:"message",rows:"3",className:"w-full p-2 border border-gray-300 rounded-md text-sm",placeholder:"Add a message to accompany the shared evidence..."})]}),(0,vr.jsxs)("div",{className:"mb-4",children:[(0,vr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry (hours)"}),(0,vr.jsxs)("select",{name:"expiry",defaultValue:"24",className:"w-full p-2 border border-gray-300 rounded-md text-sm",children:[(0,vr.jsx)("option",{value:"1",children:"1 hour"}),(0,vr.jsx)("option",{value:"6",children:"6 hours"}),(0,vr.jsx)("option",{value:"12",children:"12 hours"}),(0,vr.jsx)("option",{value:"24",children:"24 hours"}),(0,vr.jsx)("option",{value:"48",children:"48 hours"}),(0,vr.jsx)("option",{value:"168",children:"1 week"})]})]}),(0,vr.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,vr.jsx)("button",{type:"button",onClick:()=>{C(!1),P(null)},className:"px-4 py-2 text-sm border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,vr.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Share Evidence"})]})]})]})]})}),L&&A&&(0,vr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,vr.jsx)("div",{className:"bg-white rounded-lg w-full h-full max-w-6xl max-h-[90vh] m-4",children:(0,vr.jsx)(Zp,{caseId:A,onClose:()=>{O(!1),M("")}})})})]})},Vp=Do.create({baseURL:"http://localhost:5050",headers:{"Content-Type":"application/json"}});Vp.interceptors.request.use(e=>{const t=localStorage.getItem("authToken");return t&&(e.headers.Authorization=`Bearer ${t}`),e});const qp="http://localhost:5050";console.log("\ud83d\udd17 Base URL:",qp);const Kp=Do.create({baseURL:qp,headers:{"Content-Type":"application/json"}});Kp.interceptors.request.use(e=>{const t=localStorage.getItem("authToken");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),Kp.interceptors.response.use(e=>e,e=>{var t;return 403===(null===(t=e.response)||void 0===t?void 0:t.status)&&console.error("\u274c Authentication failed"),Promise.reject(e)});const Yp=Kp;function Gp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5050;const[t,n]=(0,r.useState)([]),[i,o]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let t=!0;async function r(){if(!localStorage.getItem("authToken"))return console.warn("\u26a0\ufe0f No auth token found for polling /api/events"),void(t&&o(!1));try{const e=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;try{var t;return(null===(t=(await Yp.get(`/api/events?limit=${e}`)).data)||void 0===t?void 0:t.results)||[]}catch(r){var n;return console.error("\u274c Failed to fetch events:",(null===(n=r.response)||void 0===n?void 0:n.data)||r.message),[]}}();t&&n(e)}catch(e){console.error("\u274c Failed to load events:",e)}finally{t&&o(!1)}}r();const i=setInterval(r,e);return()=>{t=!1,clearInterval(i)}},[e]),{events:t,loading:i}}function Xp(){const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{(async()=>{try{const e=await fetch("http://localhost:5050/api/events?limit=20"),n=await e.json();console.log("\u2705 Fetched data:",n),t(Array.isArray(n)?n:[])}catch(e){console.error("\u274c Failed to load alerts:",e),t([])}finally{i(!1)}})()},[]),(0,vr.jsxs)("div",{className:"mt-6",children:[(0,vr.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"\ud83d\udd14 Recent High-Risk Alerts"}),n?(0,vr.jsx)("p",{className:"text-gray-500",children:"Loading..."}):0===e.length?(0,vr.jsx)("p",{className:"text-gray-500",children:"No alerts yet."}):(0,vr.jsx)("ul",{className:"space-y-2",children:e.map(e=>{var t,n,r,i;return(0,vr.jsxs)("li",{className:"p-3 border rounded bg-gray-50 text-sm",children:[(0,vr.jsxs)("div",{children:[(0,vr.jsx)("b",{children:"Wallet:"})," ",(null===(t=e.payload)||void 0===t?void 0:t.entityId)||"N/A"]}),(0,vr.jsxs)("div",{children:[(0,vr.jsx)("b",{children:"Report ID:"})," ",(null===(n=e.payload)||void 0===n?void 0:n.reportId)||"N/A"]}),(0,vr.jsxs)("div",{children:[(0,vr.jsx)("b",{children:"At:"})," ",new Date(e.createdAt).toLocaleString()]}),"contract"===(null===(r=e.payload)||void 0===r?void 0:r.source)&&(0,vr.jsx)("span",{className:"inline-block mt-1 text-xs font-medium bg-purple-100 text-purple-700 px-2 py-1 rounded-full",children:"Flagged via Contract"}),"admin"===(null===(i=e.payload)||void 0===i?void 0:i.source)&&(0,vr.jsx)("span",{className:"inline-block mt-1 text-xs font-medium bg-red-100 text-red-700 px-2 py-1 rounded-full",children:"Escalated by Admin"})]},e._id)})})]})}const Jp=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)("");return(0,r.useEffect)(()=>{(async()=>{try{const e=localStorage.getItem("token"),n=await Do.get("/api/admin/dumps",{headers:{Authorization:`Bearer ${e}`}});t(n.data.files)}catch(e){console.error("Failed to fetch files:",e),i("Unauthorized or server error.")}})()},[]),(0,vr.jsxs)("div",{className:"p-4",children:[(0,vr.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"\ud83d\udee1 Admin Dump Files"}),n?(0,vr.jsx)("div",{className:"text-red-600",children:n}):(0,vr.jsxs)("table",{className:"min-w-full bg-white border border-gray-300 rounded shadow",children:[(0,vr.jsx)("thead",{className:"bg-gray-200",children:(0,vr.jsxs)("tr",{children:[(0,vr.jsx)("th",{className:"p-2 text-left",children:"Filename"}),(0,vr.jsx)("th",{className:"p-2 text-left",children:"Actions"})]})}),(0,vr.jsxs)("tbody",{children:[e.map((e,t)=>(0,vr.jsxs)("tr",{className:"border-t hover:bg-gray-50",children:[(0,vr.jsx)("td",{className:"p-2",children:e}),(0,vr.jsx)("td",{className:"p-2",children:(0,vr.jsx)("a",{href:`/dumps/${e}`,className:"bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700",download:!0,children:"\u2b07 Download"})})]},t)),0===e.length&&(0,vr.jsx)("tr",{children:(0,vr.jsx)("td",{colSpan:"2",className:"p-4 text-gray-500 text-center",children:"No dump files found."})})]})]})]})};const Qp=function(){var e,t,n,i,o,s,a,l,c;const[u,d]=(0,r.useState)(""),[h,f]=(0,r.useState)(""),[p,m]=(0,r.useState)(null),[g,v]=(0,r.useState)(""),[y,_]=(0,r.useState)(""),[b,x]=(0,r.useState)(""),[w,S]=(0,r.useState)([]),[k,E]=(0,r.useState)(!0),[N,j]=(0,r.useState)(""),[C,T]=(0,r.useState)(""),[P,L]=(0,r.useState)(!1),[O,A]=(0,r.useState)(!1),[M,R]=(0,r.useState)(!1),[I,z]=(0,r.useState)("Checking..."),[D,B]=(0,r.useState)(!1),[$,U]=(0,r.useState)(""),[F,H]=(0,r.useState)(null),[Z,W]=(0,r.useState)(!1),[V,q]=(0,r.useState)(!1),{events:K,loading:Y}=Gp(5050),G=(0,r.useCallback)(async()=>{try{(await fetch("http://localhost:5050/health")).ok?z("\u2705 Connected"):z("\u274c Backend Error")}catch(e){z("\u274c Connection Failed")}},[]),X=()=>`CASE_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;(0,r.useEffect)(()=>{(async()=>{const e=localStorage.getItem("authToken");if(e)try{const t="http://localhost:5050",n=await fetch(`${t}/api/auth/verify`,{headers:{Authorization:`Bearer ${e}`}});if(n.ok){const e=await n.json();return m({id:e.id,email:e.email,role:e.role}),void E(!1)}}catch(n){console.error("Error verifying custom auth token:",n)}const{data:{session:t}}=await mr.auth.getSession();t&&(localStorage.setItem("authToken",t.access_token),localStorage.setItem("userInfo",JSON.stringify(t.user)),m(t.user)),E(!1)})(),G()},[G]);const J=(0,r.useCallback)(async()=>{const e=localStorage.getItem("authToken");if(e&&null!==p&&void 0!==p&&p.email)try{const t=await fetch(`http://localhost:5050/api/reports?user_email=${p.email}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}}),n=await t.json();if(null!==n&&void 0!==n&&n.results){S(n.results);const e=n.results[0];"high"===(null===e||void 0===e?void 0:e.risk)&&js.warn(`\ud83d\udd34 High-risk report: ${e.wallet}`)}}catch(t){console.error("\u274c Failed to fetch reports:",t.message)}},[p]);(0,r.useEffect)(()=>{p&&J()},[p,J]);const Q=async()=>{try{await mr.auth.signOut()}catch(e){console.error("Supabase sign out error:",e)}localStorage.removeItem("authToken"),localStorage.removeItem("userInfo"),m(null),S([]),v(""),_(""),x(""),alert("Logged out successfully!")},ee="admin"===(null===p||void 0===p||null===(e=p.user_metadata)||void 0===e?void 0:e.role);return(0,vr.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-100",children:[(0,vr.jsx)("header",{className:"bg-white shadow-lg border-b border-gray-200",children:(0,vr.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,vr.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,vr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,vr.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-lg flex items-center justify-center",children:(0,vr.jsx)("span",{className:"text-white font-bold text-xl",children:"\ud83d\udee1\ufe0f"})}),(0,vr.jsxs)("div",{children:[(0,vr.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"ChainSafeGuard"}),(0,vr.jsx)("p",{className:"text-xs text-gray-500",children:"Fraud Detection & Evidence Management"})]})]}),(0,vr.jsxs)("div",{className:"flex items-center space-x-4",children:[p&&(0,vr.jsxs)(vr.Fragment,{children:[(0,vr.jsxs)("div",{className:"hidden sm:flex items-center space-x-2 bg-gray-100 rounded-full px-4 py-2",children:[(0,vr.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-green-400 to-blue-500 rounded-full flex items-center justify-center",children:(0,vr.jsx)("span",{className:"text-white text-sm font-medium",children:p.email.charAt(0).toUpperCase()})}),(0,vr.jsxs)("div",{className:"text-sm",children:[(0,vr.jsx)("p",{className:"font-medium text-gray-900",children:p.email}),ee&&(0,vr.jsx)("p",{className:"text-xs text-green-600 font-medium",children:"\ud83d\udee1 Admin Access"})]})]}),(0,vr.jsx)("div",{className:"sm:hidden bg-gray-100 rounded-full px-3 py-2",children:(0,vr.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-green-400 to-blue-500 rounded-full flex items-center justify-center",children:(0,vr.jsx)("span",{className:"text-white text-sm font-medium",children:p.email.charAt(0).toUpperCase()})})}),(0,vr.jsxs)("button",{onClick:Q,className:"inline-flex items-center px-4 py-2 border border-red-300 rounded-md shadow-sm text-sm font-medium text-red-700 bg-white hover:bg-red-50 transition-colors duration-200",children:[(0,vr.jsx)("span",{className:"hidden sm:inline",children:"Sign Out"}),(0,vr.jsx)("span",{className:"sm:hidden",children:"\ud83d\udeaa"})]})]}),(0,vr.jsx)(we,{to:"/public",className:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-md transition-colors duration-200",children:"\ud83d\udd0e Public Risk Checker"})]})]})})}),(0,vr.jsx)("main",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,vr.jsx)("div",{className:"bg-white rounded-xl shadow-xl border border-gray-200 overflow-hidden",children:k?(0,vr.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,vr.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),(0,vr.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading session..."})]}):p?(0,vr.jsxs)("div",{className:"space-y-8",children:[ee&&(0,vr.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl p-6",children:[(0,vr.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,vr.jsx)("div",{className:"w-10 h-10 bg-green-600 rounded-lg flex items-center justify-center",children:(0,vr.jsx)("span",{className:"text-white text-lg",children:"\ud83d\udee1"})}),(0,vr.jsxs)("div",{children:[(0,vr.jsx)("h2",{className:"text-xl font-bold text-green-800",children:"Admin Dashboard"}),(0,vr.jsx)("p",{className:"text-sm text-green-600",children:"Administrative tools and data management"})]})]}),(0,vr.jsx)(Jp,{})]}),(0,vr.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[(0,vr.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,vr.jsx)("div",{className:"w-10 h-10 bg-red-600 rounded-lg flex items-center justify-center",children:(0,vr.jsx)("span",{className:"text-white text-lg",children:"\ud83d\udea8"})}),(0,vr.jsxs)("div",{children:[(0,vr.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Report Suspicious Activity"}),(0,vr.jsx)("p",{className:"text-sm text-gray-600",children:"Submit wallet addresses for fraud investigation"})]})]}),(0,vr.jsx)("div",{className:"space-y-6",children:(0,vr.jsxs)("div",{className:"space-y-4",children:[(0,vr.jsxs)("div",{children:[(0,vr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Wallet Address"}),(0,vr.jsx)(yr,{onValid:e=>v(e)})]}),(0,vr.jsxs)("div",{children:[(0,vr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for Reporting"}),(0,vr.jsx)("textarea",{className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent transition-colors duration-200 resize-none",placeholder:"Describe the suspicious activity in detail...",value:y,onChange:e=>_(e.target.value),rows:4})]}),(0,vr.jsxs)("div",{className:"pt-4",children:[(0,vr.jsx)("button",{onClick:async()=>{if(!g)return alert("Please enter a valid wallet.");if(!y.trim())return alert("Please enter a reason for reporting.");await(async(e,t)=>{if(e&&t.trim()){W(!0),q(!0);try{const n=localStorage.getItem("authToken"),r=await fetch("http://localhost:5050/api/ml/analyze",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({address:e,reason:t})});if(r.ok){const e=await r.json();H(e.analysis),js.success("\u2699\ufe0f ML Analysis completed!")}else{const e=await r.json();js.error(`ML Analysis failed: ${e.error}`)}}catch(n){console.error("ML Analysis error:",n),js.error("\u274c ML Analysis failed: Network error")}finally{W(!1)}}else js.error("Wallet and reason are required for ML analysis")})(g,y);const e=(new Date).toISOString().split("T")[0],t=JSON.parse(localStorage.getItem("reportCount")||"{}");if(t[e]||(t[e]=0),t[e]>=3)return void js.error("\u26a0\ufe0f Daily report limit (3) reached.");const n=localStorage.getItem("authToken");if(!n)return alert("Session expired. Please log in again."),void Q();try{js.info("\u23f3 Sending to smart contract...");const e=await(async e=>await Vp.flagWallet(e))(g);await e.wait(),js.success("\u2705 Flag confirmed on-chain!"),x(e.hash)}catch(r){return console.error("\u274c Contract error:",r),void js.error(`\u274c Contract error: ${r.message||"Unknown error"}`)}try{const t=await fetch("http://localhost:5050/api/reports",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({user_email:p.email,wallet:g,reason:y,status:"pending",date:e})});if(t.ok)js.success("\u2705 Report submitted successfully!"),v(""),_(""),B(!0),U(g),J();else{const e=await t.json();js.error(`\u274c Report submission failed: ${e.error}`)}}catch(r){console.error("\u274c Submission error:",r),js.error("\u274c Report submission failed")}},className:"w-full bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-700 hover:to-pink-700 text-white font-medium py-3 px-6 rounded-lg transition-all duration-200 transform hover:scale-105",disabled:!g||!y.trim(),children:"\ud83d\udea8 Submit Report & Analyze with AI"}),(!g||!y.trim())&&(0,vr.jsx)("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"\ud83d\udccb Both wallet address and reason are required for ML analysis"})]}),b&&(0,vr.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,vr.jsx)("p",{className:"text-sm text-blue-800 mb-2 font-medium",children:"Transaction Submitted"}),(0,vr.jsx)("a",{href:`https://sepolia.etherscan.io/tx/${b}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-blue-600 hover:text-blue-800 text-sm font-medium",children:"View on Etherscan \u2197"})]}),g&&y.trim()&&!V&&(0,vr.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg p-4",children:(0,vr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,vr.jsx)("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:(0,vr.jsx)("span",{className:"text-white text-sm",children:"\ud83e\udd16"})}),(0,vr.jsxs)("div",{children:[(0,vr.jsx)("p",{className:"text-sm font-medium text-blue-800",children:"\u2728 AI Analysis Ready"}),(0,vr.jsx)("p",{className:"text-xs text-blue-600",children:"Click submit to analyze wallet behavior patterns"})]})]})}),V&&(0,vr.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 rounded-lg p-6",children:[(0,vr.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,vr.jsx)("div",{className:"w-10 h-10 bg-purple-600 rounded-lg flex items-center justify-center",children:(0,vr.jsx)("span",{className:"text-white text-lg",children:"\ud83e\udd16"})}),(0,vr.jsxs)("div",{children:[(0,vr.jsx)("h3",{className:"text-lg font-bold text-purple-800",children:"AI/ML Analysis Results"}),(0,vr.jsx)("p",{className:"text-sm text-purple-600",children:"Real-time behavioral pattern detection"})]})]}),Z?(0,vr.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,vr.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),(0,vr.jsx)("span",{className:"ml-3 text-purple-700",children:"Analyzing wallet behavior patterns..."})]}):F?(0,vr.jsxs)("div",{className:"space-y-4",children:[(0,vr.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-purple-200",children:[(0,vr.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,vr.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Risk Score"}),(0,vr.jsxs)("span",{className:"text-2xl font-bold "+(F.score>=.8?"text-red-600":F.score>=.6?"text-orange-600":F.score>=.4?"text-yellow-600":"text-green-600"),children:[F.score,"/1.0"]})]}),(0,vr.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,vr.jsx)("div",{className:"h-2 rounded-full "+(F.score>=.8?"bg-red-500":F.score>=.6?"bg-orange-500":F.score>=.4?"bg-yellow-500":"bg-green-500"),style:{width:100*F.score+"%"}})})]}),(0,vr.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-purple-200",children:[(0,vr.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Detected Violations"}),(0,vr.jsx)("p",{className:"text-sm font-semibold "+("Low risk activity"===F.violation?"text-green-600":"text-red-600"),children:F.violation})]}),(0,vr.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-purple-200",children:[(0,vr.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Recommended Action"}),(0,vr.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium "+("freeze"===F.recommended_action?"bg-red-100 text-red-800":"investigate"===F.recommended_action?"bg-orange-100 text-orange-800":"monitor"===F.recommended_action?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:F.recommended_action.replace("_"," ").toUpperCase()})]}),F.analysis_details&&(0,vr.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-purple-200",children:[(0,vr.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Analysis Breakdown"}),(0,vr.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-xs",children:[(0,vr.jsxs)("div",{className:"flex justify-between",children:[(0,vr.jsx)("span",{children:"Rapid Dumping:"}),(0,vr.jsx)("span",{className:null!==(t=F.analysis_details.rapid_dumping)&&void 0!==t&&t.detected?"text-red-600 font-semibold":"text-green-600",children:null!==(n=F.analysis_details.rapid_dumping)&&void 0!==n&&n.detected?"\u26a0\ufe0f Detected":"\u2705 Clean"})]}),(0,vr.jsxs)("div",{className:"flex justify-between",children:[(0,vr.jsx)("span",{children:"Large Transfers:"}),(0,vr.jsx)("span",{className:null!==(i=F.analysis_details.large_transfers)&&void 0!==i&&i.detected?"text-red-600 font-semibold":"text-green-600",children:null!==(o=F.analysis_details.large_transfers)&&void 0!==o&&o.detected?"\u26a0\ufe0f Detected":"\u2705 Clean"})]}),(0,vr.jsxs)("div",{className:"flex justify-between",children:[(0,vr.jsx)("span",{children:"Flash Loans:"}),(0,vr.jsx)("span",{className:null!==(s=F.analysis_details.flash_loans)&&void 0!==s&&s.detected?"text-red-600 font-semibold":"text-green-600",children:null!==(a=F.analysis_details.flash_loans)&&void 0!==a&&a.detected?"\u26a0\ufe0f Detected":"\u2705 Clean"})]}),(0,vr.jsxs)("div",{className:"flex justify-between",children:[(0,vr.jsx)("span",{children:"Phishing Indicators:"}),(0,vr.jsx)("span",{className:null!==(l=F.analysis_details.phishing_indicators)&&void 0!==l&&l.detected?"text-red-600 font-semibold":"text-green-600",children:null!==(c=F.analysis_details.phishing_indicators)&&void 0!==c&&c.detected?"\u26a0\ufe0f Detected":"\u2705 Clean"})]})]})]}),(0,vr.jsx)("div",{className:"bg-gray-50 rounded-lg p-3 text-xs text-gray-600",children:(0,vr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,vr.jsxs)("span",{children:["Analyzed: ",new Date(F.analyzed_at).toLocaleString()]}),(0,vr.jsxs)("span",{children:["Transactions: ",F.transaction_count||0]})]})})]}):(0,vr.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,vr.jsx)("span",{className:"text-2xl mb-2 block",children:"\ud83e\udd16"}),(0,vr.jsx)("p",{className:"font-medium",children:"AI Analysis in Progress"}),(0,vr.jsx)("p",{className:"text-xs mt-1",children:"Analyzing wallet behavior and transaction patterns..."})]})]})]})})]}),(0,vr.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-6",children:[(0,vr.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,vr.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:(0,vr.jsx)("span",{className:"text-white text-lg",children:"\ud83d\udcce"})}),(0,vr.jsxs)("div",{children:[(0,vr.jsx)("h2",{className:"text-xl font-bold text-blue-800",children:"Evidence Management"}),(0,vr.jsx)("p",{className:"text-sm text-blue-600",children:"Upload and manage digital evidence with blockchain verification"})]})]}),(0,vr.jsx)("div",{className:"bg-white border border-blue-200 rounded-lg p-4 mb-6",children:(0,vr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,vr.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center",children:(0,vr.jsx)("span",{className:"text-lg",children:"\ud83d\udcbe"})}),(0,vr.jsxs)("div",{children:[(0,vr.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Database Connection"}),(0,vr.jsx)("p",{className:"text-sm font-semibold {mongoConnectionStatus.includes('\u2705') ? 'text-green-600' : 'text-red-600'}",children:I})]})]})}),(0,vr.jsxs)("div",{className:"bg-white border border-blue-200 rounded-lg p-4 mb-6",children:[(0,vr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"\ud83d\udcb3 Wallet ID for Evidence Upload"}),(0,vr.jsx)("input",{type:"text",value:N,onChange:e=>j(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",placeholder:"Enter wallet address to associate evidence..."})]}),(0,vr.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[(0,vr.jsxs)("button",{onClick:()=>{N.trim()?(T(X()),L(!0),A(!1),R(!1)):js.error("Please enter a wallet ID first")},className:"flex items-center justify-center space-x-2 bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition-all duration-200 transform hover:scale-105",children:[(0,vr.jsx)("span",{children:"\ud83d\udcce"}),(0,vr.jsx)("span",{children:"Upload Evidence"})]}),(0,vr.jsxs)("button",{onClick:()=>{A(!0),L(!1),R(!1)},className:"flex items-center justify-center space-x-2 border-2 border-blue-600 text-blue-600 hover:bg-blue-600 hover:text-white font-medium py-3 px-4 rounded-lg transition-all duration-200",children:[(0,vr.jsx)("span",{children:"\ud83d\udcc1"}),(0,vr.jsx)("span",{children:"Evidence Library"})]}),N&&(0,vr.jsxs)("button",{onClick:()=>{N.trim()?(T(X()),R(!0),L(!1),A(!1)):js.error("Please enter a wallet ID first")},className:"flex items-center justify-center space-x-2 border-2 border-indigo-600 text-indigo-600 hover:bg-indigo-600 hover:text-white font-medium py-3 px-4 rounded-lg transition-all duration-200",children:[(0,vr.jsx)("span",{children:"\ud83d\udd17"}),(0,vr.jsx)("span",{children:"View Chain"})]})]}),P&&N&&(0,vr.jsxs)("div",{className:"bg-white border border-blue-200 rounded-lg p-6",children:[(0,vr.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,vr.jsx)("span",{className:"text-2xl",children:"\ud83d\udcce"}),(0,vr.jsxs)("div",{children:[(0,vr.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Upload Evidence"}),(0,vr.jsxs)("p",{className:"text-sm text-gray-600",children:["Wallet: ",(0,vr.jsx)("span",{className:"font-mono text-blue-600",children:N})]})]})]}),(0,vr.jsx)(Bo,{caseId:C,entity:N,onUploadSuccess:e=>{js.success(`\u2705 Evidence uploaded! Hash: ${e.evidence.fileHash.substring(0,16)}...`)},onUploadError:e=>{js.error(`\u274c Evidence upload failed: ${e}`)}})]}),O&&(0,vr.jsxs)("div",{className:"bg-white border border-blue-200 rounded-lg p-6",children:[(0,vr.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,vr.jsx)("span",{className:"text-2xl",children:"\ud83d\udcc1"}),(0,vr.jsxs)("div",{children:[(0,vr.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Evidence Library"}),(0,vr.jsx)("p",{className:"text-sm text-gray-600",children:"Browse and manage all uploaded evidence"})]})]}),(0,vr.jsx)(Wp,{})]}),M&&N&&(0,vr.jsxs)("div",{className:"bg-white border border-blue-200 rounded-lg p-6",children:[(0,vr.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,vr.jsx)("span",{className:"text-2xl",children:"\ud83d\udd17"}),(0,vr.jsxs)("div",{children:[(0,vr.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Evidence Chain"}),(0,vr.jsxs)("p",{className:"text-sm text-gray-600",children:["Case: ",(0,vr.jsx)("span",{className:"font-mono text-indigo-600",children:C})]})]})]}),(0,vr.jsx)(Cs,{caseId:C,onError:e=>js.error(e)})]})]}),(0,vr.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[(0,vr.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,vr.jsx)("div",{className:"w-10 h-10 bg-purple-600 rounded-lg flex items-center justify-center",children:(0,vr.jsx)("span",{className:"text-white text-lg",children:"\ud83d\udcc8"})}),(0,vr.jsxs)("div",{children:[(0,vr.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Reports Timeline"}),(0,vr.jsx)("p",{className:"text-sm text-gray-600",children:"Track your submitted incident reports"})]})]}),(0,vr.jsx)(_r,{reports:w})]}),(0,vr.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[(0,vr.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,vr.jsx)("div",{className:"w-10 h-10 bg-orange-600 rounded-lg flex items-center justify-center",children:(0,vr.jsx)("span",{className:"text-white text-lg",children:"\ud83d\udea8"})}),(0,vr.jsxs)("div",{children:[(0,vr.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Recent Flagged Events"}),(0,vr.jsx)("p",{className:"text-sm text-gray-600",children:"Real-time wallet flagging activities"})]})]}),Y?(0,vr.jsxs)("div",{className:"flex items-center justify-center h-32",children:[(0,vr.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"}),(0,vr.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading events..."})]}):0===K.length?(0,vr.jsxs)("div",{className:"text-center py-12",children:[(0,vr.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,vr.jsx)("span",{className:"text-2xl text-gray-400",children:"\ud83d\udcad"})}),(0,vr.jsx)("p",{className:"text-gray-500",children:"No recent events to display"})]}):(0,vr.jsx)("div",{className:"space-y-4",children:K.map(e=>(0,vr.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 hover:bg-gray-100 transition-colors duration-200",children:(0,vr.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,vr.jsx)("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:(0,vr.jsx)("span",{className:"text-orange-600 text-lg",children:"\u26a0\ufe0f"})}),(0,vr.jsxs)("div",{className:"flex-1",children:[(0,vr.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,vr.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Wallet:"}),(0,vr.jsx)("span",{className:"text-sm font-mono text-orange-600 bg-orange-50 px-2 py-1 rounded",children:e.payload.entityId})]}),(0,vr.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,vr.jsxs)("span",{children:["Report ID: ",e.payload.reportId]}),(0,vr.jsx)("span",{children:new Date(e.createdAt).toLocaleString()})]})]})]})},e._id))})]}),(0,vr.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[(0,vr.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,vr.jsx)("div",{className:"w-10 h-10 bg-yellow-600 rounded-lg flex items-center justify-center",children:(0,vr.jsx)("span",{className:"text-white text-lg",children:"\ud83d\udea8"})}),(0,vr.jsxs)("div",{children:[(0,vr.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"System Alerts"}),(0,vr.jsx)("p",{className:"text-sm text-gray-600",children:"Monitor system notifications and alerts"})]})]}),(0,vr.jsx)(Xp,{})]})]}):(0,vr.jsxs)("div",{className:"max-w-md mx-auto p-8",children:[(0,vr.jsxs)("div",{className:"text-center mb-8",children:[(0,vr.jsx)("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,vr.jsx)("span",{className:"text-white text-3xl",children:"\ud83d\udee1\ufe0f"})}),(0,vr.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Welcome to ChainSafeGuard"}),(0,vr.jsx)("p",{className:"text-gray-600",children:"Secure fraud detection and evidence management"})]}),(0,vr.jsxs)("div",{className:"space-y-4",children:[(0,vr.jsxs)("div",{children:[(0,vr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,vr.jsx)("input",{type:"email",placeholder:"Enter your email address",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",value:u,onChange:e=>d(e.target.value)})]}),(0,vr.jsxs)("div",{children:[(0,vr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),(0,vr.jsx)("input",{type:"password",placeholder:"Enter your password",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200",value:h,onChange:e=>f(e.target.value)})]}),(0,vr.jsxs)("div",{className:"flex flex-col space-y-3 pt-4",children:[(0,vr.jsx)("button",{onClick:async()=>{try{const e="http://localhost:5050",t=await fetch(`${e}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u,password:h})}),n=await t.json();if(t.ok&&n.token){localStorage.setItem("authToken",n.token);const t=await fetch(`${e}/api/auth/verify`,{headers:{Authorization:`Bearer ${n.token}`}});if(t.ok){const e=await t.json();localStorage.setItem("userInfo",JSON.stringify(e)),m({id:e.id,email:e.email,role:e.role}),"admin"===e.role?(alert("Admin login successful! Redirecting to admin dashboard..."),window.location.href="/admin"):"investigator"===e.role?(alert("Investigator login successful! Redirecting to investigator dashboard..."),window.location.href="/investigator"):"public"===e.role?(alert("Login successful! Redirecting to public dashboard..."),window.location.href="/public"):alert("Login successful!")}else alert("Login successful, but failed to get user info")}else{const{data:e,error:t}=await mr.auth.signInWithPassword({email:u,password:h});if(t)return void alert(t.message);const{session:n,user:r}=e;localStorage.setItem("authToken",n.access_token),localStorage.setItem("userInfo",JSON.stringify(r)),m(r),alert("Login successful!")}}catch(e){console.error("Login error:",e),alert("Login failed: "+e.message)}},className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-medium py-3 px-6 rounded-lg transition-all duration-200 transform hover:scale-105",children:"Sign In"}),(0,vr.jsx)("button",{onClick:async()=>{const{error:e}=await mr.auth.signUp({email:u,password:h});e?alert(e.message):alert("Sign up successful! Please check your email to confirm.")},className:"w-full border-2 border-gray-300 hover:border-blue-500 text-gray-700 hover:text-blue-600 font-medium py-3 px-6 rounded-lg transition-all duration-200",children:"Create New Account"})]})]})]})})}),(0,vr.jsx)("footer",{className:"bg-white border-t border-gray-200 mt-16",children:(0,vr.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,vr.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[(0,vr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,vr.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-lg flex items-center justify-center",children:(0,vr.jsx)("span",{className:"text-white font-bold",children:"\ud83d\udee1\ufe0f"})}),(0,vr.jsxs)("div",{children:[(0,vr.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"ChainSafeGuard"}),(0,vr.jsx)("p",{className:"text-xs text-gray-500",children:"Fraud Detection & Evidence Management"})]})]}),(0,vr.jsx)("div",{className:"text-center text-gray-500 text-sm",children:(0,vr.jsx)("p",{children:"\xa9 2025 ChainSafeGuard | Built with \u2764\ufe0f by Aryan & Keval"})})]})})}),(0,vr.jsx)(ms,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})};const em=(0,r.createContext)(null),tm=em.Provider;function nm(){const e=(0,r.useContext)(em);if(null==e)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}var rm=n(228),im=n.n(rm);function om(){return om=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},om.apply(this,arguments)}function sm(e,t){let{bounds:n,boundsOptions:i,center:o,children:s,className:a,id:l,placeholder:c,style:u,whenReady:d,zoom:h,...f}=e;const[p]=(0,r.useState)({className:a,id:l,style:u}),[m,g]=(0,r.useState)(null);(0,r.useImperativeHandle)(t,()=>m?.map??null,[m]);const v=(0,r.useCallback)(e=>{if(null!==e&&null===m){const t=new rm.Map(e,f);null!=o&&null!=h?t.setView(o,h):null!=n&&t.fitBounds(n,i),null!=d&&t.whenReady(d),g(function(e){return Object.freeze({__version:1,map:e})}(t))}},[]);(0,r.useEffect)(()=>()=>{m?.map.remove()},[m]);const y=m?r.createElement(tm,{value:m},s):c??null;return r.createElement("div",om({},p,{ref:v}),y)}const am=(0,r.forwardRef)(sm);function lm(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function cm(e,t){return null==t?function(t,n){const i=(0,r.useRef)();return i.current||(i.current=e(t,n)),i}:function(n,i){const o=(0,r.useRef)();o.current||(o.current=e(n,i));const s=(0,r.useRef)(n),{instance:a}=o.current;return(0,r.useEffect)(function(){s.current!==n&&(t(a,n,s.current),s.current=n)},[a,n,i]),o}}function um(e,t){const n=(0,r.useRef)(t);(0,r.useEffect)(function(){t!==n.current&&null!=e.attributionControl&&(null!=n.current&&e.attributionControl.removeAttribution(n.current),null!=t&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}function dm(e,t){const n=(0,r.useRef)();(0,r.useEffect)(function(){return null!=t&&e.instance.on(t),n.current=t,function(){null!=n.current&&e.instance.off(n.current),n.current=null}},[e,t])}function hm(e,t){const n=e.pane??t.pane;return n?{...e,pane:n}:e}function fm(e){return function(t){const n=nm(),i=e(hm(t,n),n);return um(n.map,t.attribution),dm(i.current,t.eventHandlers),function(e,t){(0,r.useEffect)(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){t.layerContainer?.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}(i.current,n),i}}const pm=(mm=function(e,t){let{url:n,...r}=e;return lm(new rm.TileLayer(n,hm(r,t)),t)},function(e){function t(t,n){const{instance:i}=e(t).current;return(0,r.useImperativeHandle)(n,()=>i),null}return(0,r.forwardRef)(t)}(fm(cm(mm,function(e,t,n){!function(e,t,n){const{opacity:r,zIndex:i}=t;null!=r&&r!==n.opacity&&e.setOpacity(r),null!=i&&i!==n.zIndex&&e.setZIndex(i)}(e,t,n);const{url:r}=t;null!=r&&r!==n.url&&e.setUrl(r)}))));var mm;const gm=function(e,t){return function(e){function t(t,n){const{instance:i,context:o}=e(t).current;return(0,r.useImperativeHandle)(n,()=>i),null==t.children?null:r.createElement(tm,{value:o},t.children)}return(0,r.forwardRef)(t)}(fm(cm(e,t)))}(function(e,t){let{position:n,...r}=e;const i=new rm.Marker(n,r);return lm(i,(o=t,s={overlayContainer:i},Object.freeze({...o,...s})));var o,s},function(e,t,n){t.position!==n.position&&e.setLatLng(t.position),null!=t.icon&&t.icon!==n.icon&&e.setIcon(t.icon),null!=t.zIndexOffset&&t.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),null!=t.opacity&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),null!=e.dragging&&t.draggable!==n.draggable&&(!0===t.draggable?e.dragging.enable():e.dragging.disable())}),vm=function(e,t){const n=function(e,t){return function(n,r){const i=nm(),o=e(hm(n,i),i);return um(i.map,n.attribution),dm(o.current,n.eventHandlers),t(o.current,i,n,r),o}}(cm(e),t);return function(e){function t(t,n){const[i,o]=(0,r.useState)(!1),{instance:s}=e(t,o).current;(0,r.useImperativeHandle)(n,()=>s),(0,r.useEffect)(function(){i&&s.update()},[s,i,t.children]);const a=s._contentNode;return a?(0,Fo.createPortal)(t.children,a):null}return(0,r.forwardRef)(t)}(n)}(function(e,t){return lm(new rm.Popup(e,t.overlayContainer),t)},function(e,t,n,i){let{position:o}=n;(0,r.useEffect)(function(){const{instance:n}=e;function r(e){e.popup===n&&(n.update(),i(!0))}function s(e){e.popup===n&&i(!1)}return t.map.on({popupopen:r,popupclose:s}),null==t.overlayContainer?(null!=o&&n.setLatLng(o),n.openOn(t.map)):t.overlayContainer.bindPopup(n),function(){t.map.off({popupopen:r,popupclose:s}),t.overlayContainer?.unbindPopup(),t.map.removeLayer(n)}},[e,t,i,o])});delete im().Icon.Default.prototype._getIconUrl,im().Icon.Default.mergeOptions({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});const ym=()=>{const[e,t]=(0,r.useState)([]);return(0,r.useEffect)(()=>{(async()=>{try{const{data:e}=await Do.get(`${(void 0).VITE_BACKEND_URL}/threat-map`),n=e.filter(e=>{var t,n;return(null===e||void 0===e||null===(t=e.ipGeo)||void 0===t?void 0:t.lat)&&(null===e||void 0===e||null===(n=e.ipGeo)||void 0===n?void 0:n.lon)});t(n)}catch(e){console.error("Failed to fetch threat map data:",e.message)}})()},[]),(0,vr.jsx)("div",{className:"h-[500px] w-full rounded overflow-hidden",children:(0,vr.jsxs)(am,{center:[20.5937,78.9629],zoom:4,scrollWheelZoom:!0,className:"w-full h-full",children:[(0,vr.jsx)(pm,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"\xa9 OpenStreetMap contributors"}),e.map((e,t)=>(0,vr.jsx)(gm,{position:[e.ipGeo.lat,e.ipGeo.lon],children:(0,vr.jsx)(vm,{children:(0,vr.jsxs)("div",{className:"text-sm space-y-1",children:[(0,vr.jsxs)("div",{children:[(0,vr.jsx)("strong",{children:"Wallet:"})," ",e.wallet]}),(0,vr.jsxs)("div",{children:[(0,vr.jsx)("strong",{children:"Bank:"})," ",e.bank||"N/A"]}),(0,vr.jsxs)("div",{children:[(0,vr.jsx)("strong",{children:"City:"})," ",e.ipGeo.city||"Unknown"]}),(0,vr.jsxs)("div",{children:[(0,vr.jsx)("strong",{children:"Org:"})," ",e.ipGeo.org||"Unknown"]}),(0,vr.jsxs)("div",{children:[(0,vr.jsx)("strong",{children:"Risk:"})," ",(0,vr.jsx)("span",{className:"font-bold text-red-600",children:e.risk||"Unrated"})]})]})})},t))]})})},_m=e=>{let{score:t,tags:n}=e;const r=t>80?"High":t>50?"Moderate":"Low",i=t>80?"red":t>50?"orange":"green";return(0,vr.jsxs)("div",{className:"text-center p-4 rounded-lg shadow-md border w-48",children:[(0,vr.jsx)("div",{className:"text-xl font-bold",children:"Risk Score"}),(0,vr.jsx)("div",{className:`text-4xl font-extrabold text-${i}-600`,children:t}),(0,vr.jsxs)("div",{className:`text-${i}-500 font-medium`,children:[r," Risk"]}),(0,vr.jsxs)("div",{className:"mt-2 text-sm text-gray-500",children:["Confidence: ",t||0,"%"]}),(0,vr.jsx)("div",{className:"mt-3 flex flex-wrap justify-center",children:null===n||void 0===n?void 0:n.map((e,t)=>(0,vr.jsx)("span",{className:"bg-gray-200 text-gray-700 text-xs px-2 py-1 m-1 rounded-full",children:e},t))})]})},bm=e=>{let{entityId:t}=e;const[n,i]=(0,r.useState)(!1),[o,s]=(0,r.useState)(!1);return(0,vr.jsx)("button",{className:"px-4 py-2 rounded text-white "+(n?"bg-gray-400":"bg-red-600 hover:bg-red-700"),onClick:async()=>{if(window.confirm(`Are you sure you want to escalate ${t}?`))try{s(!0),await Do.post(`${(void 0).VITE_BACKEND_URL}/admin/escalate`,{wallet:t}),alert("\u2705 Escalation triggered!"),i(!0)}catch(e){console.error(e),alert("\u274c Failed to escalate.")}finally{s(!1)}},disabled:n||o,children:o?"Escalating...":n?"Escalated":"\ud83d\udea8 Escalate"})};var xm=n(450);const wm=e=>{let{filters:t,backendUrl:n}=e;const r=async e=>{try{const r=(()=>{const e=new URLSearchParams;return t.wallet&&e.append("wallet",t.wallet),t.status&&e.append("status",t.status),t.risk&&e.append("riskLevel",t.risk),e.toString()})(),i=`${n}/api/reports/export?${r}&format=${e}`,o=await Do.get(i,{responseType:"blob",headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}}),s=new Blob([o.data],{type:"csv"===e?"text/csv":"application/json"});(0,xm.saveAs)(s,`fraud_report_${Date.now()}.${e}`)}catch(i){var r;if(i.response)console.error("\ud83d\udea8 Download error:",i.response.data),alert((null===(r=i.response.data)||void 0===r?void 0:r.error)||"Download failed.");else i.request?(console.error("\ud83d\udea8 No response received:",i.request),alert("No response from server.")):(console.error("\ud83d\udea8 Unknown error:",i.message),alert(i.message||"Unknown error occurred."))}};return(0,vr.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,vr.jsx)("button",{onClick:()=>r("csv"),className:"bg-blue-600 text-white px-4 py-2 rounded",children:"Export CSV"}),(0,vr.jsx)("button",{onClick:()=>r("json"),className:"bg-green-600 text-white px-4 py-2 rounded",children:"Export JSON"})]})},Sm=()=>{const[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),o=localStorage.getItem("token"),s={"Content-Type":"application/json",...o&&{Authorization:`Bearer ${o}`}},a=async()=>{try{const t=await fetch(`/api/enforce/freeze/${e}`,{method:"POST",headers:s});if(!t.ok){const e=await t.json();throw new Error(e.message||"Freeze failed")}alert(`${e} has been frozen`)}catch(t){console.error("Freeze Error:",t),alert(`Freeze failed: ${t.message}`)}};return(0,vr.jsxs)("div",{className:"p-4 border rounded shadow-lg max-w-md mx-auto",children:[(0,vr.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Enforcement Panel"}),(0,vr.jsx)("input",{type:"text",placeholder:"Wallet address",value:e,onChange:e=>t(e.target.value),className:"border p-2 w-full mb-2"}),(0,vr.jsx)("input",{type:"text",placeholder:"Reason for report (optional)",value:n,onChange:e=>i(e.target.value),className:"border p-2 w-full mb-4"}),(0,vr.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,vr.jsx)("button",{onClick:a,className:"bg-red-500 text-white px-4 py-2 rounded",children:"Freeze"}),(0,vr.jsx)("button",{onClick:async()=>{try{const t=await fetch(`/api/enforce/unfreeze/${e}`,{method:"POST",headers:s});if(!t.ok){const e=await t.json();throw new Error(e.message||"Unfreeze failed")}alert(`${e} has been unfrozen`)}catch(t){console.error("Unfreeze Error:",t),alert(`Unfreeze failed: ${t.message}`)}},className:"bg-green-500 text-white px-4 py-2 rounded",children:"Unfreeze"}),(0,vr.jsx)("button",{onClick:async()=>{try{const t=await fetch(`/api/panic/${e}`,{method:"POST",headers:s,body:JSON.stringify({reporterId:"enforcement-panel",reason:n||"Suspicious activity",severity:5})});if(!t.ok){const e=await t.json();throw new Error(e.message||"Report failed")}alert(`Reported ${e} for: ${n}`)}catch(t){console.error("Report Error:",t),alert(`Report failed: ${t.message}`)}},className:"bg-yellow-500 text-black px-4 py-2 rounded",children:"Report"}),(0,vr.jsx)("button",{onClick:async()=>{try{const t=await fetch("/api/token/transfer",{method:"POST",headers:s,body:JSON.stringify({from:"dead_wallet",to:e,amount:100})}),n=await t.json();if(!t.ok)throw new Error(n.message||"Transfer failed");n.shouldFreeze?await a():alert(`Transfer to ${e} completed.`)}catch(t){console.error("Transfer Error:",t),alert(`Transfer failed: ${t.message}`)}},className:"bg-blue-500 text-white px-4 py-2 rounded",children:"Simulate Transfer + Enforce"})]})]})},km=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{try{const e=await Do.get(`${(void 0).VITE_BACKEND_URL}/api/feedback/rl`);t(e.data||[])}catch(e){console.error("Failed to fetch RL feedback:",e)}finally{i(!1)}})()},[]);const o=async(e,t)=>{try{await Do.post(`${(void 0).VITE_BACKEND_URL}/api/feedback/rl`,{decisionId:e,feedback:t}),alert(`Feedback submitted: ${t}`)}catch(n){console.error("Feedback error:",n),alert("Failed to send feedback.")}};return n?(0,vr.jsx)("div",{children:"Loading feedback..."}):(0,vr.jsxs)("div",{className:"p-4 border rounded shadow-md bg-white mt-8",children:[(0,vr.jsx)("h2",{className:"text-xl font-bold mb-4",children:"\ud83e\udd16 RL Feedback Panel"}),0===e.length?(0,vr.jsx)("div",{className:"text-gray-500",children:"No recent model decisions available."}):(0,vr.jsx)("ul",{className:"space-y-4",children:e.map(e=>(0,vr.jsxs)("li",{className:"border p-3 rounded-md",children:[(0,vr.jsxs)("p",{children:[(0,vr.jsx)("strong",{children:"Wallet:"})," ",e.wallet]}),(0,vr.jsxs)("p",{children:[(0,vr.jsx)("strong",{children:"Risk Score:"})," ",e.riskScore," / 100"]}),(0,vr.jsxs)("p",{children:[(0,vr.jsx)("strong",{children:"Confidence:"})," ",e.confidence||"N/A","%"]}),(0,vr.jsxs)("p",{children:[(0,vr.jsx)("strong",{children:"Tags:"})," ",(e.tags||[]).join(", ")]}),(0,vr.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,vr.jsx)("button",{onClick:()=>o(e.id,"correct"),className:"bg-green-500 text-white px-3 py-1 rounded",children:"\u2705 Correct"}),(0,vr.jsx)("button",{onClick:()=>o(e.id,"wrong"),className:"bg-red-500 text-white px-3 py-1 rounded",children:"\u274c Wrong"})]})]},e.id))})]})},Em=e=>{let{caseId:t}=e;const[n,i]=(0,r.useState)(!1),[o,s]=(0,r.useState)(!1),a=(void 0).VITE_BACKEND_URL;return(0,vr.jsxs)(vr.Fragment,{children:[(0,vr.jsx)("button",{onClick:()=>i(!0),className:"bg-yellow-500 text-white text-xs px-2 py-1 rounded",children:"Export Case"}),n&&(0,vr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,vr.jsxs)("div",{className:"bg-white p-6 rounded shadow max-w-sm w-full",children:[(0,vr.jsx)("h2",{className:"text-lg font-bold mb-4",children:"\ud83d\udce4 Confirm Export"}),(0,vr.jsxs)("p",{className:"text-sm mb-4",children:["Do you want to export all evidence files for ",(0,vr.jsxs)("strong",{children:["Case ID: ",t]}),"?"]}),(0,vr.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,vr.jsx)("button",{onClick:()=>i(!1),className:"px-3 py-1 border rounded",disabled:o,children:"Cancel"}),(0,vr.jsx)("button",{onClick:async()=>{s(!0);try{const e=await Do.get(`${a}/api/reports/export/case/${t}`),{files:n}=e.data;null!==n&&void 0!==n&&n.json&&window.open(`${a}${n.json}`,"_blank"),null!==n&&void 0!==n&&n.csv&&window.open(`${a}${n.csv}`,"_blank")}catch(r){var e,n;alert("\u274c Export failed: "+((null===(e=r.response)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.error)||r.message))}finally{s(!1),i(!1)}},className:"px-4 py-1 bg-blue-600 text-white rounded",disabled:o,children:o?"Exporting...":"Confirm"})]})]})})]})},Nm=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!1),[o,s]=(0,r.useState)(!1),[a,l]=(0,r.useState)([{type:"wallet_address",value:""}]),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(""),[f,p]=(0,r.useState)(null),m=async()=>{i(!0);try{const e=(void 0).VITE_BACKEND_URL||"http://localhost:5050",n=localStorage.getItem("authToken"),r=await Do.get(`${e}/api/investigations`,{headers:{Authorization:`Bearer ${n}`}});t(r.data.investigations||r.data)}catch(e){console.error("Error fetching investigations:",e),js.error("Failed to fetch investigations")}finally{i(!1)}},g=(e,t,n)=>{const r=[...a];r[e][t]=n,l(r)};return(0,r.useEffect)(()=>{m()},[]),(0,vr.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,vr.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,vr.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"\ud83d\udd0d Investigations"}),(0,vr.jsx)("button",{onClick:()=>s(!o),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:o?"Cancel":"Link Entities"})]}),o&&(0,vr.jsxs)("div",{className:"mb-8 p-4 border border-blue-200 rounded-lg bg-blue-50",children:[(0,vr.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Group Multiple Wallets/IPs Under One Investigation"}),(0,vr.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=a.filter(e=>""!==e.value.trim());if(0!==t.length)try{const e=(void 0).VITE_BACKEND_URL||"http://localhost:5050",n=localStorage.getItem("authToken"),r=JSON.parse(localStorage.getItem("userInfo")||"{}"),i=await Do.post(`${e}/api/investigations/link`,{entities:t,metadata:{title:c||`Investigation - ${(new Date).toISOString().split("T")[0]}`,description:d,createdBy:r.id}},{headers:{Authorization:`Bearer ${n}`}});js.success("Entities linked successfully under investigation ID: "+i.data.investigationId),s(!1),l([{type:"wallet_address",value:""}]),u(""),h(""),m()}catch(i){var n,r;console.error("Error linking entities:",i),js.error("Failed to link entities: "+((null===(n=i.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.error)||i.message))}else js.error("Please add at least one entity")},children:[(0,vr.jsxs)("div",{className:"mb-4",children:[(0,vr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Investigation Title"}),(0,vr.jsx)("input",{type:"text",value:c,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter investigation title"})]}),(0,vr.jsxs)("div",{className:"mb-4",children:[(0,vr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,vr.jsx)("textarea",{value:d,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter investigation description",rows:"3"})]}),(0,vr.jsxs)("div",{className:"mb-4",children:[(0,vr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Entities to Link (Wallets, IPs, etc.)"}),(0,vr.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Add multiple entities to group them under a single investigation ID"}),a.map((e,t)=>(0,vr.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,vr.jsxs)("select",{value:e.type,onChange:e=>g(t,"type",e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,vr.jsx)("option",{value:"wallet_address",children:"Wallet Address"}),(0,vr.jsx)("option",{value:"ip_address",children:"IP Address"}),(0,vr.jsx)("option",{value:"domain",children:"Domain"}),(0,vr.jsx)("option",{value:"email",children:"Email"}),(0,vr.jsx)("option",{value:"phone",children:"Phone"}),(0,vr.jsx)("option",{value:"device_id",children:"Device ID"}),(0,vr.jsx)("option",{value:"transaction_hash",children:"Transaction Hash"})]}),(0,vr.jsx)("input",{type:"text",value:e.value,onChange:e=>g(t,"value",e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter entity value"}),a.length>1&&(0,vr.jsx)("button",{type:"button",onClick:()=>(e=>{if(a.length>1){const t=[...a];t.splice(e,1),l(t)}})(t),className:"px-3 py-2 bg-red-500 text-white rounded-md hover:bg-red-600",children:"Remove"})]},t)),(0,vr.jsx)("button",{type:"button",onClick:()=>{l([...a,{type:"wallet_address",value:""}])},className:"mt-2 px-3 py-1 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300",children:"+ Add Entity"})]}),(0,vr.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,vr.jsx)("button",{type:"button",onClick:()=>s(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancel"}),(0,vr.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Group Under Investigation"})]})]})]}),(0,vr.jsxs)("div",{className:"mb-4",children:[(0,vr.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Active Investigations"}),n?(0,vr.jsxs)("div",{className:"flex justify-center items-center py-8",children:[(0,vr.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,vr.jsx)("span",{className:"ml-2",children:"Loading investigations..."})]}):0===e.length?(0,vr.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,vr.jsx)("p",{children:"No investigations found."}),(0,vr.jsx)("p",{className:"mt-2",children:'Click "Link Entities" to create your first investigation.'})]}):(0,vr.jsx)("div",{className:"space-y-4",children:e.map(e=>{var t,n;return(0,vr.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[(0,vr.jsxs)("div",{className:"flex justify-between items-start",children:[(0,vr.jsxs)("div",{children:[(0,vr.jsx)("h4",{className:"font-medium text-lg text-gray-800",children:e.title}),(0,vr.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),(0,vr.jsxs)("div",{className:"mt-2 flex flex-wrap gap-2",children:[(0,vr.jsx)("span",{className:"px-2 py-1 text-xs rounded-full "+("active"===e.status?"bg-green-100 text-green-800":"under_review"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.status}),(0,vr.jsxs)("span",{className:"px-2 py-1 text-xs rounded-full "+("critical"===e.priority?"bg-red-100 text-red-800":"high"===e.priority?"bg-orange-100 text-orange-800":"medium"===e.priority?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:[e.priority," priority"]}),(0,vr.jsxs)("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800",children:[(null===(t=e.entities)||void 0===t?void 0:t.length)||0," entities"]}),(0,vr.jsxs)("span",{className:"px-2 py-1 text-xs rounded-full bg-purple-100 text-purple-800",children:["Risk: ",(100*(null===(n=e.riskAssessment)||void 0===n?void 0:n.overallRisk)).toFixed(1),"%"]}),e.investigationId&&(0,vr.jsxs)("span",{className:"px-2 py-1 text-xs rounded-full bg-indigo-100 text-indigo-800",children:["ID: ",e.investigationId]})]})]}),(0,vr.jsx)("div",{className:"flex gap-2",children:(0,vr.jsx)("button",{onClick:()=>(async e=>{try{const t=(void 0).VITE_BACKEND_URL||"http://localhost:5050",n=localStorage.getItem("authToken");await Do.post(`${t}/api/investigations/${e}/analyze`,{},{headers:{Authorization:`Bearer ${n}`}}),js.success("Connection analysis completed!"),m()}catch(t){console.error("Error analyzing connections:",t),js.error("Failed to analyze connections")}})(e._id),className:"px-3 py-1 text-sm bg-purple-600 text-white rounded-md hover:bg-purple-700",children:"Analyze"})})]}),e.entities&&e.entities.length>0&&(0,vr.jsxs)("div",{className:"mt-3",children:[(0,vr.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Linked Entities:"}),(0,vr.jsx)("div",{className:"flex flex-wrap gap-2",children:e.entities.map((e,t)=>(0,vr.jsxs)("span",{className:"px-2 py-1 text-xs rounded bg-gray-100 text-gray-700",title:`${e.type}: ${e.value}`,children:[e.type,": ",e.value.substring(0,10),"..."]},t))})]}),e.connections&&e.connections.length>0&&(0,vr.jsxs)("div",{className:"mt-3",children:[(0,vr.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Connections:"}),(0,vr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:e.connections.map((e,t)=>(0,vr.jsxs)("div",{className:"p-2 bg-gray-50 rounded text-xs",children:[(0,vr.jsx)("div",{className:"font-medium text-gray-800",children:e.type.replace("_"," ").toUpperCase()}),(0,vr.jsxs)("div",{className:"text-gray-600 truncate",children:[e.entity1.value.substring(0,8),"... \u2194 ",e.entity2.value.substring(0,8),"..."]}),(0,vr.jsxs)("div",{className:"flex items-center mt-1",children:[(0,vr.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:(0,vr.jsx)("div",{className:"h-1.5 rounded-full bg-blue-600",style:{width:100*e.strength+"%"}})}),(0,vr.jsxs)("span",{className:"ml-2 text-xs text-gray-600",children:[(100*e.strength).toFixed(0),"%"]})]})]},t))})]}),(0,vr.jsxs)("div",{className:"mt-3 text-xs text-gray-500",children:["Created: ",new Date(e.createdAt).toLocaleString(),e.investigationId&&(0,vr.jsxs)("span",{className:"ml-2",children:["ID: ",e.investigationId]})]})]},e._id)})})]})]})},jm=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(""),[o,s]=(0,r.useState)(""),[a,l]=(0,r.useState)(""),[c,u]=(0,r.useState)([]),[d,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(""),[m,g]=(0,r.useState)(""),[v,y]=(0,r.useState)(!0),_=async()=>{h(!0);try{const e=(void 0).VITE_BACKEND_URL;if(!e)throw new Error("VITE_BACKEND_URL is not defined");const t=localStorage.getItem("authToken"),n=new URLSearchParams({limit:"50",offset:"0"});f&&n.append("risk_level",f),m&&n.append("violation_type",m);const r=await Do.get(`${e}/api/ml/results?${n}`,{headers:{Authorization:`Bearer ${t}`}});u(r.data.results||[])}catch(e){console.error("Error fetching ML results:",e.message||e)}finally{h(!1)}};(0,r.useEffect)(()=>{(async()=>{try{const e=(void 0).VITE_BACKEND_URL;if(!e)throw new Error("VITE_BACKEND_URL is not defined");const n=await Do.get(`${e}/api/reports`);t(n.data)}catch(e){console.error("Error fetching reports:",e.message||e)}})(),_()},[]),(0,r.useEffect)(()=>{v&&_()},[f,m,v]);const b=e.filter(e=>{const t=!n||e.status===n,r=!o||e.risk===o,i=!a||e.wallet.includes(a);return t&&r&&i});return(0,vr.jsxs)("div",{className:"max-w-6xl mx-auto bg-white p-6 rounded-md shadow-md",children:[(0,vr.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center",children:"\ud83d\udee1\ufe0f Admin Dashboard"}),(0,vr.jsxs)("div",{className:"my-6",children:[(0,vr.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"\ud83d\udccd Suspicious Wallets Threat Map"}),(0,vr.jsx)(ym,{})]}),(0,vr.jsxs)("div",{className:"my-8 bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 rounded-xl p-6",children:[(0,vr.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,vr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,vr.jsx)("div",{className:"w-10 h-10 bg-purple-600 rounded-lg flex items-center justify-center",children:(0,vr.jsx)("span",{className:"text-white text-lg",children:"\ud83e\udd16"})}),(0,vr.jsxs)("div",{children:[(0,vr.jsx)("h2",{className:"text-xl font-bold text-purple-800",children:"AI/ML Analysis Results"}),(0,vr.jsx)("p",{className:"text-sm text-purple-600",children:"Advanced behavioral pattern detection results"})]})]}),(0,vr.jsxs)("button",{onClick:()=>y(!v),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:[v?"Hide":"Show"," ML Results"]})]}),v&&(0,vr.jsxs)(vr.Fragment,{children:[(0,vr.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,vr.jsxs)("div",{className:"flex-1",children:[(0,vr.jsx)("label",{className:"block text-sm font-medium text-purple-700 mb-2",children:"Risk Severity Filter"}),(0,vr.jsxs)("select",{onChange:e=>p(e.target.value),className:"w-full border border-purple-300 p-3 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",value:f,children:[(0,vr.jsx)("option",{value:"",children:"All Risk Levels"}),(0,vr.jsx)("option",{value:"low",children:"\ud83d\udfe2 Low Risk (0.0 - 0.39)"}),(0,vr.jsx)("option",{value:"medium",children:"\ud83d\udfe1 Medium Risk (0.4 - 0.59)"}),(0,vr.jsx)("option",{value:"high",children:"\ud83d\udfe0 High Risk (0.6 - 0.79)"}),(0,vr.jsx)("option",{value:"critical",children:"\ud83d\udd34 Critical Risk (0.8 - 1.0)"})]})]}),(0,vr.jsxs)("div",{className:"flex-1",children:[(0,vr.jsx)("label",{className:"block text-sm font-medium text-purple-700 mb-2",children:"Violation Type Filter"}),(0,vr.jsxs)("select",{onChange:e=>g(e.target.value),className:"w-full border border-purple-300 p-3 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",value:m,children:[(0,vr.jsx)("option",{value:"",children:"All Violation Types"}),(0,vr.jsx)("option",{value:"rapid",children:"Rapid Token Dump"}),(0,vr.jsx)("option",{value:"large",children:"Large Transfers"}),(0,vr.jsx)("option",{value:"flash",children:"Flash Loan Manipulation"}),(0,vr.jsx)("option",{value:"phishing",children:"Phishing Activity"}),(0,vr.jsx)("option",{value:"low risk",children:"Low Risk Activity"})]})]}),(0,vr.jsx)("div",{className:"flex items-end",children:(0,vr.jsx)("button",{onClick:()=>{p(""),g("")},className:"px-4 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Clear Filters"})})]}),d?(0,vr.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,vr.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),(0,vr.jsx)("span",{className:"ml-3 text-purple-700",children:"Loading ML analysis results..."})]}):(0,vr.jsx)("div",{className:"bg-white rounded-lg border border-purple-200 overflow-hidden",children:(0,vr.jsx)("div",{className:"overflow-x-auto",children:(0,vr.jsxs)("table",{className:"min-w-full",children:[(0,vr.jsx)("thead",{className:"bg-purple-100",children:(0,vr.jsxs)("tr",{children:[(0,vr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-purple-800 uppercase tracking-wider",children:"Wallet Address"}),(0,vr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-purple-800 uppercase tracking-wider",children:"Risk Score"}),(0,vr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-purple-800 uppercase tracking-wider",children:"Violation Type"}),(0,vr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-purple-800 uppercase tracking-wider",children:"Recommended Action"}),(0,vr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-purple-800 uppercase tracking-wider",children:"Analysis Details"}),(0,vr.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-purple-800 uppercase tracking-wider",children:"Analyzed"})]})}),(0,vr.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[c.map((e,t)=>{var n,r,i,o,s,a,l,c,u,d,h,f,p,m,g,v,y,_,b,x;return(0,vr.jsxs)("tr",{className:"hover:bg-purple-50",children:[(0,vr.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,vr.jsxs)("div",{className:"text-sm font-mono text-gray-900",children:[null===(n=e.address)||void 0===n?void 0:n.substring(0,10),"...",null===(r=e.address)||void 0===r?void 0:r.substring(e.address.length-8)]}),(0,vr.jsxs)("div",{className:"text-xs text-gray-500",children:[e.transaction_count," transactions"]})]}),(0,vr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,vr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,vr.jsx)("span",{className:"text-lg font-bold "+(e.score>=.8?"text-red-600":e.score>=.6?"text-orange-600":e.score>=.4?"text-yellow-600":"text-green-600"),children:e.score}),(0,vr.jsx)("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:(0,vr.jsx)("div",{className:"h-2 rounded-full "+(e.score>=.8?"bg-red-500":e.score>=.6?"bg-orange-500":e.score>=.4?"bg-yellow-500":"bg-green-500"),style:{width:100*e.score+"%"}})})]})}),(0,vr.jsx)("td",{className:"px-6 py-4",children:(0,vr.jsx)("div",{className:"text-sm text-gray-900",children:e.violation})}),(0,vr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,vr.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+("freeze"===e.recommended_action?"bg-red-100 text-red-800":"investigate"===e.recommended_action?"bg-orange-100 text-orange-800":"monitor"===e.recommended_action?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:null===(i=e.recommended_action)||void 0===i||null===(o=i.replace("_"," "))||void 0===o?void 0:o.toUpperCase()})}),(0,vr.jsx)("td",{className:"px-6 py-4",children:(0,vr.jsxs)("div",{className:"text-xs space-y-1",children:[(0,vr.jsxs)("div",{className:"flex justify-between",children:[(0,vr.jsx)("span",{children:"Rapid Dump:"}),(0,vr.jsx)("span",{className:null!==(s=e.analysis_details)&&void 0!==s&&null!==(a=s.rapid_dumping)&&void 0!==a&&a.detected?"text-red-600":"text-green-600",children:null!==(l=e.analysis_details)&&void 0!==l&&null!==(c=l.rapid_dumping)&&void 0!==c&&c.detected?"\u26a0\ufe0f":"\u2705"})]}),(0,vr.jsxs)("div",{className:"flex justify-between",children:[(0,vr.jsx)("span",{children:"Large Transfers:"}),(0,vr.jsx)("span",{className:null!==(u=e.analysis_details)&&void 0!==u&&null!==(d=u.large_transfers)&&void 0!==d&&d.detected?"text-red-600":"text-green-600",children:null!==(h=e.analysis_details)&&void 0!==h&&null!==(f=h.large_transfers)&&void 0!==f&&f.detected?"\u26a0\ufe0f":"\u2705"})]}),(0,vr.jsxs)("div",{className:"flex justify-between",children:[(0,vr.jsx)("span",{children:"Flash Loans:"}),(0,vr.jsx)("span",{className:null!==(p=e.analysis_details)&&void 0!==p&&null!==(m=p.flash_loans)&&void 0!==m&&m.detected?"text-red-600":"text-green-600",children:null!==(g=e.analysis_details)&&void 0!==g&&null!==(v=g.flash_loans)&&void 0!==v&&v.detected?"\u26a0\ufe0f":"\u2705"})]}),(0,vr.jsxs)("div",{className:"flex justify-between",children:[(0,vr.jsx)("span",{children:"Phishing:"}),(0,vr.jsx)("span",{className:null!==(y=e.analysis_details)&&void 0!==y&&null!==(_=y.phishing_indicators)&&void 0!==_&&_.detected?"text-red-600":"text-green-600",children:null!==(b=e.analysis_details)&&void 0!==b&&null!==(x=b.phishing_indicators)&&void 0!==x&&x.detected?"\u26a0\ufe0f":"\u2705"})]})]})}),(0,vr.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-xs text-gray-500",children:[(0,vr.jsx)("div",{children:new Date(e.analyzed_at).toLocaleDateString()}),(0,vr.jsx)("div",{children:new Date(e.analyzed_at).toLocaleTimeString()}),(0,vr.jsxs)("div",{className:"text-xs text-gray-400",children:["by ",e.analyzed_by]})]})]},e.id||t)}),0===c.length&&(0,vr.jsx)("tr",{children:(0,vr.jsxs)("td",{colSpan:"6",className:"px-6 py-8 text-center text-gray-500",children:[(0,vr.jsx)("div",{className:"text-4xl mb-2",children:"\ud83e\udd16"}),(0,vr.jsx)("div",{children:"No ML analysis results found matching the filters"})]})})]})]})})})]})]}),(0,vr.jsxs)("div",{className:"flex flex-col sm:flex-row sm:flex-wrap gap-2 mb-4",children:[(0,vr.jsxs)("select",{onChange:e=>i(e.target.value),className:"border p-2 rounded",value:n,children:[(0,vr.jsx)("option",{value:"",children:"All Status"}),(0,vr.jsx)("option",{value:"pending",children:"Pending"}),(0,vr.jsx)("option",{value:"reviewed",children:"Reviewed"}),(0,vr.jsx)("option",{value:"escalated",children:"Escalated"})]}),(0,vr.jsxs)("select",{onChange:e=>s(e.target.value),className:"border p-2 rounded",value:o,children:[(0,vr.jsx)("option",{value:"",children:"All Risk Levels"}),(0,vr.jsx)("option",{value:"low",children:"Low"}),(0,vr.jsx)("option",{value:"medium",children:"Medium"}),(0,vr.jsx)("option",{value:"high",children:"High"})]}),(0,vr.jsx)("input",{type:"text",placeholder:"Search by Wallet",className:"border p-2 rounded flex-1",value:a,onChange:e=>l(e.target.value)})]}),(0,vr.jsx)("div",{className:"overflow-x-auto",children:(0,vr.jsxs)("table",{className:"min-w-full bg-white border border-gray-300 text-sm",children:[(0,vr.jsx)("thead",{children:(0,vr.jsxs)("tr",{className:"bg-gray-100",children:[(0,vr.jsx)("th",{className:"py-2 px-4 border-b",children:"Wallet"}),(0,vr.jsx)("th",{className:"py-2 px-4 border-b",children:"Risk"}),(0,vr.jsx)("th",{className:"py-2 px-4 border-b",children:"Status"}),(0,vr.jsx)("th",{className:"py-2 px-4 border-b",children:"Timestamp"}),(0,vr.jsx)("th",{className:"py-2 px-4 border-b",children:"Details"}),(0,vr.jsx)("th",{className:"py-2 px-4 border-b",children:"Action"})]})}),(0,vr.jsxs)("tbody",{children:[b.map((e,t)=>(0,vr.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,vr.jsx)("td",{className:"py-2 px-4 border-b",children:e.wallet}),(0,vr.jsx)("td",{className:"py-2 px-4 border-b capitalize",children:e.risk}),(0,vr.jsx)("td",{className:"py-2 px-4 border-b capitalize",children:e.status}),(0,vr.jsx)("td",{className:"py-2 px-4 border-b",children:new Date(e.timestamp).toLocaleString()}),(0,vr.jsx)("td",{className:"py-2 px-4 border-b",children:(0,vr.jsx)(_m,{score:e.riskScore||0,tags:e.tags||[]})}),(0,vr.jsxs)("td",{className:"py-2 px-4 border-b text-center space-y-1",children:["escalated"!==e.status&&(0,vr.jsx)(bm,{entityId:e.wallet}),"contract"===e.source&&(0,vr.jsx)("span",{className:"inline-block text-xs font-medium bg-purple-100 text-purple-700 px-2 py-1 rounded-full",children:"Flagged via Contract"}),"admin"===e.source&&(0,vr.jsx)("span",{className:"inline-block text-xs font-medium bg-red-100 text-red-700 px-2 py-1 rounded-full",children:"Escalated by Admin"}),e.caseId&&(0,vr.jsx)("div",{className:"mt-2",children:(0,vr.jsx)(Em,{caseId:e.caseId})})]})]},t)),0===b.length&&(0,vr.jsx)("tr",{children:(0,vr.jsx)("td",{colSpan:"6",className:"text-center py-4 text-gray-500",children:"No reports found matching the filters."})})]})]})}),(0,vr.jsx)("div",{className:"mt-4 text-right",children:(0,vr.jsx)(wm,{filters:{wallet:a,status:n,riskLevel:o}})}),(0,vr.jsx)("div",{className:"mt-10",children:(0,vr.jsx)(km,{})}),(0,vr.jsxs)("div",{className:"mt-10",children:[(0,vr.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"\ud83d\udd10 Smart Contract Enforcement"}),(0,vr.jsx)(Sm,{})]}),(0,vr.jsxs)("div",{className:"mt-10",children:[(0,vr.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,vr.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"\ud83d\udcc1 Evidence Library"}),(0,vr.jsx)("div",{className:"text-sm text-gray-600",children:"Secure evidence management with blockchain verification"})]}),(0,vr.jsx)(Wp,{})]}),(0,vr.jsxs)("div",{className:"mt-10",children:[(0,vr.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,vr.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"\ud83d\udd0d Investigations"}),(0,vr.jsx)("div",{className:"text-sm text-gray-600",children:"Link multiple wallets/IPs under one investigation ID"})]}),(0,vr.jsx)(Nm,{})]})]})},Cm=()=>{const[e,t]=(0,r.useState)(null),[n,i]=(0,r.useState)(!0),[o,s]=(0,r.useState)("evidence"),a=(void 0).VITE_BACKEND_URL||"http://localhost:5050";(0,r.useEffect)(()=>{l()},[]);const l=async()=>{try{const e=localStorage.getItem("authToken");if(!e)return js.error("\u274c Please login to access investigator dashboard"),void(window.location.href="/");const n=await Do.get(`${a}/api/auth/verify`,{headers:{Authorization:`Bearer ${e}`}});!n.data||"investigator"!==n.data.role&&"admin"!==n.data.role?(js.error("\u274c Investigator access required"),window.location.href="/"):(t(n.data),js.success(`\u2705 Welcome Investigator: ${n.data.email}`))}catch(e){console.error("Investigator access check failed:",e),js.error("\u274c Investigator access verification failed"),window.location.href="/"}finally{i(!1)}};return n?(0,vr.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,vr.jsx)("div",{className:"text-xl",children:"\ud83d\udd04 Verifying investigator access..."})}):(0,vr.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,vr.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,vr.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,vr.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,vr.jsxs)("div",{children:[(0,vr.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"\ud83d\udd0d Investigator Dashboard"}),(0,vr.jsxs)("p",{className:"text-sm text-gray-600",children:["Welcome, ",null===e||void 0===e?void 0:e.email," | Role: ",null===e||void 0===e?void 0:e.role]})]}),(0,vr.jsxs)("div",{className:"flex space-x-4",children:[(0,vr.jsx)("a",{href:"/",className:"text-blue-600 hover:text-blue-800",children:"\u2190 Home"}),(0,vr.jsx)("button",{onClick:()=>{localStorage.removeItem("authToken"),window.location.href="/"},className:"text-red-600 hover:text-red-800",children:"Logout"})]})]})})}),(0,vr.jsx)("div",{className:"bg-white border-b",children:(0,vr.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,vr.jsxs)("nav",{className:"flex space-x-8",children:[(0,vr.jsx)("button",{onClick:()=>s("evidence"),className:"py-4 px-1 border-b-2 font-medium text-sm "+("evidence"===o?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"\ud83d\udcc1 Evidence Library"}),(0,vr.jsx)("button",{onClick:()=>s("cases"),className:"py-4 px-1 border-b-2 font-medium text-sm "+("cases"===o?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"\ud83d\udccb Cases"}),(0,vr.jsx)("button",{onClick:()=>s("permissions"),className:"py-4 px-1 border-b-2 font-medium text-sm "+("permissions"===o?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"\ud83d\udd10 My Permissions"})]})})}),(0,vr.jsxs)("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:["evidence"===o&&(0,vr.jsx)("div",{children:(0,vr.jsx)(Wp,{userRole:null===e||void 0===e?void 0:e.role})}),"cases"===o&&(0,vr.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,vr.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Case Management"}),(0,vr.jsxs)("div",{className:"text-gray-600",children:[(0,vr.jsx)("p",{children:"\ud83d\udccb Case management functionality coming soon..."}),(0,vr.jsx)("p",{className:"mt-2",children:"As an investigator, you can:"}),(0,vr.jsxs)("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[(0,vr.jsx)("li",{children:"View and manage investigation cases"}),(0,vr.jsx)("li",{children:"Upload and organize evidence"}),(0,vr.jsx)("li",{children:"Generate case reports"}),(0,vr.jsx)("li",{children:"Collaborate with other investigators"})]})]})]}),"permissions"===o&&(0,vr.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,vr.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Investigator Permissions"}),(0,vr.jsxs)("div",{className:"space-y-4",children:[(0,vr.jsxs)("div",{className:"border-l-4 border-green-500 pl-4",children:[(0,vr.jsx)("h3",{className:"font-medium text-green-800",children:"\u2705 Allowed Actions"}),(0,vr.jsx)("p",{className:"text-sm text-gray-600",children:"\u2705 View Evidence Library"}),(0,vr.jsx)("p",{className:"text-sm text-gray-600",children:"\u2705 Share Evidence"}),(0,vr.jsx)("p",{className:"text-sm text-gray-600",children:"\u2705 Export Evidence"}),(0,vr.jsx)("p",{className:"text-sm text-gray-600",children:"\u2705 Create and Edit Cases"}),(0,vr.jsx)("p",{className:"text-sm text-gray-600",children:"\u2705 Upload Evidence"})]}),(0,vr.jsxs)("div",{className:"border-l-4 border-red-500 pl-4",children:[(0,vr.jsx)("h3",{className:"font-medium text-red-800",children:"\u274c Restricted Actions"}),(0,vr.jsx)("p",{className:"text-sm text-gray-600",children:"\u274c Delete Evidence (Admin only)"}),(0,vr.jsx)("p",{className:"text-sm text-gray-600",children:"\u274c Manage User Roles (Admin only)"}),(0,vr.jsx)("p",{className:"text-sm text-gray-600",children:"\u274c System Administration (Admin only)"})]}),(0,vr.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,vr.jsxs)("h3",{className:"font-medium text-blue-800",children:["\ud83d\udccb Your Role: ",null===e||void 0===e?void 0:e.role]}),(0,vr.jsx)("p",{className:"text-sm text-blue-700 mt-1",children:"You have investigator-level access to the fraud evidence system. Contact an administrator if you need additional permissions."})]})]})]})]})]})};function Tm(e){let{level:t}=e;const n=null===t||void 0===t?void 0:t.toLowerCase(),r={low:"bg-green-100 text-green-700",medium:"bg-yellow-100 text-yellow-700",high:"bg-red-100 text-red-700"}[n]||"bg-gray-100 text-gray-700";return(0,vr.jsx)("span",{className:`px-3 py-1 rounded-full font-semibold text-sm ${r}`,children:n?n.toUpperCase():"UNKNOWN"})}var Pm=n(446),Lm=n.n(Pm),Om=n(92),Am=n.n(Om);function Mm(){const[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)(null),[o,s]=(0,r.useState)([]),[a,l]=(0,r.useState)(!1);return(0,vr.jsx)("div",{className:"min-h-screen bg-gray-50 px-4 py-6",children:(0,vr.jsxs)("div",{className:"max-w-3xl mx-auto bg-white p-6 rounded shadow",children:[(0,vr.jsx)("h1",{className:"text-2xl font-bold mb-4 text-center",children:"\ud83d\udd0d Public Risk Checker"}),(0,vr.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 mb-4",children:[(0,vr.jsx)("input",{type:"text",placeholder:"Enter wallet ID or address",className:"border p-2 rounded w-full",value:e,onChange:e=>t(e.target.value.trim())}),(0,vr.jsx)("button",{onClick:async()=>{if(e.trim()){l(!0);try{const t=await fetch(`http://localhost:5050/api/wallet-data/${e}`),n=await t.json();t.ok?(i({wallet:n.address,riskLevel:n.riskScore,reportCount:n.totalReports,lastReported:n.lastUpdated}),s(n.timeline||[])):(i(null),s([]),js.warn((null===n||void 0===n?void 0:n.error)||"Wallet not found."))}catch(t){js.error("Network error. Please try again."),console.error("\u274c Fetch error:",t.message)}finally{l(!1)}}else js.error("Please enter a wallet ID or address.")},className:"btn btn-primary w-full sm:w-auto",disabled:a,children:a?"Checking...":"Check Risk"})]}),a&&(0,vr.jsx)("p",{className:"text-blue-500 text-sm",children:"Fetching data..."}),n&&(0,vr.jsxs)("div",{className:"bg-gray-100 p-4 rounded mb-4",children:[(0,vr.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Wallet:"}),(0,vr.jsx)("p",{className:"text-lg font-semibold",children:n.wallet}),(0,vr.jsxs)("p",{className:"mt-2",children:["Risk Level: ",(0,vr.jsx)(Tm,{level:n.riskLevel})]}),(0,vr.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Reports: ",n.reportCount," \u2022"," ","Last reported ",Lm()(n.lastReported).fromNow()]})]}),o.length>0&&(0,vr.jsxs)("div",{children:[(0,vr.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Timeline"}),(0,vr.jsx)(_r,{reports:o})]})]})})}Lm().extend(Am()),Lm().extend(Am());const Rm=function(){var e;const[t,n]=(0,r.useState)(""),[i,o]=(0,r.useState)(null),[s,a]=(0,r.useState)(!1),[l,c]=(0,r.useState)("");return(0,vr.jsxs)("div",{className:"p-6 max-w-xl mx-auto min-h-screen bg-gray-50",children:[(0,vr.jsx)("h2",{className:"text-2xl font-bold mb-4 text-center",children:"\ud83d\udd0d Public Wallet Risk Checker"}),(0,vr.jsx)("input",{type:"text","aria-label":"Wallet address",className:"border p-2 w-full mb-2 rounded text-sm",placeholder:"Enter wallet address (0x...)",value:t,onChange:e=>n(e.target.value)}),(0,vr.jsx)("button",{onClick:async()=>{if(!t||t.length<10)c("Please enter a valid wallet address.");else{a(!0),c(""),o(null);try{const e=await fetch(`http://localhost:5050/api/public/wallet/${t}`);if(!e.ok)throw new Error("Wallet not found or server error");const n=await e.json();o(n)}catch(e){console.error("\u274c Fetch error:",e),c("No data found for this wallet or server is offline.")}finally{a(!1)}}},className:"btn btn-primary w-full mb-4",disabled:s,children:s?"Checking...":"Check Wallet"}),l&&(0,vr.jsx)("p",{className:"text-red-600 text-sm text-center",children:l}),i&&(0,vr.jsxs)("div",{className:"bg-white border rounded p-4 shadow mt-4",children:[(0,vr.jsxs)("p",{className:"mb-2",children:[(0,vr.jsx)("strong",{children:"Risk Level:"})," ",(0,vr.jsx)("span",{className:"high"===i.risk?"text-red-600":"medium"===i.risk?"text-yellow-600":"text-green-600",children:(null===(e=i.risk)||void 0===e?void 0:e.toUpperCase())||"UNKNOWN"})]}),Array.isArray(null===i||void 0===i?void 0:i.flags)&&i.flags.length>0?(0,vr.jsxs)(vr.Fragment,{children:[(0,vr.jsx)("h4",{className:"mt-4 font-semibold text-sm",children:"\ud83d\udccc Recent Flags:"}),(0,vr.jsx)("ul",{className:"list-disc pl-5 mt-2 text-sm",children:i.flags.map((e,t)=>(0,vr.jsxs)("li",{className:"mb-2",children:["\ud83d\udd52 ",Lm()(e.timestamp).fromNow(),e.tx?(0,vr.jsx)("a",{href:`https://sepolia.etherscan.io/tx/${e.tx}`,target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-blue-600 underline",children:"View Tx \u2197"}):(0,vr.jsx)("span",{className:"ml-2 text-gray-400",children:"(Tx not available)"})]},t))})]}):(0,vr.jsx)("p",{className:"text-gray-500 text-sm mt-4",children:"No public flags found for this wallet."})]})]})};o.createRoot(document.getElementById("root")).render((0,vr.jsx)(r.StrictMode,{children:(0,vr.jsx)(_e,{children:(0,vr.jsxs)(he,{children:[(0,vr.jsx)(ue,{path:"/",element:(0,vr.jsx)(Qp,{})}),(0,vr.jsx)(ue,{path:"/admin",element:(0,vr.jsx)(jm,{})}),(0,vr.jsx)(ue,{path:"/investigator",element:(0,vr.jsx)(Cm,{})}),(0,vr.jsx)(ue,{path:"/public",element:(0,vr.jsx)(Mm,{})}),(0,vr.jsx)(ue,{path:"/status",element:(0,vr.jsx)(Rm,{})})]})})}))})()})();
//# sourceMappingURL=main.601e15b7.js.map